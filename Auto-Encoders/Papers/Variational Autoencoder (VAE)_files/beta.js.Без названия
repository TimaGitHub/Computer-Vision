const betaTumbler=document.getElementById("beta-version-tumbler"),betaButton=document.getElementById("beta-version-button"),headerControls=document.getElementById("header__controls"),betaBookUrl=(null==headerControls?void 0:headerControls.getAttribute("book-url"))||"",bookSlug=(null==headerControls?void 0:headerControls.getAttribute("book-slug"))||"",toggleBeta=async e=>{const t=e.target,o=t.checked;try{betaButton.setAttribute("disabled",!0),betaTumbler.setAttribute("disabled",!0),await fetch(`${window.location.origin}/user/beta`,{method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({bookSlug:bookSlug,enable:o})}),window.location.replace(betaBookUrl)}catch(e){t.checked=!o}finally{betaButton.removeAttribute("disabled"),betaTumbler.removeAttribute("disabled")}};bookSlug||(betaButton.remove(),betaTumbler.remove());const addToggleBetaEvent=()=>{betaTumbler.addEventListener("change",toggleBeta),betaButton.addEventListener("change",toggleBeta)};betaTumbler.addEventListener("change",toggleBeta),betaButton.addEventListener("change",toggleBeta);