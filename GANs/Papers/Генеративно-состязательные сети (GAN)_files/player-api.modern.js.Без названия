/*! For license information please see player-api.modern.js.LICENSE.txt */
(()=>{function e(t){var i=n[t];if(void 0!==i)return i.exports;var a=n[t]={id:t,exports:{}};return r[t].call(a.exports,a,a.exports,e),a.exports}var t,r={856:(e,t,r)=>{(t=e.exports=r(870)(!1)).push([e.id,"@keyframes _1f86Je8{0%{transform:rotate(0deg)}to{transform:rotate(360deg)}}._3dwjosp{position:absolute;top:50%;left:50%;pointer-events:none}._2iJDT4A{position:absolute;top:-19px;left:-19px;width:38px;height:38px;animation-name:_1f86Je8;animation-duration:1s;animation-iteration-count:infinite;animation-timing-function:linear}",""]),t.locals={spinner:"_3dwjosp",spinner__svg:"_2iJDT4A",spinner_animation:"_1f86Je8"}},5654:(e,t,r)=>{(e.exports=r(870)(!1)).push([e.id,"yaplayertag,yaplayertag:before,yaplayertag:after,yaplayertag *,yaplayertag :before,yaplayertag :after{hyphens:manual;font-size:inherit;color:inherit;background:0 0;border:0;border-radius:0;border-spacing:0;border-collapse:collapse;box-sizing:content-box;clear:none;float:none;font-variant:normal;font-weight:inherit;letter-spacing:normal;line-height:normal;margin:0;max-height:none;max-width:none;min-height:0;min-width:0;outline:0;padding:0;position:static;text-align:left;text-decoration:none;text-indent:0;text-transform:none;vertical-align:baseline;visibility:inherit;word-spacing:normal}",""])},7792:e=>{e.exports='<svg viewBox="0 0 29 29" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 1.5a13 13 0 1 0 12.898 14.63" stroke="#fff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path></svg>'},310:e=>{e.exports='<svg viewBox="0 0 18 18"><path d="M14.684 3.292Q17.053 5.661 17.053 9q0 3.34-2.369 5.708Q12.34 17.053 9 17.053V18q3.742 0 6.371-2.629Q18 12.742 18 9q0-3.718-2.629-6.371Q12.742 0 9 0v.947q3.34 0 5.684 2.345z"></path></svg>'},7542:(e,t,r)=>{"use strict";function n(e){return new Promise((t,r)=>{const n=new Image;n.onload=function(){n.width>0&&n.height>0&&t(!0),r("Feature isn't supported")},n.onerror=function(){r("Feature isn't supported")},n.src="data:image/webp;base64,"+R[e]})}async function i(e,t){if(!(0,S.HD)(e))return;const r=e.replace(/https?:\/\//i,"").replace(/\/\//i,"").split("/")[1]||null;if(!r||-1===T.indexOf(r))return e;const i=(t?function(e){if("object"!==typeof e)return A.Horizontal;const{width:t,height:r}=e;return t&&r?t>r?A.Horizontal:A.Vertical:A.Horizontal}(t):A.Horizontal)===A.Horizontal?"1920x1080":"1080x1920",a=await async function(){try{const e=localStorage.getItem("playerapi_webp_support_info");if(null!==e){const{isWebpSupported:t,lastCheckTimestamp:r}=JSON.parse(e);if(t)return!0;if(Date.now()-r<864e5)return!1}return await Promise.all([n("lossy"),n("lossless"),n("alpha"),n("animation")]),localStorage.setItem("playerapi_webp_support_info",JSON.stringify(new b(!0))),!0}catch(e){return localStorage.setItem("playerapi_webp_support_info",JSON.stringify(new b(!1))),!1}}()?"q15":"q30";return e.replace("orig",""+i+a)}function a(e){return new P.A(e).toString("/",!0,C)}function o(e,t){const r={content_id:t.content_id,stream_block:t.stream_block,channel_id:t.channel_id,path:"player-events."+e};return"error"===e&&(r.error_code="{{error-code}}"),"seek"===e&&(r.position_from="{{old-position}}"),function(e){if(w&&e.reqid===k)return w;k=e.reqid;const t={reqid:k,yandexuid:e.yandexuid,select_event:"click",cid:73037,pid:197,dtype:"stred",source:e.from,from_block:e.from_block};return e.licence&&(t.licence=e.licence),e.svod&&(t.svod=e.svod),w=O+"//yandex.ru/clck/jclck/"+a(t)}(t)+a({rnd:"{{random}}",fullscreen:"{{fullscreen}}",mute:"{{muted}}",duration:"{{duration}}",timestamp:"{{timestamp}}",user_ts:"{{vts}}",watchedTime:"{{fts}}",vsid:"{{vsid}}"})+a(r)+"*"}function s(e,t){this[t]=Boolean(e)}function l(e,t){this[t]=void 0!==e?Boolean(e):void 0}function c(e,t){!0===e&&(this[t]=e)}function d(e,t){e&&(this[t]=String(e))}function u(e,t){(0,S.hj)(e)&&(this[t]=e)}function h(e,t){const r=Number(e);this[t]=(0,S.hj)(r)?r:0}function f(e,t){!F&&Array.isArray(e)&&(F=!0,this[t]=e)}function p(){return{from:{value:"other",set:d},slots:null,"test-id":{value:[],set(e,t){const r=(0,S.HD)(e)?P.A.parseJSON(e):e;r&&(Array.isArray(r)?this[t]=r.filter(Boolean).map(String):(0,S.HD)(r)?this[t]=r.split(/[,_]/).filter(Boolean):(0,S.hj)(r)&&(this[t]=[String(r)]))}},distr_id:null,audio_only:!1,tv:{value:!1,set:s},loop:{value:!1,set:s},preload:{value:!1,set:s},report:{value:!0,set:s},preview:{value:!0,set:s},preview_src:{value:"",set:d},poster_object_fit:{set:d},nativeui:{value:!1,set:s},use_friendly_frame:{value:!0,set:s},branding_intro:{value:!1,set:s},restore_playback_progress:{value:!1,set:s},remote_progress_saving:{value:!1,set:s},progress:{value:!0,set:s},start_position_confirmation:{value:!1,set:s},force_unmute:{value:!0,set:s},stream_cms:{value:!0,set:s},beta:{value:!1,set:c},event_prefix:{value:"",set:d},from_block:{value:"other",set:d},hidden:{value:"",set:d},device_id:{value:"",set:d},primary_color:{set:d},secondary_color:{set:d},autoplay:{value:!0,set(e,t){0===e&&(this[t]=!1)}},lang:{value:"",set(e,t){var r;(r=e,-1!==M.indexOf(r))&&(this[t]=e)}},allow_muted:{set:s},mute:{value:!1,set:l},volume:{set(e,t){(0,S.hj)(e)&&e>=0&&e<=100&&(this[t]=e)}},play_on_visible:{set(e,t){(0,S.hj)(e)?e>0&&e<=1&&(this[t]={threshold:e}):(0,S.o8)(e)||"undefined"===e||(this[t]=Boolean(e))}},adConfig:{set(e,t){(0,S.Kn)(e)&&(this[t]=e)}},streams:{set(e,t){Array.isArray(e)&&(this[t]=e)}},vmap_id:{set:h},vmap_scenario_id:{set:h},meta:{value:void 0,set(e,t){if(!(0,S.HD)(e))return;const r=N[e];(0,S.hj)(r)&&(this[t]=r)}},subscribe_button:{value:void 0,set(e,t){if(!(0,S.HD)(e))return;const r=D[e];(0,S.hj)(r)&&(this[t]=e)}},m_duration:{value:3e3,set(e,t){(0,S.hj)(e)&&e>=0&&(this[t]=1e3*e)}},m_title:{value:null,set:d},m_desc:{value:null,set:d},live_offset:{set(e,t){(0,S.hj)(e)&&e>=0&&(this[t]=e)}},platform:{set(e,t){L.indexOf(e)>-1&&(this[t]=e)}},mod:{value:"",set:d},t:{set:u},skippable_fragments:{value:!0,set:s},preferable_width:{set:u},preferable_height:{set:u},preferable_audio:{value:[],set(e,t){this[t]="string"===typeof e?e.split(",").filter(e=>e.length>0):[]}},preferable_text:{value:[],set(e,t){this[t]="string"===typeof e?e.split(",").filter(e=>e.length>0):[]}},release_timeout:{value:0,set:u},retpath:{set:d},ya_station:{value:!0,set:s},share:{value:!0,set:s},has_preroll:{set:s},disable_update:{value:!1,set:s},velocity_metrics_sampled:{value:!0,set:s},test_mode:{value:!1,set:s},test_data:{value:"default",set(e,t){var r;(r=e,-1!==x.indexOf(r))&&(this[t]=e)}},object_fit:{set:d},background_color:{set:d},zen_preload:{set:s},disable_postmessage_broadcast:{value:!1,set:s},cache_sources_count:{set:h},scriptedEvents:{set:f},version:{set(e,t){/^1\.0-\d+$/.test(e)&&(this[t]=e)}}}}function m(e){var t;const r="http:"===location.protocol?"http://":"https://",n=null==(t=e.request_info)?void 0:t.player_version;return r+"yastatic.net"+(n?"/yandex-video-player-iframe-api-bundles/"+n+"/js/player-api-loader.js":"/yandex-video-player-iframe-api/js/player-api-loader.js")}function g(e,t){var r,n,i,a;const o={yandexuid:B.h,reqid:t.reqid,from:t.from,bundle:m(e),sandboxVersion:null==(r=e.request_info)?void 0:r.player_version,slots:(0,j.S)((null==(n=e.request_info)?void 0:n.slots)||"",t.slots||""),frontendVhReqid:e["apphost-reqid"]||(null==(i=e.user_data)?void 0:i.req_id),contentId:null!=(s=e.content)&&s.actual_episode?e.content.actual_episode.content_id:null==(l=e.content)?void 0:l.content_id,fromBlock:t.from_block,streamBlock:t.stream_block||(null==(a=e.content)?void 0:a.streamBlock)};var s,l,c;(!o.reqid&&(0,S.Kn)(t.counters)&&(o.reqid=t.counters.reqid),!o.reqid&&e.user_data)&&(o.reqid=null==(c=e.user_data)?void 0:c.req_id);return o.reqid||(o.reqid=""),o}function y(e,t){const r=parseFloat(e);r===r&&(this[t]=r)}function v(e,t){(0,S.o8)(e)||(this[t]=e)}function E(){return(E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}r.d(t,{y:()=>W});var _=r(4149),S=r(719);const R={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};class b{constructor(e){this.isWebpSupported=void 0,this.lastCheckTimestamp=void 0,this.isWebpSupported=e,this.lastCheckTimestamp=Date.now()}}var A;!function(e){e.Horizontal="HORIZONTAL",e.Vertical="VERTICAL"}(A||(A={}));const T=["get-vh"];var P=r(1321);const O="undefined"!==typeof window&&"http:"===location.protocol?"http:":"https:",I=["init","error","adStart","adEnd","start","play","pause","end","seek"],C=["rnd","fullscreen","mute","duration","timestamp","user_ts","watchedTime","vsid","error_code","position_from"];let w="",k="";const N={none:0,always:1,start:2,ui:3,restriction_age:4},D={plain:0,colourful:1,with_subscribe_info:2,with_subscribe_label:3},L=["desktop","touch","pad","app","tv","tvapp"],x=["default","live","paid","avod","alive"],M=["be","en","id","kk","ru","tr","tt","uk","uz"];let F=!1;const V=function(e,t){return function(r,n){if(!(0,S.mf)(n))throw new Error("VHQuery: missing method for handling unsafe params.");const i=new P.A(r,e(),n.bind(this));return t(i)}}((function(){return p()}),(function(e){return e.reqid&&(0,S.Kn)(e.counters)&&!e.counters.reqid&&(e.counters.reqid=e.reqid),(0,S.Kn)(e.counters)&&e.counters.reqid&&!e.reqid&&(e.reqid=e.counters.reqid),(e.tv||e.nativeui||e.test_mode)&&(e.recommendations=""),function(e){const t={};(0,S.HD)(e.slots)&&e.slots.split(";").forEach((function(e){const r=e.split(",",1)[0];r&&(t[r]=e)}));Array.isArray(e["test-id"])&&e["test-id"].forEach((function(e){e&&(t[e]||(t[e]=e+",0,-1"))}));let r="";const n=[];for(const i in t)t.hasOwnProperty(i)&&(r+=r.length>0?";"+t[i]:t[i],n.push(i));r&&(e.slots=r);n.length>0&&(e["test-id"]=n)}(e),e}));class U{static parse(){const e=U.getDefault();for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];const i=r.filter(Boolean).join(";"),a=P.A.parse(i,";",!0);return new P.A(a,e)}static getDefault(){return{"videoplayer-version":void 0,version:void 0,force_unmute:{value:void 0,set:s},restore_playback_progress:{value:void 0,set:s},use_friendly_frame:{value:void 0,set:s},progress:{value:void 0,set:s},start_position_confirmation:{value:void 0,set:s},hide_brand_play_button:{value:void 0,set:s},disable_autoplay_slow_connection:{value:!1,set:s},disable_autoplay_save_data:{value:!1,set:s},max_buffer_length:{value:void 0,set:u},bandwidth_estimate_offset:{value:void 0,set:u},soft_max_res_height:{value:void 0,set:u},poll_id:{value:void 0,set:d},poll_timeout:{value:21600,set:u},poll_show_before_midroll:{value:!1,set:s}}}}var j=r(3563),B=r(9026),Y=r(5745);class q{static create(e){var t,r,n;let{queryParams:i,vhParams:a,playerApi:o}=e;const s=V(i||{},()=>{});null!=(t=a.content)&&t.ottParams&&(0,S.hj)(null==(r=a.content)?void 0:r.restriction_age)&&(s.meta=N.restriction_age,s.m_duration=8,s.m_title=a.content.restriction_age+"+");const l=U.parse(null==(n=a.request_info)?void 0:n.flags,s.mb_flags);return function(e,t){e.version=e["videoplayer-version"]||t.version,e.progress=(0,S.jn)(e.progress)?e.progress:t.progress,e.start_position_confirmation=(0,S.jn)(e.start_position_confirmation)?e.start_position_confirmation:t.start_position_confirmation,e.force_unmute=(0,S.jn)(e.force_unmute)?e.force_unmute:t.force_unmute,e.restore_playback_progress=(0,S.jn)(e.restore_playback_progress)?e.restore_playback_progress:t.restore_playback_progress,e.hide_brand_play_button=(0,S.jn)(e.hide_brand_play_button)?e.hide_brand_play_button:t.hide_brand_play_button}(l,s),new q({query:s,expFlags:l,params:{data:a},player:o,ids:g(a,s)})}constructor(e){this.params=void 0,this.query=void 0,this.ids=void 0,this.expFlags=void 0,this.player=void 0,this.requestInfo=void 0,this.params=e.params,this.query=e.query,this.ids=e.ids,this.expFlags=e.expFlags,this.player=e.player,this.requestInfo=e.params.data.request_info||{}}async prepareVHParams(){const e=this.params.data.content||{},t=Object.create(e),r=e.actual_episode;if(r)for(const i in r)r.hasOwnProperty(i)&&(t[i]=r[i]);t.stream&&(t.withCredentials=Boolean(t.stream.withCredentials)),t.loop=Boolean(t.loop);const n=e.max_video_size;return t.meta&&(t.meta.announce_thumbnail=await i(t.meta.announce_thumbnail,n)),t.thumbnail=await i(t.thumbnail,n),t.onto_poster=await i(t.onto_poster,n),t.cover=await i(t.cover,n),t.first_frame_url=await i(t.first_frame_url,n),t}getHiddenControls(e){if(this.query.tv)return"*";let t=[];return(0,S.Kn)(null==e?void 0:e.auto_fields)&&null!=e&&e.auto_fields.player_controls_hidden&&(t=e.auto_fields.player_controls_hidden),[].concat(t,this.query.hidden.split(",")).join(",")}getLiveOffset(e){return(0,S.hj)(this.query.live_offset)?this.query.live_offset:null!=e&&e.ugc_live?15:void 0}getSkinConfig(e){const t=this.getFeatureParams(e),r=this.getHiddenControls(e),n=this.getLogoConfig(e),i=this.getTitleSettings(),a=this.getSubscribeButton();return{showReportButton:this.query.report,showUnmuteButtonForAll:this.expFlags.force_unmute,logoConfig:n,features:t,hiddenControls:r,showSubscribeButton:a,title:i,primaryColor:this.getColor(this.query.primary_color),secondaryColor:this.getColor(this.query.secondary_color)}}async getPlayerConfig(){const e=await this.prepareVHParams(),t=this.getSourceConfig(e),r=this.getAutoplay(),n=this.getLiveOffset(e),i={source:t,skinParams:{skinConfig:this.getSkinConfig(e)},autoplay:r,volume:this.query.volume,muted:this.query.mute,lang:this.query.lang||this.requestInfo.lang,preload:this.getPreload(),platform:this.query.platform,togglePlaybackOnVisibilityChange:this.query.play_on_visible,useAbdBundle:this.requestInfo.use_aab_bundle,useFriendlyFrame:this.query.use_friendly_frame,flags:this.expFlags,usePlayerApiMock:this.query.test_mode,liveOffset:n,slowConnection:this.requestInfo.slow_connection||this.query.slow_connection,maxBufferLength:this.expFlags.max_buffer_length,bandwidthEstimateOffset:this.expFlags.bandwidth_estimate_offset,logUrl:this.requestInfo.use_aab_bundle?this.requestInfo.logging_url:void 0,device:{id:this.query.device_id},objectFit:this.query.object_fit,backgroundColor:this.query.background_color,zenPreload:this.query.zen_preload,cacheSourcesCount:this.query.cache_sources_count,restoreTabSessionPlaybackProgress:this.expFlags.restore_playback_progress,loadSkin:this.query.skin};return this.params.disableOTTPlayerLoader&&(i.disableOTTPlayerLoader=!0),i}getSourceConfig(e){var t;this.preparePlaybackParams(e),this.prepareAdParams(e);const r=String(this.getStreamParams(e)),n=this.getAdConfig(e),i=this.getVideoInfo(e),a=this.getTrackings(e),o=this.getOTTParams(e),s=this.getStartPosition(e),l=this.getAdditionalParams(e),c=this.getPreview(e),d=this.getPosterStyle(),u={adConfig:n,videoInfo:i,trackings:a,preview:c,firstFrameHash:null==e?void 0:e.first_frame_hash,firstFrameUrl:null==e?void 0:e.first_frame_url,startPosition:s,enableRemoteProgressSaving:this.query.remote_progress_saving||this.expFlags.progress,withCredentials:this.query.with_credentials||(null==e?void 0:e.withCredentials),loop:(null==e?void 0:e.loop)||this.query.loop,additionalParams:l,preferredTracks:{preferredAudioLangs:this.query.preferable_audio,preferredTextLangs:this.query.preferable_text},context:o,passportRetpath:this.query.retpath},h=null==(t=this.getStreamsConfig(e))?void 0:t.map((function(e){return r&&(e.url+=e.url.indexOf("?")>-1?"&":"?",e.url+=r),e}));return h&&(u.streams=h),d&&(u.posterStyle=d),this.params.data.scriptedEvents&&(u.scriptedEvents=this.params.data.scriptedEvents),(0,S.HD)(l.slots)&&(0,S.Kn)(u.context)&&(u.context.testIds=l.slots.split(";").map(e=>parseInt(e,10)).join(",")),this.query.scriptedEvents&&(u.scriptedEvents=this.query.scriptedEvents,delete this.query.scriptedEvents),u}preparePlaybackParams(e){e&&(e.start_time=parseInt(e.start_time,10)||void 0,e.finish_time=parseInt(e.finish_time,10),e.finish_time=isNaN(e.finish_time)?void 0:e.finish_time-1,e.dvr=parseInt(e.dvr,10)||void 0)}prepareAdParams(e){e&&(e.imp_id=1,(0,S.Kn)(e.adConfig)&&!e.adConfig.category&&(e.adConfig.category=1017))}getStreamParams(e){const t={audio_only:this.query.audio_only,start:null==e?void 0:e.start_time,end:null==e?void 0:e.finish_time,dvr:null==e?void 0:e.dvr,soft_max_res_height:this.expFlags.soft_max_res_height};return new P.A(t,{audio_only:{set(e,t){e&&(this[t]=1)}},start:{set:v},end:{set:v},dvr:{set:v},soft_max_res_height:{set:y}})}getStreamsConfig(e){const t=Array.isArray(this.query.streams)?this.query.streams:null==e?void 0:e.streams;if(Array.isArray(t))return t.reduce((function(e,t){const r={};for(const i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);if(!r.url)return e;const n=r.id||"default";return e.defId||(e.defId=n),r.drmConfig=r.drmConfig||r.drm_config||void 0,delete r.id,delete r.options,delete r.drm_config,n===e.defId&&e.result.push(r),e}),{result:[],defId:""}).result}getAdConfig(e){if((0,S.Kn)(this.query.adConfig))return this.query.adConfig;const t=(0,S.Kn)(null==e?void 0:e.adConfig)?null==e?void 0:e.adConfig:{},r=t||{};if(t){r.partnerId=t.partner_id||t.partnerId,r.category=t.category,r.videoContentId=t.video_content_id||t.videoContentId,r.videoContentName=t.video_content_name||t.videoContentName,r.videoGenreId=t.video_genre_id,r.videoGenreName=t.video_genre_name,r.hasPreroll=(0,S.jn)(this.query.has_preroll)?this.query.has_preroll:t.hasPreroll,r.distrId=this.query.distr_id||t.distr_id,r.useAdSession=(0,S.jn)(this.query.use_ad_session)?this.query.use_ad_session:t.useAdSession;const e=parseInt(r.partnerId,10);e&&(r.partnerId=e);const n=parseInt(r.category,10);n&&(r.category=n),t.video_publisher_id&&(r.videoPublisherId=t.video_publisher_id),t.video_publisher_name&&(r.videoPublisherName=t.video_publisher_name)}return this.query.vmap_id&&(r.vmapId=this.query.vmap_id),this.query.vmap_scenario_id&&(r.vmapScenarioId=this.query.vmap_scenario_id),(0,S.hj)(this.query.preferable_width)&&(0,S.hj)(this.query.preferable_height)&&(r.preferableAdSize={width:this.query.preferable_width,height:this.query.preferable_height}),r}getVideoInfo(e){const t=(0,S.Kn)(null==e?void 0:e.adConfig)?null==e?void 0:e.adConfig:{},r={videoContentId:null==e?void 0:e.content_id,videoContentName:null==e?void 0:e.title,videoContentDescription:null==e?void 0:e.description,videoPublisherId:(null==t?void 0:t.video_publisher_id)||"",videoPublisherName:(null==t?void 0:t.video_publisher_name)||""};return r.videoGenreId=String((null==t?void 0:t.video_genre_id)||""),r.videoGenreName=String((null==e?void 0:e.genres)||(null==t?void 0:t.video_genre_name)||""),Object.keys(r).reduce((function(e,t){const n=r[t];return n&&(e[t]=n),e}),{})}getTrackings(e){if("zen"===this.ids.from)return{trackingEvents:[]};let t=[];(0,S.Kn)(null==e?void 0:e.trackingEvents)&&(t=t.concat(e.trackingEvents)),(0,S.Kn)(null==e?void 0:e.stream)&&(0,S.Kn)(null==e?void 0:e.stream.trackings)&&(0,S.Kn)(null==e?void 0:e.stream.trackings.trackingEvents)&&(t=t.concat(e.stream.trackings.trackingEvents));const r=this.getYaVideoTrackings(e);return r&&(t=t.concat(r).filter(Boolean)),{trackingEvents:t}}getSubscribeButton(){return{type:this.query.subscribe_button}}getColor(e){return e&&(0,S.HD)(e)&&CSS.supports("color","#"+e)?"#"+e:e}getPreview(e){const t=(()=>this.query.preview_src?String(this.query.preview_src):this.query.preview&&!this.query.streams?null==e?void 0:e.thumbnail:void 0)();return(0,S.HD)(t)?encodeURI(t):void 0}getPosterStyle(){let e;return this.query.poster_object_fit&&(e={objectFit:String(this.query.poster_object_fit)}),e}getFeatureParams(e){const t={};return Array.isArray(null==e?void 0:e.skippableFragments)&&null!=e&&e.skippableFragments.length&&this.query.skippable_fragments&&(t.SkippableFragments={skippableFragments:e.skippableFragments,autoSkipTimeout:5,buttonTitles:e.skippableFragmentsButtonTitles||{},controlsShowDuration:5}),t}getLogoConfig(e){return null!=e&&e.logoConfig?e.logoConfig:(0,S.Kn)(null==e?void 0:e.watermark)&&(0,S.HD)(null==e?void 0:e.watermark.src)?null==e?void 0:e.watermark:void 0}getTitleSettings(){if(void 0===this.query.meta)return;if(this.query.meta===N.none)return null;const e={name:this.query.m_title,description:this.query.m_desc};switch(this.query.meta){case N.always:e.isVisible=!0;break;case N.start:e.isVisible=!0,e.duration=this.query.m_duration;break;case N.restriction_age:e.isVisible=!0,e.visibleOnPlay=!0,e.duration=this.query.m_duration;break;case N.ui:e.isVisible=!0,e.visibleWithSkinOnly=!0}return e}getOTTParams(e){const t=null==e?void 0:e.ottParams;return(0,S.Kn)(t)?(t.from=this.query.from,t.contentTypeID&&!t.contentTypeId&&(t.contentTypeId=t.contentTypeID),"cover"in(e||{})&&(t.cover=null==e?void 0:e.cover,t.thumbnailLogos=null==e?void 0:e.thumbnail_logos),t.container={context:this.query.platform||"",init:this.createOttEventTrigger.call(this,"placeholder:init"),mod:this.query.mod,paymentWidget:this.createOttEventTrigger.call(this,"placeholder:pay")},t):null}createOttEventTrigger(e){return t=>{var r;t.event===e&&(null==(r=this.player)||r.publicEmit("OTT/"+e,t))}}getStartPosition(e){return(0,S.hj)(this.query.t)?this.query.t:(0,S.hj)(null==e?void 0:e.progress)&&(0,S.hj)(null==e?void 0:e.duration)&&e.progress/e.duration>.95?0:this.expFlags.progress&&(0,S.hj)(null==e?void 0:e.progress)?null==e?void 0:e.progress:void 0}getYaVideoTrackings(e){if(!(0,S.Kn)(e))return null;const t={from:this.ids.from,from_block:this.ids.fromBlock,reqid:this.ids.reqid,yandexuid:this.ids.yandexuid,content_id:this.ids.contentId,channel_id:e.channel_id,stream_block:this.ids.streamBlock,duration:e.duration};return(0,S.Kn)(e.ottParams)&&(t.licence=e.ottParams.monetizationModel,t.svod=e.ottParams.subscriptionType),function(e){const t={};var r;return t.heartbeat=[[o("heartbeat",e),{delay:3e4}],[o("deep_watch",e),{delay:1e3*(r=e.duration,r<=180?.57*r:r<=1200?72+.17*r:r<=3600?252+.02*r:216+.03*r),callsCount:1}]],I.forEach((function(r){t[r]=[o(r,e)]})),t}(t)}getAdditionalParams(e){const t=(0,S.Kn)(null==e?void 0:e.additionalParams)?e.additionalParams:{};if(this.ids.frontendVhReqid&&(t.frontend_vh_reqid=this.ids.frontendVhReqid),this.ids.reqid&&(t.reqid=this.ids.reqid),(null!=e&&e.puid||this.query.puid)&&(t.puid=(null==e?void 0:e.puid)||this.query.puid),null!=e&&e.content_id&&(t.content_id=e.content_id),null!=e&&e.folder_id&&(t.folder_id=e.folder_id),this.ids.from&&(t.from=this.ids.from),this.ids.fromBlock&&(t.from_block=this.ids.fromBlock),this.ids.slots&&(t.slots=this.ids.slots),this.ids.streamBlock&&(t.stream_block=this.ids.streamBlock),null!=e&&e.channel_id&&(t.channel_id=e.channel_id),!Array.isArray(this.query["brand-safety-categories"])||(0,S.Kn)(null==e?void 0:e.adTags)&&null!=e&&e.adTags["brand-safety-categories"]||(t["brand-safety-categories"]=this.prepareCategory("brand-safety-categories")),(0,S.Kn)(null==e?void 0:e.adTags))for(const r in null==e?void 0:e.adTags)null!=e&&e.adTags.hasOwnProperty(r)&&(t[r]=this.prepareCategory(r,e.adTags[r]));return t.sandboxVersion=this.ids.sandboxVersion,t}prepareCategory(e,t){const r=this.query[e];let n=[];if(Array.isArray(t)&&Array.isArray(r))n=t.concat(r);else if(Array.isArray(t))n=t;else{if(!Array.isArray(r))return null;n=r}return"brand-safety-categories"===e?"["+n.join(",")+"]":n.join("\n")}getAutoplay(){if((0,Y.z)())return!1;const e=navigator&&navigator.connection&&navigator.connection.saveData,t=this.requestInfo.slow_connection||this.query.slow_connection;return!(this.expFlags.disable_autoplay_slow_connection&&this.expFlags.disable_autoplay_save_data&&t&&e)&&(!(this.expFlags.disable_autoplay_slow_connection&&!this.expFlags.disable_autoplay_save_data&&t)&&(!(!this.expFlags.disable_autoplay_slow_connection&&this.expFlags.disable_autoplay_save_data&&e)&&((0,S.jn)(this.query.allow_muted)?{allowMuted:this.query.allow_muted}:Boolean(this.query.autoplay))))}getPreload(){return!(0,Y.z)()&&this.query.preload}}class W{constructor(e,t){this.params=e,this.playerApi=t}async getSourceConfig(e){const{source:t}=await this.createInternalVhConfig(e).getPlayerConfig();return E({},t,{update:async()=>{var t;const{sourceConfig:r}=await(0,_.s6)(null==(t=e.content)?void 0:t.content_id,this.params);return E({},r,{startPosition:void 0})}})}async getPlayerConfig(e){return E({},await this.createInternalVhConfig(e).getPlayerConfig(),{source:await this.getSourceConfig(e)})}getIframeParams(){var e,t;return{eventPrefix:null!=(e=this.params)&&e.event_prefix?String(null==(t=this.params)?void 0:t.event_prefix):void 0}}createInternalVhConfig(e){return q.create({vhParams:e,queryParams:this.params,playerApi:this.playerApi})}}},8484:(e,t,r)=>{"use strict";function n(e){return e?R.A.parse((0,S.en)(e).search):{}}function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function o(e,t,r,o,u){const h=(0,l.K)(),{setReadyInstance:S,setSource:R}=h,P=a(h,b);let O,I,C=!1,w=!1;const k=(()=>{const a=(0,v.K)(r)?r:(0,y.H)(r)?n(r):{};return(0,_.r)(i({},(0,v.K)(t)?n(location.href):{},a),e)})(),N=async()=>{if("1"===String(k.test_mode))return async function(e){const t=["alive","avod","live","paid"].includes(e)?e:"default";return(await(0,m.W)({method:"GET",url:"https://playerweb-stands.s3.yandex.net/mediabox-test-presets/"+t+".json",responseType:"json",withCredentials:!1,retries:2})).response}(String(k.test_data));if((0,y.H)(t)){const e=t;return(await(0,p.s6)(e,k)).vhParams}return t.data};let D,L;const x=async()=>{if(L)return L;D=D||await N();const t=new s.y(k,P),r=await t.getPlayerConfig(D),n=r.source,{trackings:l}=n,d=a(n,A);return L=i({},r,{source:i({},d,{trackings:null!=u&&u.disableVhTrackings?void 0:l,queryParams:k}),element:e,vhParams:D}),o&&(L.envName=o),(0,c.Vc)(L),L};let M=new g.B;const F=async e=>{const{disableOTTPlayerLoader:r}=(0,v.K)(t)?t:{disableOTTPlayerLoader:!1},n=r?{api:window.Ya.playerApi.create(e),withWrapper:!1,withTrackings:!1}:await async function(e){try{const t=await Ya.OTT.PlayerLoader.init(e);return(0,d.m)(t),t}catch(t){}return{api:window.Ya.playerApi.create(e),withWrapper:!1,withTrackings:!1}}(e);if((0,d.m)(n))return I=new f(n),S(I),void M.resolve();C=n.withWrapper,w=n.withTrackings,O=n.api,S(O),M.resolve()};x().then(async e=>{await F(e)}).catch(()=>{M.resolve()});const V=i({},P,{setSource:async(t,r)=>{var o,l;await M.promise;const c=(0,v.K)(r)?r:(0,y.H)(r)?n(r):{},d=(0,_.r)(c,e),h=await(async()=>{if((0,y.H)(t))return{contentId:t,queryParams:d};const e=new s.y(d,P),r=await e.getSourceConfig(t.data),{trackings:n}=r;return i({},a(r,T),{trackings:null!=u&&u.disableVhTrackings?void 0:n,queryParams:d})})();if(O)return R(h);const f=(null==(o=I)?void 0:o.getAllHandlers())||{};await(null==(l=I)?void 0:l.destroy()),I=void 0,M=new g.B,await F(i({},await x(),{source:h}));const p=I||O;void 0!==p&&(0,E.M)(f,(e,t)=>{e&&e.forEach(e=>{let{once:r,fn:n}=e;p[r?"once":"on"](t,n)})})}});return Object.defineProperty(V,"skin",{get:()=>{var e;return null==(e=O)?void 0:e.skin}}),Object.defineProperty(V,"withOttWrapper",{get:()=>C}),Object.defineProperty(V,"withOttTrackings",{get:()=>w}),V}r.d(t,{H:()=>o});var s=r(7542),l=r(4841),c=r(2178),d=r(5605),u=r(6094),h=r(9320);class f extends h.h{constructor(e){super(void 0),this.ottPlaceholder=e,this.skin=void 0}publicEmit(e,t){if(e.indexOf("/")>-1)return this.emit(e,t);const r=new Error("Event "+e+" is invalid. Namespace is required: NAMESPACE/"+e);setTimeout(()=>{throw r},0)}getState(){}getReadyState(){return u.k.init}destroy(){return this.ottPlaceholder.innerHTML="",Promise.resolve()}setVideoTrack(){}setAudioTrack(){}setTextTrack(){}changeAdditionalParams(){}sendReportLog(){return Promise.reject()}setSource(){return Promise.reject()}preloadSource(){return Promise.reject()}requestVideoElementFullscreen(){return Promise.reject()}exitVideoElementFullscreen(){}setPlaybackRate(){}setMuted(){}setVolume(){}setPictureInPictureAllowed(){}setVideoStyle(){}setNativeControlsVisibility(){}setNativeTextTrackVisibility(){}setNativeAdControlsVisibility(){}setDebugPanelVisibility(){}requestDebugInfo(){return Promise.reject()}requestExternalPlay(){return Promise.reject()}requestExternalPlayerList(){return Promise.reject()}play(){return Promise.reject()}pause(){}seek(){}openReportWindow(){}playInrollAd(){}skipAdPod(){}logEvent(){}logEventInternal(){}logError(){}insertInto(){return Promise.reject()}playAdViewers(){return Promise.reject()}}var p=r(4149),m=r(7668),g=r(5636),y=r(9899),v=r(5689),E=r(7974),_=r(8875),S=r(504),R=r(1321);r(5207);const b=["setReadyInstance","setInstance","setSource"],A=["trackings"],T=["trackings"]},8875:(e,t,r)=>{"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(e&&"adsdk-container-width"in e&&"adsdk-container-height"in e)return e;const r=t.getBoundingClientRect();return n({},e,{"adsdk-container-width":r.width,"adsdk-container-height":r.height})}r.d(t,{r:()=>i})},1321:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(719);class i{static parse(e,t,r){const a={};if(!e||!(0,n.HD)(e))return a;let o=e;"?"!==o[0]&&"#"!==o[0]||(o=o.slice(1));const s=o.split(t||"&");for(let n=0;n<s.length;n++){const e=s[n].indexOf("=");if(-1===e){r&&(a[decodeURIComponent(s[n])]=!0);continue}a[decodeURIComponent(s[n].slice(0,e))]=i.parseJSON(decodeURIComponent(s[n].slice(e+1)))}return a}static parseJSON(e){try{return JSON.parse(e)}catch(t){return e}}constructor(e,t,r){const a={},o={};if((0,n.Kn)(t))for(const i in t){if(!t.hasOwnProperty(i))continue;const e=t[i];(0,n.Kn)(e)?((0,n.o8)(e.value)||(this[i]=e.value),(0,n.mf)(e.set)&&(a[i]=e.set),e.unsafe&&(o[i]=!0)):(0,n.o8)(e)||(this[i]=e)}let s;if(e){const t=(0,n.Kn)(e)?e:i.parse(e);for(const e in t){if(!t.hasOwnProperty(e))continue;const r=this[e],i=a[e];a.hasOwnProperty(e)&&(0,n.mf)(i)?i.call(this,t[e],e):this[e]=t[e],this[e]!==r&&o[e]&&(s=s||{},s[e]=this[e])}}s&&(0,n.mf)(r)&&r(s,this)}toString(e,t,r){void 0===e&&(e="&"),void 0===t&&(t=!1),void 0===r&&(r=[]);const i=encodeURIComponent,a=this;let o,s=Object.keys(this).filter((function(e){return!(0,n.o8)(a[e])&&!(0,n.mf)(a[e])})).map((function(e){return o=a[e],(0,n.Kn)(o)&&(o=JSON.stringify(o)),r.indexOf(e)>-1?e+"="+o:i(e)+"="+i(o)})).join(e);return t&&(s+=e),s}appendTo(e){const t=this.toString();return t?(e+=e.indexOf("?")>-1?"&":"?",e+=t):e}}},719:(e,t,r)=>{"use strict";function n(e){return"undefined"===typeof e}function i(e){return"boolean"===typeof e}function a(e){return"number"===typeof e&&e===e}function o(e){return"string"===typeof e}function s(e){return"function"===typeof e}function l(e){return Boolean(e)&&"object"===typeof e}r.d(t,{HD:()=>o,Kn:()=>l,hj:()=>a,jn:()=>i,mf:()=>s,o8:()=>n})},9525:(e,t,r)=>{"use strict";function n(){return"object"===typeof self?self:window}r.d(t,{I:()=>n})},3354:(e,t,r)=>{"use strict";r.d(t,{M:()=>o});const n=!(0,r(2839).t)(Math.random)||Math.random()===Math.random();var i=r(3451);let a=(0,i.m6)()*(0,i.no)()%2147483647;const o=n?function(){return a=16807*a%2147483647,(a-1)/2147483646}:function(){return Math.random()}},9396:(e,t,r)=>{"use strict";r.d(t,{t:()=>i});var n=r(2741);const i={getItem(e){try{return n.ZP.getItem(e)}catch(t){return null}},setItem(e,t){try{n.ZP.setItem(e,t)}catch(r){}},removeItem(e){try{n.ZP.removeItem(e)}catch(t){}},clear(){try{n.ZP.clear()}catch(e){}}}},3451:(e,t,r)=>{"use strict";function n(e){return"function"===typeof e||"Function"===(e=>{const t=i.call(e);if(!t)return null;const r=t.match(a);if(!r)return null;const n=r[1];if(!n)return null;return n})(e)}r.d(t,{m6:()=>o,e0:()=>d,no:()=>h});const i={}.toString,a=/\[object (\w+)\]/,o=Date&&n(Date.now)?()=>Date.now():()=>(new Date).getTime(),s="undefined"===typeof window?void 0:window.performance,l=s&&n(s.now),c=s&&s.timing&&s.timing.navigationStart,d=s&&s.timeOrigin?s.timeOrigin:c?s.timing.navigationStart:o();let u=0;const h=l?()=>s.now():()=>(()=>{const e=o()-d;return u=Math.max(e,u),u})()},2839:(e,t,r)=>{"use strict";function n(e,t){if(void 0===t&&(t=!1),!e)return!1;const r=t?Function.prototype.toString.call(e):e.toString?e.toString():"";return/\[native code\]/.test(r)||/\/\* source code not available \*\//.test(r)}r.d(t,{t:()=>n})},5745:(e,t,r)=>{"use strict";r.d(t,{z:()=>a});const n=(0,r(1247).i)(),i=new RegExp("("+["Googlebot","YandexBot","AhrefsBot","spider","Bot","HeadlessChrome"].join("|")+")"),a=function(e){return void 0===e&&(e=n),i.test(e)}},1247:(e,t,r)=>{"use strict";function n(e){void 0===e&&(e=window);try{return(e.navigator||{}).userAgent||""}catch(t){return""}}r.d(t,{i:()=>n})},2988:(e,t,r)=>{"use strict";r.d(t,{N:()=>i});const n=r(6386),i=function(e){void 0===e&&(e=window);const t=n(e);return"boolean"===typeof t?-1:t}},8907:(e,t,r)=>{"use strict";function n(e){return void 0===e&&(e=window),/Apple/.test(e.navigator.vendor)&&(0,i.b)(e)}r.d(t,{B:()=>n});var i=r(5940)},3628:(e,t,r)=>{"use strict";function n(e){void 0===e&&(e=window);const t=e.navigator.userAgent.toLowerCase();return/ipad|iphone|ipod/.test(t)&&!e.MSStream&&!(0,i.f)(e)}r.d(t,{P:()=>n});var i=r(8459)},1585:(e,t,r)=>{"use strict";r.d(t,{B:()=>i});var n=r(1247);const i=function(e){void 0===e&&(e=window);const t=(0,n.i)(e).toLowerCase();if(t.indexOf("android")>-1)return!1;const r=t.replace(/\(.+?\)/gi,"").split(" ").map(e=>e.trim().split("/")[0]).filter(e=>e&&"mobile"!==e);return 4===r.length&&"mozilla"===r[0]&&"applewebkit"===r[1]&&"version"===r[2]&&"safari"===r[3]}},7330:(e,t,r)=>{"use strict";function n(e){return void 0===e&&(e=window),(0,o.B)(e)||(0,a.P)(e)||(0,i.B)(e)}r.d(t,{z:()=>n});var i=r(8907),a=r(3628),o=r(1585)},8344:(e,t,r)=>{"use strict";r.d(t,{$:()=>n});const n=(0,r(7330).z)()},5940:(e,t,r)=>{"use strict";function n(e){return function(e){return Boolean(e.PointerEvent)}(e)&&function(e){const t=e.navigator||{},{msMaxTouchPoints:r,maxTouchPoints:n}=t;return r||n||0}(e)>0&&!function(e){void 0===e&&(e=window);return(0,o.N)(e)>11}(e)}function i(e,t){if(!(0,l.m)(e.matchMedia))return!1;const r=e.matchMedia(t);return(0,c.K)(r)&&Boolean(r.matches)}function a(e){return void 0===e&&(e=window),n(e)||function(e){return i(e,d)}(e)||function(e){return i(e,u)}(e)||function(e){const{DocumentTouch:t}=e;return Boolean(t)&&e.document instanceof t}(e)||function(e){return"ontouchstart"in e}(e)}r.d(t,{b:()=>a});var o=r(2988);const s=["","-webkit-","-ms-","-moz-","-o-"];var l=r(4754),c=r(5689);const d=s.map(e=>"("+e+"any-pointer:coarse)").join(","),u=s.map(e=>"("+e+"touch-enabled)").join(",")},8459:(e,t,r)=>{"use strict";r.d(t,{f:()=>n});const n=function(e){return void 0===e&&(e=window),e.navigator.userAgent.indexOf("UCBrowser")>-1}},6094:(e,t,r)=>{"use strict";let n;r.d(t,{k:()=>n}),function(e){e.init="init",e.ready="ready",e.broken="broken",e.destroyed="destroyed"}(n||(n={}))},706:(e,t,r)=>{"use strict";let n;r.d(t,{l:()=>n}),function(e){e.Unknown="Unknown",e.ExternalApi="ExternalApi",e.VisiblePlayback="VisiblePlayback",e.PlayRejected="PlayRejected",e.RestoreAfterInsertInto="RestoreAfterInsertInto",e.WaitForSourceConfigUpdate="WaitForSourceConfigUpdate",e.CompletedRecoverSourceConfig="CompletedRecoverSourceConfig",e.StartPlayingAnotherPlayer="StartPlayingAnotherPlayer"}(n||(n={}))},7746:(e,t,r)=>{"use strict";let n;r.d(t,{X:()=>n}),function(e){e.PLAY="play",e.PAUSE="pause",e.BUFFERING="buffering",e.END="end"}(n||(n={}))},2022:(e,t,r)=>{"use strict";function n(e){return Math.floor(e/30)}function i(e){void 0===e&&(e=window);const{navigator:t}=e,{connection:r={}}=t;return Boolean(r.saveData)}function a(e){if(void 0===e&&(e=window),!e.navigator)return T;const{connection:t={}}=e.navigator;return"number"===typeof(r=t.rtt)&&isFinite(r)?t.rtt:T;var r}function o(e,t){return e?"fullscreen":t?"pip":"default"}function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e){void 0===e&&(e=S.no);const t=e();return()=>Math.max(0,e()-t)}function c(e,t){return{reason:e,details:t,getElapsedTime:l()}}function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t,r){void 0===r&&(r=" ");const n=t-e.length;if(n>0){let t=r;for(;t.length<n;)t+=t;return(t.length>n?t.substr(0,n):t)+e}return e}function h(e){return u(String(e%Math.pow(10,4)),4,"0")}function f(e,t){if(3!==t.length)throw new Error("playerType should contains exact 3 symbols");return[(0,J.a)(44),t,h(e),u(Date.now().toString().slice(0,10),10,"0")].join("x")}function p(){return(p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let m,g;r.d(t,{M0:()=>ee,lY:()=>f}),function(e){e.Start="Start",e.Watched4Sec="4SecWatched",e.Watched10Sec="10SecWatched",e.Watched20Sec="20SecWatched",e.Heartbeat30Sec="30SecHeartbeat",e.End="End"}(m||(m={})),function(e){e.PLAY="play",e.PAUSE="pause",e.BUFFERING="buffering",e.END="end"}(g||(g={}));r(7881);class y{constructor(e){this.params=e,this.previousWatchedTime=0}onWatchedTimeChange(e){const{previousWatchedTime:t}=this;t!==e&&(!function(e,t){return 0===e&&t>0}(t,e)?!function(e,t){return e<4&&t>=4}(t,e)?!function(e,t){return e<10&&t>=10}(t,e)?!function(e,t){return e<20&&t>=20}(t,e)?function(e,t){return n(e)<n(t)}(t,e)&&this.params.onEvent(m.Heartbeat30Sec):this.params.onEvent(m.Watched20Sec):this.params.onEvent(m.Watched10Sec):this.params.onEvent(m.Watched4Sec):this.params.onEvent(m.Start),this.previousWatchedTime=e)}onPlayingStateChange(e){e===g.END&&this.params.onEvent(m.End)}}class v{constructor(){this.lastSourceIndexWithFatal=null}extractSourceIndex(e){const t=e.split("?")[1];if(t){const e=t.split("&");for(const t of e){const[e,r]=t.split("=");if("source_index"===e)return r?Number(r):null}}return null}checkIsFatal(e,t){if(!e||!t)return e;const r=this.extractSourceIndex(t);return null===r?e:(null===this.lastSourceIndexWithFatal||r>this.lastSourceIndexWithFatal)&&(this.lastSourceIndexWithFatal=r,!0)}}var E=r(6048),_=r.n(E);var S=r(3451);class R{constructor(e,t){this.onTick=e,this.onFlush=t,this.wasFirstFlush=!1,this.isDestroyed=!1,this.lastFlushTime=void 0,this.startTime=void 0,this.timer=void 0,this.handleTimeout=()=>{this.onTick(),this.handleFlush(),this.nextTick()},this.startTime=this.lastFlushTime=(0,S.no)(),this.timer=window.setTimeout(()=>{this.onTick(),this.nextTick()},0)}next(){this.isDestroyed||(window.clearTimeout(this.timer),this.handleFlush(),this.nextTick())}destroy(){window.clearTimeout(this.timer),this.isDestroyed=!0}nextTick(){this.isDestroyed||(window.clearTimeout(this.timer),this.timer=window.setTimeout(this.handleTimeout,this.getTimeout()))}handleFlush(){this.needFlush()&&(this.onFlush(),this.lastFlushTime=this.wasFirstFlush?(0,S.no)():this.startTime,this.wasFirstFlush=!0)}needFlush(){const e=(0,S.no)();return this.wasFirstFlush?e-this.lastFlushTime>=3e4:e-this.startTime>=1e4}getTimeout(){return(0,S.no)()-this.startTime<1e4?1e3:5e3}}const b=Math.max(Math.abs(0),0),A={remainingBufferedTime:Math.max(Math.abs(0),0),state:g.BUFFERING,currentTime:b,watchedTime:Math.max(Math.abs(0),0),duration:Math.max(0,0)},T=NaN;let P,O;!function(e){e[e.PLAYING=1]="PLAYING",e[e.NOT_PLAYING=2]="NOT_PLAYING"}(P||(P={})),function(e){e.preroll="preroll",e.midroll="midroll",e.postPauseroll="postPauseroll",e.postroll="postroll",e.inroll="inroll"}(O||(O={}));var I=r(3487);class C{constructor(e){this.props=e,this.prevState=void 0,this.states=[],this.timer=void 0,this.destroyHandlers=[],this.writeStateManually=function(e,t,r,n){function i(){null!==a&&clearTimeout(a),a=null}3===arguments.length&&"boolean"!==typeof r&&(n=r,r=!1);let a=null,o=I.Z;const s=function(){const s=arguments;n=n||this,o=()=>{i(),o=I.Z,e.apply(n,s)},r&&null===a&&e.apply(n,s),i(),a=window.setTimeout((function(){r||e.apply(n,s),a=null}),t)};return s.cancel=i,s.now=()=>{o()},s}(()=>{this.writeState(),this.timer.next()},0),this.timer=new R(()=>this.writeState(),()=>this.flushStates())}addDestroyHandler(e){this.destroyHandlers.push(e)}destroy(){this.timer.destroy(),this.flushStates(),this.destroyHandlers.forEach(e=>{e()}),this.destroyHandlers=[]}getStates(){return[...this.states]}flushStates(){this.writeStateManually.now();const e=this.getStates();e.length>0&&this.props.onFlushStates(e),this.states.length=0}writeState(){const e=this.getPlayerAliveState();_()(this.prevState,e)||(this.prevState=e,this.states.push(s({},e,{timestamp:this.props.getTimestamp()})))}getPlayerAliveState(){var e,t;const r=s({},A,{saveData:i(),rtt:a()},this.props.stalledController.getStalledHistory()),n=this.props.getState();if(!n)return s({},r);const{currentTime:l,duration:c,muted:d,playingState:u,remainingBufferedTime:h,adState:f,liveLatency:p,videoTracks:m,audioTrack:g,videoSize:y,isVisible:v,capHeight:E,capWidth:_,containerHeight:S,containerWidth:R,bandwidthEstimate:b,bandwidthSource:T,droppedFrames:O,shownFrames:I,isFullscreen:C,isPictureInPicture:w,volume:k,playbackRate:N}=n,D=m.find(e=>e.selected),L=[...m].sort((e,t)=>t.bitrate-e.bitrate),x=(null==f?void 0:f.state)===P.PLAYING,M=!x,F=this.props.getWatchedTime();return s({},r,{watchedTime:Math.max(0,F),currentTime:isNaN(l)?0:Math.max(0,l),duration:isNaN(c)?0:Math.max(0,c),isMuted:d,state:u,remainingBufferedTime:(null==h?void 0:h.total)||0,remainingAudioBufferedTime:void 0===(null==h?void 0:h.audio)?void 0:Math.max(0,h.audio),remainingVideoBufferedTime:void 0===(null==h?void 0:h.video)?void 0:Math.max(0,h.video),ad:x?null==f?void 0:f.type:void 0,liveLatency:void 0===p?void 0:Math.max(0,p),stalledReason:this.props.stalledController.getCurrentStalledReason(),auto:void 0===(null==D?void 0:D.auto)?void 0:D.auto,isVisible:v,bitrate:null!=D&&D.bitrate?Math.max(0,Math.floor(1e3*D.bitrate)):void 0,width:void 0===(null==y?void 0:y.videoWidth)||isNaN(null==y?void 0:y.videoWidth)?void 0:Math.max(0,Math.floor(null==y?void 0:y.videoWidth)),height:void 0===(null==y?void 0:y.videoHeight)||isNaN(null==y?void 0:y.videoHeight)?void 0:Math.max(0,Math.floor(null==y?void 0:y.videoHeight)),maxWidth:M&&null!=(e=L[0])&&e.width?Math.max(0,Math.floor(L[0].width)):void 0,maxHeight:M&&null!=(t=L[0])&&t.height?Math.max(0,Math.floor(L[0].height)):void 0,audioTrack:(null==g?void 0:g.value)||void 0,audioLang:(null==g?void 0:g.lang)||void 0,audioBitrate:null!=g&&g.bitrate?Math.max(0,Math.floor(1e3*g.bitrate)):void 0,capHeight:M&&E?Math.max(0,Math.floor(E)):void 0,capWidth:M&&_?Math.max(0,Math.floor(_)):void 0,containerHeight:void 0!==S?Math.max(0,Math.floor(S)):void 0,containerWidth:void 0!==R?Math.max(0,Math.floor(R)):void 0,bandwidthEstimate:void 0===b||isNaN(b)?void 0:Math.max(0,Math.round(b)),bandwidthSource:T||void 0,droppedFrames:void 0===O?void 0:Math.max(0,Math.floor(O)),shownFrames:void 0===I?void 0:Math.max(0,Math.floor(I)),viewport:o(C,w),volume:k,playbackRate:N})}}var w=r(1662);const k=[0,1,4,5];let N=0;const D=k.map(e=>(N=e+N,N)),L=1e3*D[D.length-1],x=[w.k.Init];var M=r(3807);class F{constructor(e){let{getState:t,logEvent:r}=e;this.isBuffering=!1,this.timer=void 0,this.stalledId=1,this.preloadDetails=void 0,this.stalledDurationRemainder=0,this.getState=void 0,this.logEvent=void 0,this.expectedStalled=c(w.k.Init,{}),this.currentStalled=void 0,this.stalledTime=0,this.stalledCount=0,this.getState=t,this.logEvent=r}setBuffering(e,t){var r;if(void 0===t&&(t=0),e!==this.isBuffering)if(this.isBuffering=e,this.isBuffering){const e=[],r=k.filter((r,n)=>{const i=this.currentStalled?this.currentStalled.expectedStalled:this.getExpectedStalled(),a=D[n];if(t/1e3>a){const e=this.currentStalled?this.currentStalled.id:this.stalledId++;return this.currentStalled||this.stalledCount++,this.currentStalled={id:e,expectedStalled:i,duration:a,getElapsedTime:l()},this.send(!1,i,a,e),!1}return e.push(a),!0});this.currentStalled&&(this.stalledDurationRemainder=t/1e3-this.currentStalled.duration),r.length&&(r[0]=r[0]-this.stalledDurationRemainder),this.timer=new M.B7(t=>{let{count:n}=t;const i=this.currentStalled?this.currentStalled.expectedStalled:this.getExpectedStalled();if(n>0){const t=e[n-1],r=this.currentStalled?this.currentStalled.id:this.stalledId++;this.currentStalled||this.stalledCount++,this.currentStalled={id:r,expectedStalled:i,duration:t,getElapsedTime:l()},this.send(!1,i,t,r)}return n>=r.length?(this.destroyTimer(),1/0):1e3*r[n]}),this.timer.start()}else{if(this.currentStalled){var n,i;const{expectedStalled:e,id:t}=this.currentStalled,a=(void 0===(r=this.currentStalled)?0:r.duration+r.getElapsedTime()/1e3)+this.stalledDurationRemainder;this.send(!0,e,a,t),this.currentStalled=void 0,this.stalledDurationRemainder=0,this.stalledTime=a+this.stalledTime;const o=(null==(n=this.getState())||null==(i=n.adState)?void 0:i.state)===P.PLAYING?w.k.AdOther:w.k.Other;this.setExpectedStalled(c(o,void 0))}this.destroyTimer()}}setPreloadDetails(e){this.preloadDetails=e}getStalledHistory(){const{stalledCount:e,stalledTime:t}=this;return{stalledCount:Math.max(Math.floor(e)),stalledTime:Math.max(t,0)}}clearStalledHistory(){this.stalledCount=0,this.stalledTime=0}destroy(){this.destroyTimer()}getCurrentStalledReason(){var e;return null==(e=this.currentStalled)?void 0:e.expectedStalled.reason}setExpectedStalled(e){this.expectedStalled=e}isExpiredStalled(e){const{getElapsedTime:t,reason:r}=e;return!(x.indexOf(r)>-1)&&((!this.currentStalled||this.currentStalled.expectedStalled!==e)&&t()>=L)}getExpectedStalled(){const e=this.expectedStalled;return this.isExpiredStalled(e)?c(w.k.Other,void 0):e}destroyTimer(){this.timer&&(this.timer.destroy(),this.timer=void 0)}send(e,t,r,n){const{reason:i,details:a}=t,o=i===w.k.SetSource?this.preloadDetails:void 0,s={id:n,isStalledEnd:e,reason:i,stalledDuration:r,details:d({},a,o)};o&&e&&this.resetPreloadDetails();let l=d({},s.details,{stalledDuration:s.stalledDuration,stalledId:s.id});const c=this.getState();if(c){const{muted:e,remainingBufferedTime:t,videoTracks:r}=c;l=d({},l,{remainingBufferedTime:t,videoTrack:r.find(e=>e.selected),isMuted:e})}this.logEvent({name:s.isStalledEnd?"StalledEnd":"Stalled",data:l,labels:{reason:s.reason}})}resetPreloadDetails(){this.preloadDetails=void 0}}var V=r(3041),U=r(4364);const j=["Start","4SecWatched","10SecWatched","20SecWatched","30SecHeartbeat","End"];var B=r(9166),Y=r(4118);r(6531);class q{constructor(){this.lastUpdate=void 0,this.watchedTime=0}calc(e,t,r){if(void 0!==this.lastUpdate){const r=function(e,t){const r=e>=0&&e<=t+.5?e:t;return Math.max(0,r)}((e-this.lastUpdate.videoTime)/t,this.lastUpdate.getElapsedTime()/1e3);this.watchedTime=this.watchedTime+r}this.lastUpdate=r?{getElapsedTime:l(),videoTime:e}:void 0}get(){return this.watchedTime}restoreLastUpdate(){this.lastUpdate=void 0}}class W{constructor(e,t){this.getState=e,this.onChange=t,this.intervalId=void 0,this.watchedTimeCounter=new q,this.onTick=()=>{var e;const t=this.getState();if(!t)return;const{currentTime:r,playbackRate:n=1,playingState:i,adState:a}=t,o=(null==a?void 0:a.state)===P.PLAYING;this.watchedTimeCounter.calc(r,n,i===g.PLAY&&!o),null==(e=this.onChange)||e.call(this,this.watchedTimeCounter.get())},this.intervalId=setInterval(this.onTick,100)}reset(){var e;this.watchedTimeCounter=new q,null==(e=this.onChange)||e.call(this,this.watchedTimeCounter.get())}getWatchedTime(){return this.watchedTimeCounter.get()}destroy(){clearInterval(this.intervalId),this.intervalId=void 0}}var G=r(9396),K=r(3354);const H="qwertyuiopasdfghjklzxcvbnm0123456789";var Z;const X=-1==="__VPUID_INLINE__".indexOf("__VPUID")?"__VPUID_INLINE__":null!=(Z=G.t.getItem("vpuid"))?Z:function(){const e=[];for(let t=0;t<10;t++)e.push(H[Math.floor((0,K.M)()*H.length)]);return e.join("")}();var z;z=X,G.t.setItem("vpuid",z);var J=r(9761);const Q={enabled:!0,events:[m.Watched10Sec,m.Watched20Sec,m.Heartbeat30Sec]},$={logVersion:"1.2.0"};class ee{static getVpuid(){return X}constructor(e){let{sendLog:t,playerInfo:r,getState:n,shouldTrackWatchedTime:i}=e;this.watchedTimeTracker=void 0,this.fatalTracker=void 0,this.playbackTracker=void 0,this.playerAliveController=void 0,this.stalledController=void 0,this.remoteProgressSavingInfo=Q,this.staticParams={},this.playerInfo=void 0,this.startTimestamp=S.e0,this.shouldTrackWatchedTime=void 0,this.sendLog=void 0,this.getState=void 0,this.destroyed=!1,this.wasInitBufferingLogged=!1,this.initialStalledTimestamp=void 0,this.initialStalledTimestampStop=void 0,this.eventIndex=0,this.reportNumber=0,this.sourceIndexes={current:0,last:0},this.setWatchedTime=e=>{if(this.shouldTrackWatchedTime)return this.playbackTracker.onWatchedTimeChange(e)},this.getWatchedTime=()=>{var e;return this.shouldTrackWatchedTime?this.watchedTimeTracker.getWatchedTime():null==(e=this.getState())?void 0:e.watchedTime},this.playerInfo=r,this.sendLog=t,this.getState=n,this.shouldTrackWatchedTime=i,this.playbackTracker=new y({onEvent:e=>this.logEvent({name:e})}),this.stalledController=new F({getState:this.getState,logEvent:e=>this.logEvent(e)}),this.watchedTimeTracker=new W(n,this.setWatchedTime),this.playerAliveController=new C({getState:n,onFlushStates:e=>this.logEvent({name:"PlayerAlive",data:{states:e}}),getTimestamp:()=>this.getLogTimestamp(),stalledController:this.stalledController,getWatchedTime:this.getWatchedTime}),this.fatalTracker=new v,this.initOnVisibilityChangeHandling()}getLogTimestamp(){return Math.round(this.startTimestamp+(0,S.no)())}initOnVisibilityChangeHandling(){const e=(0,B.Y)(document,e=>{e||this.playerAliveController.flushStates()});this.playerAliveController.addDestroyHandler(e)}setStaticParams(e,t){this.staticParams=t?p({},e):p({},this.staticParams,e)}enableRemoteProgressSaving(e){this.remoteProgressSavingInfo.enabled=e}updateWatchedTime(e){this.shouldTrackWatchedTime||this.playbackTracker.onWatchedTimeChange(e)}setPlayingState(e){this.playbackTracker.onPlayingStateChange(e),e===g.BUFFERING?this.setBuffering(!0):this.setBuffering(!1)}logEvent(e,t){if(this.destroyed)return;const r=this.getFullEventLog(e,t),n=this.getUrlParams(r.eventType,r.eventName,e.labels);this.sendData(r,n)}logError(e,t){let{error:r,labels:n,extraRootFields:i}=e;if(this.destroyed)return;r.isFatal=this.fatalTracker.checkIsFatal(r.isFatal,this.staticParams.streamUrl);const a=this.getFullErrorLog({error:r,labels:n,extraRootFields:i,sourceIndex:t}),o=this.getUrlParams(a.eventType,a.eventName,n);this.sendData(a,o)}getUrlParams(e,t,r){return p({},r,{[this.playerInfo.service]:this.playerInfo.version,[e]:String(t)})}getFullEventLog(e,t){const r=this.getState(),n=p({},this.staticParams.labels,e.labels,{videoType:null==r?void 0:r.videoType}),i=j.includes(e.name)?p({},e.data,this.getDataToSend(r)):e.data,a={};return this.remoteProgressSavingInfo.events.includes(e.name)&&r&&(a.playbackProgress={time:r.currentTime}),p({},$,this.staticParams,e.extraRootFields,a,this.playerInfo,{vpuid:X,eventType:"event",eventName:e.name,timestamp:this.getLogTimestamp(),documentIsVisible:(0,V.s)(document),eventIndex:this.eventIndex,data:i,labels:n,sourceIndex:null!=t?t:this.sourceIndexes.current})}getFullErrorLog(e){let{error:t,labels:r,extraRootFields:n,sourceIndex:i}=e;const a=p({},this.staticParams.labels,r);return t.details=(0,Y.Y)(()=>"string"===typeof t.details?t.details:JSON.stringify(t.details))||t.details,p({},$,this.playerInfo,this.staticParams,n,{vpuid:X,eventType:t.isFatal?"fatal":"error",eventName:String(t.code),timestamp:this.getLogTimestamp(),documentIsVisible:(0,V.s)(document),eventIndex:this.eventIndex,data:t,labels:a,sourceIndex:null!=i?i:this.sourceIndexes.current})}getDataToSend(e){if(!e)return{};const{watchedTime:t,duration:r,currentTime:n,utcStartTime:i,isFullscreen:a,volume:o,muted:s}=e;return{watchedSec:this.shouldTrackWatchedTime?this.watchedTimeTracker.getWatchedTime():t,duration:isNaN(r)?void 0:r,time:n,utcTime:void 0===i?void 0:i+n,isFullscreen:a,isMuted:s||0===o}}sendData(e,t){void 0!==e&&((0,Y.Y)(()=>this.sendLog(e,t),U.L),this.eventIndex++)}checkStalledReason(e){return this.stalledController.getCurrentStalledReason()===e}setBuffering(e,t){this.stalledController.setBuffering(e,t)}setExpectedBuffering(e){let{reason:t,details:r}=e;switch(this.checkInitBuffering(t),t){case w.k.SetSource:this.setBuffering(!1),this.clearBufferingHistory();break;case w.k.Init:break;default:this.checkStalledReason(t)||this.setBuffering(!1)}return this.stalledController.setExpectedStalled(c(t,r))}checkInitBuffering(e){this.wasInitBufferingLogged||e===w.k.Init||this.onInitBuffering()}setExternalStalledDuration(e){const t=this.getExpectedStalled();t.reason===w.k.Init&&e&&(t.details={externalStalledDuration:e/1e3},this.setExpectedBuffering(t))}startInitBufferingTimer(){this.initialStalledTimestamp=(0,S.no)()}stopInitBufferingTimer(){this.initialStalledTimestampStop=(0,S.no)()}onInitBuffering(e){if(this.wasInitBufferingLogged)return;const t=this.initialStalledTimestamp&&!this.initialStalledTimestampStop,r=this.initialStalledTimestamp&&this.initialStalledTimestampStop,n=t?(0,S.no)()-this.initialStalledTimestamp:r?this.initialStalledTimestampStop-this.initialStalledTimestamp:0;e&&this.setExternalStalledDuration(e),this.setBuffering(!0,n),this.initialStalledTimestamp=void 0,this.initialStalledTimestampStop=void 0,this.wasInitBufferingLogged=!0}destroy(e){this.stalledController.destroy(),this.playerAliveController.destroy(),this.watchedTimeTracker.destroy(),this.logEvent({name:"DestroyPlayer",data:{reason:null==e?void 0:e.reason}}),this.destroyed=!0}getExpectedStalled(){return this.stalledController.getExpectedStalled()}clearBufferingHistory(){return this.stalledController.clearStalledHistory()}setPreloadDetails(e){return this.stalledController.setPreloadDetails(e)}writePlayerAliveStateManually(){return this.playerAliveController.writeStateManually()}flushStates(){return this.playerAliveController.flushStates()}onCreatePlayer(e,t){this.logEvent({name:"CreatePlayer",data:e,extraRootFields:t})}onBeforePreload(){return++this.sourceIndexes.last}getSourceIndex(){return this.sourceIndexes.current}onBeforeSetSource(){return++this.sourceIndexes.last}onSetSource(e,t,r){var n;this.flushStates(),this.sourceIndexes.current=this.sourceIndexes.last>this.sourceIndexes.current?this.sourceIndexes.last:++this.sourceIndexes.last,this.watchedTimeTracker.reset(),r&&this.setStaticParams(r),this.logEvent({name:"SetSource",data:e}),this.setExpectedBuffering({reason:w.k.SetSource,details:t});const i=null==(n=this.getState())?void 0:n.playingState;i!==g.PAUSE&&i!==g.END&&this.setBuffering(!0)}sendReportLog(e,t,r){void 0===r&&(r=!0);const n=null!=t?t:this.generateReportId();return this.logEvent({name:"ReportLog",data:{reportId:n,reported:r,reportData:e}}),n}generateReportId(){return this.playerInfo.vsid+"x"+this.reportNumber++}onExpectedBuffering(e){let{reason:t,details:r}=e;return this.checkInitBuffering(t),this.stalledController.setExpectedStalled(c(t,r))}onSeek(e){this.setExpectedBuffering({reason:w.k.Seek,details:e})}onVideoTrackChange(e){this.setExpectedBuffering({reason:w.k.VideoTrackChange,details:e})}onAudioTrackChange(e){this.setExpectedBuffering({reason:w.k.AudioTrackChange,details:e})}onRecover(e){this.setExpectedBuffering({reason:w.k.Recover,details:e})}onMediaError(e){this.setExpectedBuffering({reason:w.k.MediaError,details:e})}onNetworkStatusChange(e){this.setExpectedBuffering({reason:w.k.Offline,details:e})}onRepresentationsChange(e){this.setExpectedBuffering({reason:w.k.RepresentationsChange,details:e})}onLiveEdge(e){this.setExpectedBuffering({reason:w.k.LiveEdge,details:e})}onAdStart(e){this.setExpectedBuffering({reason:w.k.AdStart,details:e})}onAdBetween(e){this.setExpectedBuffering({reason:w.k.AdBetween,details:e})}onAdEnd(e){this.setExpectedBuffering({reason:w.k.AdEnd,details:e})}}},1771:(e,t,r)=>{"use strict";r.d(t,{j:()=>n});const n=new RegExp("^https?:\\/\\/([^\\/]+\\.)?("+["(an|strm)\\.yandex\\.(ru|net)","yastatic\\.net","strm-ott\\.akamaized\\.net","cdn\\.ngenix\\.net","strm\\.yandex\\.cdnga\\.net","strm-yandex\\.gcdn\\.co","(widevine|playready|fairplay)-proxy\\.ott\\.yandex\\.ru","drm\\.yandex-team\\.ru"].join("|")+")\\/(?!log|perf|jstracer)")},6531:(e,t,r)=>{"use strict";function n(e){var t,r,n,i;return null!=(t=null==(r=e.performance)?void 0:r.timeOrigin)?t:null==(n=e.performance)||null==(i=n.timing)?void 0:i.navigationStart}r.d(t,{$:()=>l});r(7881);var i=r(8627),a=r(1482),o=r(1771),s=r(3451);class l{constructor(e){this.config=e,this.intervalId=void 0,this.contexts=[]}attach(e){(0,a.B)(e)&&-1===this.contexts.indexOf(e)&&(0===this.contexts.length&&(this.intervalId=setInterval(()=>this.flush(),3e4)),this.contexts.push(e))}detach(e){const t=this.contexts.indexOf(e);-1!==t&&this.contexts.splice(t,1),0===this.contexts.length&&clearInterval(this.intervalId)}destroy(){this.flush(),this.contexts.length=0,clearInterval(this.intervalId)}flush(){const e=[],t=this.contexts.map(n),r=Math.min(...t);this.contexts.forEach((n,a)=>{(function(e){try{var t,r;const n=null!=(t=e.performance.getEntriesByType)?t:e.performance.webkitGetEntriesByType,i=null!=(r=e.performance.clearResourceTimings)?r:e.performance.webkitClearResourceTimings,a=n.call(e.performance,"resource");return i.call(e.performance),a}catch(n){return[]}})(n).forEach(n=>{o.j.test(n.name)&&e.push((0,i.I)(n,t[a],r))})}),0!==e.length&&this.config.sendLog(e,{perfnow:String((0,s.m6)()),navstart:String(r)})}}},1482:(e,t,r)=>{"use strict";function n(e){return e.performance&&((0,i.m)(e.performance.getEntriesByType)||(0,i.m)(e.performance.webkitGetEntriesByType))&&((0,i.m)(e.performance.clearResourceTimings)||(0,i.m)(e.performance.webkitClearResourceTimings))}r.d(t,{B:()=>n});var i=r(6789)},8627:(e,t,r)=>{"use strict";function n(e,t,r){return e&&"number"===typeof e?e+t-r:e}function i(e,t,r){let{duration:i,entryType:a,name:o,startTime:s,connectEnd:l,connectStart:c,decodedBodySize:d,domainLookupEnd:u,domainLookupStart:h,encodedBodySize:f,fetchStart:p,initiatorType:m,nextHopProtocol:g,redirectEnd:y,redirectStart:v,requestStart:E,responseEnd:_,responseStart:S,secureConnectionStart:R,transferSize:b,workerStart:A,serverTiming:T,responseStatus:P,deliveryType:O,renderBlockingStatus:I,firstInterimResponseStart:C}=e;return{duration:i,entryType:a,name:o,encodedBodySize:f,decodedBodySize:d,initiatorType:m,transferSize:b,nextHopProtocol:g,serverTiming:T,responseStatus:P,deliveryType:O,renderBlockingStatus:I,startTime:n(s,t,r),connectEnd:n(l,t,r),connectStart:n(c,t,r),domainLookupEnd:n(u,t,r),domainLookupStart:n(h,t,r),fetchStart:n(p,t,r),redirectEnd:n(y,t,r),redirectStart:n(v,t,r),requestStart:n(E,t,r),responseEnd:n(_,t,r),responseStart:n(S,t,r),secureConnectionStart:n(R,t,r),workerStart:n(A,t,r),firstInterimResponseStart:n(C,t,r)}}r.d(t,{I:()=>i})},3807:(e,t,r)=>{"use strict";r.d(t,{B7:()=>l,EW:()=>s});var n=r(4364),i=r(4118),a=r(3451);class o{setTimeout(e,t){if(t<=0)return void(0,i.Y)(e,n.L);const r=window.setTimeout(e,t);return()=>window.clearTimeout(r)}now(){return(0,a.m6)()}}class s{constructor(e){void 0===e&&(e=0),this.time=e,this.tasks=void 0,this.tasks=[]}setTimeout(e,t){const r=this.time+t,a={task:e,time:r,isCanceled:!1,isRunned:!1};let o=0;for(;o<this.tasks.length&&!(r<this.tasks[o].time);o+=1);if(this.tasks.splice(o,0,a),!(t<=0))return()=>a.isCanceled=!0;(0,i.Y)(()=>this.runTask(a),n.L)}setTime(e){if(isNaN(e))return;let t=0;for(;t<this.tasks.length&&!(e<this.tasks[t].time);t+=1)this.runTask(this.tasks[t]);this.time=e,this.tasks.splice(0,t)}now(){return this.time}tick(e){this.setTime(this.time+e)}reset(){this.time=0,this.tasks=[]}runTask(e){e.isRunned||e.isCanceled||(e.isRunned=!0,this.time=e.time,e.task())}}class l{constructor(e,t){void 0===t&&(t=new o),this.distributionFunction=e,this.clock=t,this.stopped=!0,this.cancel=void 0,this.lastNow=0,this.lastKnockTime=void 0,this.lastTimeout=0,this.restTime=0,this.destroyed=!1,this.isFirstKnock=!0,this.count=0}setEnabled(e){return e?this.start():this.stop(),this}stop(){return this.stopped||(this.stopped=!0,this.cancelTimeout(),this.restTime=Math.max(this.restTime-(this.clock.now()-this.lastKnockTime),0)),this}start(){return this.stopped&&!this.destroyed&&(this.stopped=!1,this.lastKnockTime=this.clock.now(),this.setTimeout(()=>this.knock(this.lastNow+this.lastTimeout),this.restTime)),this}destroy(){this.cancelTimeout(),this.stopped=!0,this.destroyed=!0}knock(e){this.lastNow=e,this.lastKnockTime=this.clock.now(),this.isFirstKnock?this.isFirstKnock=!1:this.count++;const t=this.restTime=this.lastTimeout=this.distributionFunction({time:e,count:this.count});this.stopped||this.destroyed||this.setTimeout(()=>this.knock(e+t),t)}cancelTimeout(){void 0!==this.cancel&&this.cancel(),this.cancel=void 0}setTimeout(e,t){this.cancelTimeout();const r=this.clock.setTimeout(e,t);void 0!==r&&(this.cancelTimeout(),this.cancel=r)}}},1662:(e,t,r)=>{"use strict";let n,i;r.d(t,{k:()=>n}),function(e){e.Init="Init",e.SetSource="SetSource",e.Seek="Seek",e.VideoTrackChange="VideoTrackChange",e.AudioTrackChange="AudioTrackChange",e.Recover="Recover",e.MediaError="MediaError",e.Offline="Offline",e.Other="Other",e.Render="Render",e.RepresentationsChange="RepresentationsChange",e.LiveEdge="LiveEdge",e.AdStart="AdStart",e.AdOther="AdOther",e.AdBetween="AdBetween",e.AdEnd="AdEnd"}(n||(n={})),function(e){e.Internal="internal",e.Api="api",e.Cache="cache"}(i||(i={}))},9761:(e,t,r)=>{"use strict";function n(e){let t="";for(let r=0;r<e;r++)t+=(16*(0,i.M)()|0).toString(16);return t}r.d(t,{a:()=>n});var i=r(3354)},5512:(e,t,r)=>{"use strict";r.d(t,{k:()=>n});const n=e=>"hidden"in e?"hidden":"webkitHidden"in e?"webkitHidden":void 0},3041:(e,t,r)=>{"use strict";function n(e,t){void 0===t&&(t=!0);const r=(0,i.k)(e);if(!r)return t;return!e[r]}r.d(t,{s:()=>n});var i=r(5512)},26:(e,t,r)=>{"use strict";function n(e){const t=(0,i.k)(e);if(t)return t.replace(/hidden/i,"visibilitychange")}r.d(t,{Z:()=>n});var i=r(5512)},9951:(e,t,r)=>{"use strict";r.d(t,{M:()=>a});const n={}.toString,i=/\[object (\w+)\]/,a=e=>{const t=n.call(e);if(!t)return null;const r=t.match(i);if(!r)return null;const a=r[1];return a||null}},3834:(e,t,r)=>{"use strict";function n(e){if(e&&e.location){const{location:t}=e;return"function"===typeof t.toString?t.toString():t.href||""}return""}r.d(t,{b:()=>n})},6789:(e,t,r)=>{"use strict";function n(e){return"function"===typeof e||"Function"===(0,i.M)(e)}r.d(t,{m:()=>n});var i=r(9951)},3487:(e,t,r)=>{"use strict";function n(){}r.d(t,{Z:()=>n})},9166:(e,t,r)=>{"use strict";function n(e,t){const r=(0,o.Z)(e);if(!r)return i.Z;const n=()=>{t((0,a.s)(e))};return e.addEventListener(r,n),()=>e.removeEventListener(r,n)}r.d(t,{Y:()=>n});var i=r(3487),a=r(3041),o=r(26)},4364:(e,t,r)=>{"use strict";function n(e){setTimeout(()=>{throw e},0)}r.d(t,{L:()=>n})},4118:(e,t,r)=>{"use strict";function n(e,t){try{return e()}catch(r){"function"===typeof t&&t(r)}}r.d(t,{Y:()=>n})},4780:(e,t,r)=>{"use strict";r.d(t,{i:()=>n});const n="playerskin-native-ui-mode"},7550:(e,t,r)=>{"use strict";function n(){return a}r.d(t,{r:()=>n});const i=(0,r(9525).I)();i.Ya||(i.Ya={}),i.Ya.streamPlayer||(i.Ya.streamPlayer={}),i.Ya.streamPlayer.exp||(i.Ya.streamPlayer.exp={});const a=i.Ya.streamPlayer.exp;a.flags||(a.flags={})},2178:(e,t,r)=>{"use strict";function n(e){if(g.flagsInited)return;g.flagsInited=!0,function(){var e;const t=null==(e=h())?void 0:e.vpuid;if(!t)return;const r=(()=>{try{var e;return null==(e=f.localStorage)?void 0:e.getItem("vpuid")}catch(t){return null}})();if(!r||r!==t)try{var n;null==(n=f.localStorage)||n.setItem("vpuid",String(t))}catch(i){}}();const{flags:t,slots:r,testids:n}=h()||{};(0,m.K)(t)&&(0,u.Y)(()=>{(0,p.M)(t,(e,t)=>{g.flags[t]=String(e)})}),g.slots=void 0!==r?String(r):void 0,g.testids=Array.isArray(n)?n.join(","):void 0!==n?String(n):void 0,(0,m.K)(e)&&(0,m.K)(e.flags)&&(0,u.Y)(()=>{(0,p.M)(e.flags,(e,t)=>{g.flags[t]=String(e)})})}function i(){return l(),(0,u.Y)(()=>JSON.stringify(v.flags))||"{}"}function a(e){return l(e),v.flags[e]}function o(e){return"true"===e||"1"===e||"false"!==e&&"0"!==e&&void 0}function s(e){const t=o(a(e));if("undefined"===typeof t){return o(y[e])}return t}function l(e){if(v.flagsInited)return;const t=new Error(e?"Unexpected usage of player's flag "+e+" before any flag configuration":"Unexpected usage of player's getFlagsJson before any flag configuration");setTimeout(()=>{throw t})}r.d(t,{Vc:()=>n,RW:()=>s,II:()=>i});var c=r(7550);var d=r(1153),u=r(8712);const h=(0,d.I)((function(){return(0,u.Y)(()=>{const{flags:e,testids:t,slots:r,vpuid:n}=JSON.parse("__UAAS_CONFIG_INLINE__");return{flags:e,testids:t,slots:r,vpuid:n}})||void 0})),f="object"===typeof self?self:window;var p=r(7974),m=r(5689);const g=(0,c.r)(),y={web_add_m4s_segments_for_safari:"false",web_add_mms_ios:"false",web_debug_log_calls:"false",web_debug_log_events:"false",web_debug_log_internals:"false",web_debug_panel:"false",web_forbid_allow_muted_autoplay:"false",web_ignore_render_stalled:"true",web_ios_landscape_fix:"true",web_preload_while_drm_init:"false",web_screen_wake_lock:"false",web_send_end_after_pause:"false",web_true_stored_bandwidth:"false",web_userquality_ttl:"false",web_watched_time_in_telemetry_package:"false",web_yasp_enable_network_traces:"false",web_yasp_enable_worker:"true",web_yasp_object_fit_in_resolution_rule:"false",web_yasp_screenshot_capturing:"false",web_yasp_static_timeout_for_low_latency:"true",web_yasp_target_latency_debug:"-1",web_yasp_target_latency_updater:"false",web_yasp_time_to_start:"null",yasp_decrease_mse_buffer_on_allocation_error:"false",yasp_decrease_mse_buffer_on_quota_exceeded_error:"false",yasp_decrease_virtual_buffer_on_allocation_error:"false",yasp_enable_for_ad:"true",yasp_no_source_abort_on_fake_seek:"false",yasp_share_worker:"false",yasp_share_worker_no_real_destroy:"false"},v=(0,c.r)()},6170:(e,t,r)=>{"use strict";r.d(t,{hV:()=>i,wS:()=>a,V9:()=>o,g2:()=>s,Xy:()=>n});const n="playerapi-version",i="playerapi-debug-logcalls",a="playerapi-debug-logevents",o="playerapi-debug-loginternals",s="playerapi-debug-panel"},4841:(e,t,r)=>{"use strict";function n(e,t,r,n){let{params:i}=e;(0,y.K)(i[0])?((0,g.M)(i[0],(e,n)=>{n===t&&(Array.isArray(e)?e.forEach(e=>e(r)):e(r))}),n&&(i[0][t]=[])):i[0]===t&&(0,m.m)(i[1])&&(i[1](r),n&&(i[1]=d.Z))}function i(e,t,r){for(let i=0;i<e.length;i++){const a=e[i];"on"===a.name?n(a,t,r,!1):"once"===a.name&&n(a,t,r,!0)}}function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e){function t(t){if(e&&console.log("[PLAYER] [CALL]",t.name,t.params),void 0!==n)return n[t.name].apply(n,t.params);if(void 0!==o&&v.indexOf(t.name)>-1)return o[t.name].apply(o,t.params);if(!t.async)return void m.push(t);const r=a({},t,{resolve:d.Z,reject:d.Z});return m.push(r),new Promise((e,t)=>{r.resolve=e,r.reject=t})}function r(e,t){e.forEach(e=>{e.async?t[e.name].apply(t,e.params).then(e.resolve,e.reject):t[e.name].apply(t,e.params)}),e.length=0}let n,o,u=!1,m=[];const g={getReadyState:()=>u?c.k.broken:n?n.getReadyState():c.k.init,getState:()=>{if(n)return n.getState()},setReadyInstance(e){n=e,r(m,n)},handlePlayerDestroy(){n=void 0,o=void 0},setInstance(e){o=e;const[t,n]=function(e,t){const r=[],n=[];return((e,t,r)=>{for(let n=0;n<e.length;n++)t.call(r,e[n],n,e)})(e,(i,a)=>{t(i,a,e)?r.push(i):n.push(i)}),[r,n]}(m,e=>{let{name:t}=e;return f.n.indexOf(t)>-1});m=n,r(t,o)},emitErrorOnStart(e){if(n)throw new Error("Can't emit error on lazyApi after #setInstance()");u=!0,function(e,t){i(e,"ErrorChange",{error:t})}(m,e instanceof Error?e:new Error("NOT_AN_OBJECT_ERROR: "+e))},emitEventOnStart(e,t){o||i(m,e,t)}};return Object.defineProperty(g,"skin",{get:()=>n?n.skin:void 0}),p.t.forEach(e=>{g[e]="pause"===e?function(r){return void 0===r&&(r=l.l.ExternalApi),g.emitEventOnStart("RequestPlayingState",{playingState:s.X.PAUSE,playingStateReason:r}),t({name:e,params:Array.prototype.slice.call(arguments),async:!1})}:function(){return t({name:e,params:Array.prototype.slice.call(arguments),async:!1})}}),h.o.forEach(e=>{g[e]="play"===e?function(r){return void 0===r&&(r=l.l.ExternalApi),g.emitEventOnStart("RequestPlayingState",{playingState:s.X.PLAY,playingStateReason:r}),t({name:e,params:Array.prototype.slice.call(arguments),async:!0})}:function(){return t({name:e,params:Array.prototype.slice.call(arguments),async:!0})}}),g}r.d(t,{K:()=>o});var s=r(7746),l=r(8557),c=r(9200),d=r(55),u=r(4145),h=r(1792),f=r(1194),p=r(7549),m=r(4754),g=r(7974),y=r(5689);const v=[...f.n,...u.V]},9026:(e,t,r)=>{"use strict";r.d(t,{h:()=>n});const n=(0,r(3461).e)(document,"yandexuid")},3635:(e,t,r)=>{"use strict";function n(e,t){let r=e[t];if(!(0,i.t)(r)){const i=r;try{delete e[t];const n=e[t];"function"===typeof n&&(r=n),e[t]=i}catch(n){}}return r}r.d(t,{C:()=>n});var i=r(2839)},7974:(e,t,r)=>{"use strict";function n(e,t,r){for(const n in e)(0,i.n)(e,n)&&t.call(r,e[n],n,e)}r.d(t,{M:()=>n});var i=r(8870)},9298:(e,t,r)=>{"use strict";function n(e){if("function"===typeof Object.keys)return Object.keys(e);const t=[];for(const r in e)(0,i.n)(e,r)&&t.push(r);return t}r.d(t,{Z:()=>n});var i=r(8870)},8870:(e,t,r)=>{"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}r.d(t,{n:()=>n})},5689:(e,t,r)=>{"use strict";function n(e){const t=typeof e;return Boolean(e)&&("object"===t||"function"===t)}r.d(t,{K:()=>n})},1312:(e,t,r)=>{"use strict";r.d(t,{k:()=>a});var n=r(9951);const i=(0,r(3635).C)(Array,"isArray"),a=i?e=>i.call(Array,e):e=>"Array"===(0,n.M)(e)},3461:(e,t,r)=>{"use strict";r.d(t,{e:()=>n});const n=(e,t)=>{let r=[];try{r=e.cookie?e.cookie.split("; "):[]}catch(a){}const n=/(%[0-9A-Z]{2})+/g;let i;for(let o=0;o<r.length;o++){const e=r[o].split("="),s=e.slice(1).join("=");try{const r=e[0].replace(n,decodeURIComponent);if(s.replace(n,decodeURIComponent),t===r){i=decodeURIComponent(s);break}}catch(a){return}}return i}},1153:(e,t,r)=>{"use strict";function n(e){let t=function(){let r;return t=()=>r,r=e.apply(this,arguments),r};return function(){return t.apply(this,arguments)}}r.d(t,{I:()=>n})},4754:(e,t,r)=>{"use strict";function n(e){return"function"===typeof e||"Function"===(0,i.M)(e)}r.d(t,{m:()=>n});var i=r(9951)},9066:(e,t,r)=>{"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e){const{method:t,url:r,async:c=!0,data:d,responseType:u="text",onBeforeSend:h=o.Z,onRetry:f=o.Z,checkStatus:p=(e=>l===e),headers:m={},xhrConstructor:g=XMLHttpRequest,retries:y=0,timeout:v=0,withCredentials:E,onAbort:_,onSetup:S}=e;if(!g)return;const R=e.onSuccess?(0,a.I)(e.onSuccess):o.Z,b=e.onError?(0,a.I)(e.onError):o.Z;let A,T=!1,P=0,O=e=>{T=!0,O=o.Z,A=e,I(new Error("Abort request")),"function"===typeof _&&_(e)};const I=t=>{C.onerror=null,C.onreadystatechange=null,P&&clearTimeout(P);if(P&&4!==C.readyState||T)try{C.abort()}catch(r){}if(!T)if(y>0){const r=f(t,C);if("boolean"!==typeof r||r||O(),T)return;i(n({},e,{onSetup:e=>{let{abort:t}=e;O=e=>t(e),T&&t(A)},retries:y-1}))}else O=o.Z,b(t,C)},C=new g;try{C.open(t,r,c)}catch(w){return void I(w)}if(C.responseType=u,C.withCredentials=Boolean(E),(0,s.M)(m,(e,t)=>{try{C.setRequestHeader(t,e)}catch(w){}}),v>0&&isFinite(v)&&(P=window.setTimeout(()=>{I(new Error("Request timeout, "+r))},v)),C.onerror=I,C.onreadystatechange=()=>{if(4===C.readyState){const{status:e}=C;p(e)?(O=o.Z,clearTimeout(P),R(C)):I(new Error("Invalid request status "+e+", "+r))}},("function"!==typeof S||(S({abort:e=>O(e)}),!T))&&(h(C,e),!T))try{C.send(d)}catch(w){I(w)}}r.d(t,{W:()=>i});var a=r(1153),o=r(4612),s=r(7974);const l=200},7668:(e,t,r)=>{"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e){return new Promise((t,r)=>{(0,a.W)(n({},e,{onSuccess:t,onError:r}))})}r.d(t,{W:()=>i});var a=r(9066)},4612:(e,t,r)=>{"use strict";function n(){}r.d(t,{Z:()=>n})},9899:(e,t,r)=>{"use strict";function n(e){return"string"===typeof e}r.d(t,{H:()=>n})},8712:(e,t,r)=>{"use strict";function n(e,t){try{return e()}catch(r){"function"===typeof t&&t(r)}}r.d(t,{Y:()=>n})},3472:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=document.createElement("a")},5753:(e,t,r)=>{"use strict";function n(e,t){const r=new RegExp("[?&]"+e+"=*([^&#]*)","g");let n=null,i=null;for(;i=r.exec(t);)n=i;return n&&"string"===typeof n[1]?decodeURIComponent(n[1]):void 0}r.d(t,{c:()=>n})},504:(e,t,r)=>{"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e){u.A.href=e;let t=u.A.pathname||"";"/"!==t.charAt(0)&&(t="/"+t);const r=e.indexOf("?"),a=e.indexOf("#");let o;if(o=-1===r&&-1===a?e:-1===r?e.slice(0,a):-1===a?e.slice(0,r):e.slice(0,Math.min(r,a)),h.test(e)){const t=i(e.replace(h,"https:"));return u.A.href=e,n({},t,{originalPath:o,protocol:e.slice(0,e.indexOf(":")+1),href:u.A.href})}const s=u.A.protocol&&/^[a-z\-]+:/i.test(u.A.protocol)?u.A.protocol:"";return{originalPath:o,href:u.A.href,protocol:s,host:u.A.host,hostname:u.A.hostname,port:u.A.port,pathname:t,search:u.A.search,hash:u.A.hash}}function a(e,t){if(void 0===t&&(t=!1),t){const t=e.originalPath,r="/"===e.pathname&&"/"!==t[t.length-1];return e.originalPath+(r?"/":"")+e.search+e.hash}const r="443"===e.port||"80"===e.port?e.hostname:e.host;return e.protocol+"//"+r+e.pathname+e.search+e.hash}function o(e){const t={},r=e.replace(/^[?#]+/,"").replace(/#.*$/,"").split("&");for(let n=0;n<r.length;n++){const e=r[n].indexOf("=");let i,a;if(-1===e?(i=f(r[n]),a=""):(i=f(r[n].slice(0,e)),a=r[n].slice(e+1)),i){const e=Boolean(/(\[\])$/.exec(i));i=i.replace(/\[\]$/,""),e?void 0===t[i]?t[i]=[f(a)]:t[i]=[].concat(t[i],f(a)):t[i]=f(a)}}return t}function s(e){const t=[];for(const r in e)if(e.hasOwnProperty(r)){const n=e[r];(0,c.k)(n)?t.push(p(r,n)):void 0!==n&&t.push(r+"="+encodeURIComponent(n))}return"?"+t.join("&")}function l(e,t,r){let{override:l=!0,saveOriginalPath:c=!1}=void 0===r?{}:r;const u=i(e),h=o(u.search);(0,d.M)(t,(e,t)=>{(void 0===h[t]||l)&&(h[t]=e)});return a(n({},u,{search:s(h)}),c)}r.d(t,{Sr:()=>l,en:()=>i,hA:()=>a});var c=r(1312),d=r(7974),u=r(3472);const h=/^(android-app:|chrome-extension:)/,f=e=>{try{return decodeURIComponent(e)}catch(t){return e}},p=(e,t)=>t.map(t=>e+"[]="+encodeURIComponent(t)).join("&")},9200:(e,t,r)=>{"use strict";r.d(t,{k:()=>n.k});var n=r(6094)},5636:(e,t,r)=>{"use strict";r.d(t,{B:()=>i});var n=r(55);class i{constructor(){this.resolve=void 0,this.reject=void 0,this.promise=void 0;let e=n.Z,t=n.Z;this.promise=new Promise((r,n)=>{e=r,t=n}),this.resolve=e,this.reject=t}}},3126:(e,t,r)=>{"use strict";function n(e,t,r){void 0===r&&(r=window);const n=(0,i.b)(r),l=t((0,s.c)(e,n));if(void 0!==l)return console&&(0,o.m)(console.warn)&&console.warn("using "+e+"="+l+" from query"),l;const c=t(function(e,t){try{const r=e.localStorage.getItem(t);if(!r)return;return r}catch(r){return}}(r,e));if(void 0!==c)return console&&(0,o.m)(console.warn)&&console.warn("using "+e+"="+c+" from localStorage"),c;if(e===a.Xy){const n=t(function(e,t){try{const r=e.sessionStorage.getItem(t);if(!r)return;return r}catch(r){return}}(r,e));if(void 0!==n)return n}}r.d(t,{O:()=>n});var i=r(3834),a=r(6170),o=r(4754),s=r(5753)},5605:(e,t,r)=>{"use strict";function n(e){return(0,i.H)(e.tagName)}r.d(t,{m:()=>n});var i=r(9899)},3563:(e,t,r)=>{"use strict";function n(){const e={};for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.filter(Boolean).join(";").split(";").forEach(t=>{if(!/^\d+,\d+,-?\d+$/.test(t))return;const r=parseInt(t,10);e[r]=e[r]||t});const i=[];for(const a in e)e.hasOwnProperty(a)&&i.push(e[a]);return 0<i.length?i.join(";"):void 0}r.d(t,{S:()=>n})},55:(e,t,r)=>{"use strict";function n(){}r.d(t,{Z:()=>n})},4149:(e,t,r)=>{"use strict";function n(e){return"frontend.vh.yandex."+e}function i(){const e=function(){const e=window.location.hostname.split(".");if(1===e.length)return;const t=e.pop();return isFinite(parseInt(t,10))?void 0:t}();return void 0===e||-1===R.indexOf(e)?n("ru"):n(e)}function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){const r=(()=>{if(function(e){try{return new URL(e),!0}catch(t){return!1}}(e)){const t=(0,c.en)(e);return(0,c.hA)(a({},t,{pathname:t.pathname+".json"}))}return function(e,t){if(void 0===t||!t)return e;const r=(0,c.en)(e),n=r.hostname;return r.hostname=n.split(".").slice(0,-1).concat(t).join("."),r.host=r.host.replace(n,r.hostname),(0,c.hA)(r)}("https://frontend.vh.yandex.ru/player",function(e){return(0,d.H)(null==e?void 0:e.tld)?null==e?void 0:e.tld:i().split(".").pop()}(t))+"/"+e+".json"})();return(0,c.Sr)(r,a({},t||{},{vpuid:u.M0.getVpuid()}))}async function s(e,t){var r;const n=await function(e,t){const r=o(e,t);return(async()=>{const e=new S,t=setTimeout(()=>e.abort(),15e3);try{return await(await window.fetch(r,{credentials:"include",signal:e.signal})).json()}catch(n){if(e.signal.aborted)throw new Error("requestVhParams timeout");throw n}finally{clearTimeout(t)}})()}(e,t),i=new l.y(t,void 0),a=await i.getPlayerConfig(n);return{vhParams:n,playerConfig:a,sourceConfig:a.source,skinConfig:(null==(r=a.skinParams)?void 0:r.skinConfig)||{}}}r.d(t,{s6:()=>s});var l=r(7542),c=r(504),d=r(9899),u=r(2022),h=(r(7881),r(4118));const f="undefined"!==typeof fetch&&"undefined"!==typeof ReadableStream&&"undefined"!==typeof(0,h.Y)(()=>new AbortController);var p={};try{var m=(new EventTarget).constructor;class e extends m{}new e,p.EventTarget=(new EventTarget).constructor}catch(EventTarget){!function(e,t){function r(){t.set(this,a(null))}function n(e,t,r){o(e,t,{configurable:!0,writable:!0,value:r})}function i(e){var t=e.options;return t&&t.once&&e.target.removeEventListener(this.type,e.listener),"function"===typeof e.listener?e.listener.call(e.target,this):e.listener.handleEvent(this),this._stopImmediatePropagationFlag}var a=e.create,o=e.defineProperty,s=r.prototype;n(s,"addEventListener",(function(e,r,n){for(var i=t.get(this),a=i[e]||(i[e]=[]),o=0,s=a.length;o<s;o++)if(a[o].listener===r)return;a.push({target:this,listener:r,options:n})})),n(s,"dispatchEvent",(function(e){var r=t.get(this)[e.type];return r&&(n(e,"target",this),n(e,"currentTarget",this),r.slice(0).some(i,e),delete e.currentTarget,delete e.target),!0})),n(s,"removeEventListener",(function(e,r){for(var n=t.get(this),i=n[e]||(n[e]=[]),a=0,o=i.length;a<o;a++)if(i[a].listener===r)return void i.splice(a,1)})),p.EventTarget=r}(Object,new WeakMap)}const g=p.EventTarget;var y=r(55);const v={};class E extends g{constructor(e){if(super(),this.aborted=void 0,this.reason=void 0,this._onabort=y.Z,e!==v)throw new TypeError("Illegal constructor.");this.aborted=!1}set onabort(e){const t=this._onabort;t&&this.removeEventListener("abort",t),this._onabort=e,this.addEventListener("abort",e)}get onabort(){return this._onabort}throwIfAborted(){throw this.reason}}const _="object"===typeof self?self:window,S=f?_.AbortController:class{constructor(){this._signal=void 0,this._signal=new E(v)}get signal(){return this._signal}abort(e){const t=this.signal;t.aborted||(t.aborted=!0,t.reason=e,t.dispatchEvent(new Event("abort")))}},R=["ru","by","com","uz","kz"]},4145:(e,t,r)=>{"use strict";r.d(t,{V:()=>n});const n=["play","setSource","destroy"]},1792:(e,t,r)=>{"use strict";r.d(t,{o:()=>n});const n=["sendReportLog","preloadSource","requestVideoElementFullscreen","requestDebugInfo","requestExternalPlay","requestExternalPlayerList","insertInto","playAdViewers",...r(4145).V]},1194:(e,t,r)=>{"use strict";r.d(t,{n:()=>n});const n=["pause","on","once","off","publicEmit"]},7549:(e,t,r)=>{"use strict";r.d(t,{t:()=>n});const n=["setVideoTrack","setAudioTrack","setTextTrack","changeAdditionalParams","exitVideoElementFullscreen","setPlaybackRate","setMuted","setVolume","setPictureInPictureAllowed","setVideoStyle","setNativeControlsVisibility","setNativeTextTrackVisibility","logEvent","logEventInternal","logError","seek","openReportWindow","playInrollAd","skipAdPod","setNativeAdControlsVisibility","setDebugPanelVisibility",...r(1194).n]},9320:(e,t,r)=>{"use strict";function n(e,t,r){(0,o.K)(t)?(0,s.M)(t,(t,r)=>{(Array.isArray(t)?t:[t]).forEach(t=>{e(r,t)})}):(0,i.m)(r)&&e(t,r)}r.d(t,{h:()=>l});var i=r(4754),a=r(9298),o=r(5689),s=r(7974);class l{constructor(e){this.handlers=Object.create(null),this.filters=Object.create(null),this.batchFn=e=>e(),(0,o.K)(e)&&(0,i.m)(e.eventListenersBatch)&&(this.batchFn=e.eventListenersBatch)}on(e,t){n((e,t)=>this.getHandlers(e).push({once:!1,fn:t}),e,t)}once(e,t){n((e,t)=>this.getHandlers(e).push({once:!0,fn:t}),e,t)}off(e,t){const r=this.getHandlers(e),n=r.findIndex(e=>{let{fn:r}=e;return r===t});-1!==n&&r.splice(n,1)}setFilter(e,t){this.filters[e]=t}unsetFilter(e){delete this.filters[e]}getAllHandlers(){return this.handlers}emit(e,t){const r=this.filters[e];r&&!r(t)||this.batchFn(()=>{this.getHandlers(e).slice().forEach(r=>{try{r.once&&this.off(e,r.fn),r.fn(t)}catch(n){setTimeout(()=>{throw n},0)}})})}destroy(){(0,a.Z)(this.handlers).forEach(e=>{this.handlers[e]=void 0})}getHandlers(e){return void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e]}}},3545:(e,t,r)=>{"use strict";function n(){return o}r.d(t,{p:()=>n});var i=r(3041),a=r(9166);let o=(0,i.s)(document);(0,a.Y)(document,e=>{e||(o=e)})},4519:(e,t,r)=>{"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(){return c||(!function(){try{l=encodeURIComponent(JSON.stringify(n({},o,s)))}catch(e){}}(),c=!0),l}function a(e){return void 0===e||void 0===e.additional?i():encodeURIComponent(JSON.stringify(n({},o,s,e.additional)))}r.d(t,{B6:()=>a});let o={},s={},l="",c=!1},5865:(e,t,r)=>{"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function a(e){(0,s.Y)(()=>{window.Ya.Rum.time(e)})}function o(e,t){void 0===t&&(t={}),(0,c.p)()&&(0,s.Y)(()=>{const r=i(t,d);window.Ya.Rum.timeEnd(e,n({},r,{"-additional":(0,l.B6)(t)}))})}r.d(t,{iW:()=>a,vG:()=>o});var s=r(8712),l=r(4519),c=r(3545);const d=["additional"]},8557:(e,t,r)=>{"use strict";r.d(t,{l:()=>n.l});var n=r(706)},5207:()=>{!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(n,i,function(t){return e[t]}.bind(null,i));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){void 0===e&&(e=window),"Ya"in e||(e.Ya={}),"OTT"in e.Ya||(e.Ya.OTT={}),"PlayerLoader"in e.Ya.OTT||(e.Ya.OTT.PlayerLoader={})}},function(e,t,r){"use strict";function n(){}var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(r(2)),l=o(r(3)),c=(n.prototype.init=function(e){var t=(e.source||{}).context;if(!t)return this.useBasePlayer(e);var r=t.contentTypeId,n=t.licenses,i=(void 0===n?[]:n)[0];if(i&&!("active"in i))return this.usePlaceholder(e);if(20===r||21===r)return this.useWrapper(e);var a="production"===e.envName?"production":"testing",o=window.Ya.OTT.buildTrackings(e.source.context,{env:a});return e.source.trackings=s.default(o,e.source.trackings),this.useBasePlayer(e,!0)},n.prototype.usePlaceholder=function(e){var t=e.source,r=t.context,n=r.container,o=void 0===n?{}:n,s=r.licenses[0],c=a(r,["container","licenses"]),d=t.preview;e.element="string"==typeof e.element?document.getElementById(e.element):e.element;var u=this.getPlaceholderUrl();return(this.placeholderExists(o)?Promise.resolve():l.default(u,document.head)).then((function(){return window.Ya.OTT.Placeholder.main(i(i(i({container:o,thumbnail:d},c),s),{config:e}))})).then((function(t){return t.render(e.element)}))},n.prototype.useBasePlayer=function(e,t){void 0===t&&(t=!1);var r=e.version,n=e.useBetaStatic,i=this.getPlayerBundle(r,n);return(this.baseApiExists()?Promise.resolve():l.default(i,document.head)).then((function(){return window.Ya.playerApi.init(e)})).then((function(e){return{api:e,withWrapper:!1,withTrackings:t}}))},n.prototype.useWrapper=function(e){var t=this.getWrapperUrl();return(this.wrapperExists()?Promise.resolve():l.default(t,document.head)).then((function(){return window.Ya.OTT.Player.init(e)})).then((function(e){return{api:e,withWrapper:!0,withTrackings:!0}}))},n.prototype.baseApiExists=function(){return!!window.Ya&&!!window.Ya.playerApi},n.prototype.wrapperExists=function(){return!(!window.Ya||!window.Ya.OTT||!window.Ya.OTT.Player)},n.prototype.placeholderExists=function(e){return(void 0===e?{}:e).context,!!(window.Ya&&window.Ya.OTT&&window.Ya.OTT.Placeholder)&&!!window.Ya.OTT.Placeholder.main},n.prototype.getWrapperUrl=function(){return"https://yastatic.net/s3/kinopoisk-frontend/ott/player-wrapper/"+n.WRAPPER_VERSION+"/ott-player-wrapper.js"},n.prototype.getPlaceholderUrl=function(){return"https://yastatic.net/s3/kinopoisk-frontend/ott/player-placeholder/"+n.PLACEHOLDER_VERSION+"/ott-player-placeholder.js"},n.prototype.getPlayerBundle=function(e,t){return("http:"===location.protocol?"http://":"https://")+(t?"betastatic.yastatic.net":"yastatic.net")+(e?"/yandex-video-player-iframe-api-bundles/"+e+"/js/player-api-loader.js":"/yandex-video-player-iframe-api/js/player-api-loader.js")},n.WRAPPER_VERSION="4.0.1",n.PLACEHOLDER_VERSION="1.0.1",n);t.default=c},function(e,t,r){"use strict";function n(e){return i.apply(void 0,e.map((function(e){return{trackingEvents:e}}))).trackingEvents}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0]?e[0].trackingEvents:{};Array.isArray(r)&&(r=n(r));for(var i=1;i<e.length;i++)!function(t){var i=e[t]?e[t].trackingEvents:{};Array.isArray(i)&&(i=n(i)),Object.keys(i).forEach((function(e){var t=i[e];Array.isArray(t)&&(e in r?Array.isArray(r[e])&&(r[e]=r[e].concat(t)):r[e]=t)}))}(i);return{trackingEvents:r}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return new Promise((function(r,n){var i=document.createElement("script");i.type="text/javascript",i.src=e,i.crossOrigin="anonymous",i.onload=r,i.onerror=n,t.appendChild(i)}))}},function(e,t,r){"use strict";r.r(t);var n="__VAL__",i=["yandexuid","position","serviceName","reqid","path","sid","uuid","kpId","kpTrailerId","contentTypeId","monetizationModel","subscriptionType","puid","page","domain","vars","testIds","eventId","subProfileId","buildTimestamp","pathId","deviceId","appVersion","platformOs","platformVersion","platformVendor","platformModel","platformVendorDeviceId","platformName","psid","fromBlock","fromBlockPosition","fromBlockItemPosition","fromBlockAction","fromBlockMLSessionId","fromBlockStartPage","fromBlockEndPage","fromBlockExternalLink","isLive"],a=["setSource","init","error","adStart","adEnd","heartbeat","watchedTime","viewed"],o={film:{default:a,kp:a},trailer:{default:a},channel:{default:a},episode:{default:a},"vod-broadcast-episode":{default:a},"music-clip":{default:a},"short-video":{default:a},"ott-trailer":{default:a}},s={1:"channel-family",2:"channel",3:"episode",4:"vod-library",5:"vod-episode",6:"tv-series",7:"tv-season",8:"black-window",9:"out-of-tv-channel",10:"type-folder",11:"zen-namespace",12:"zen-library",13:"zen-episode",14:"yandex-disribution-library",15:"yandex-disribution-episode",16:"emergency-black-window",17:"cv-black-window",18:"yandex-market-library",19:"yandex-market-episode",20:"ott-movie",21:"ott-episode",22:"kd-feed-episode",24:"sport-episode",25:"announce",30:"ntv-vod-library",31:"ntv-vod-movie",32:"ntv-vod-series",33:"ntv-vod-series-season",34:"ntv-vod-series-season-episode",35:"ott-multipart",36:"ott-part",37:"ott-trailer",38:"ott-collection",39:"ott-collection-item",40:"high-light",41:"user-episode",42:"vod-news",43:"vod-broadcast",44:"vod-news-episode",45:"vod-broadcast-episode",46:"snapshot-tv-episode",47:"kp-trailer",48:"ya-news",49:"self-service-bw-window",50:"main-black-window",51:"music-clip",82:"ott_linked_video",83:"ott_music_karaoke",84:"ott_linked_video_parent",85:"ott_music_karaoke_parent",86:"ott-vod-library",87:"ott_linked_trailer",88:"ott_linked_music_clip",122:"ott-video-episode"},l="content_duration_",c=[["1","content_start"],["10000",l+"10"],["20000",l+"20"],["30000",l+"30"],["40000",l+"40"],["50000",l+"50"],["60000",l+"60"],["120000",l+"120"]],d="VIDEO_",u=[["25",d+"25"],["50",d+"50"],["75",d+"75"],["90",d+"90"],["99",d+"END"]];t.default=function(e,t){var r;"contentTypeID"in(r=e)&&(r.contentTypeId=r.contentTypeID),e=function(e){for(var t=0;t<i.length;t++){var r=i[t];void 0===e[r]&&(e[r]="domain"===r?document.location.hostname:"buildTimestamp"===r?Date.now():"-")}return e}(e=r);var a,l,d,h,f,p,m=(l={testing:{counterId:45961911,kpCounterId:48924764,vpCounterId:45151398,spCounterId:51357310},production:{counterId:45913512,kpCounterId:48924740,vpCounterId:31713861,spCounterId:51357310}})[a=t.env]?l[a]:l.testing,g=(h={testing:{ottTrackingsBackend:"https://tracking-testing.ott.yandex.net/v1/",metrikaBackend:"https://mc.yandex.ru/watch/",redirlogBackend:"https://yandex.ru/clck/jclck/"},production:{ottTrackingsBackend:"https://tracking.ott.yandex.net/v1/",metrikaBackend:"https://mc.yandex.ru/watch/",redirlogBackend:"https://yandex.ru/clck/jclck/"}})[d=t.env]?h[d]:h.testing,y={},v=e.serviceName,E=(f=e.contentTypeId)in(p={47:"trailer",20:"film",21:"film",51:"music-clip",87:"channel",88:"channel",122:"short-video",37:"ott-trailer",3:"episode",45:"vod-broadcast-episode"})?p[String(f)]:"film";return(v in o[E]?o[E][v]:o[E].default).forEach((function(e){y[e]=function(e,t,r){var n,i,a,o,s,l,d=[];"trailer"===t?(n="{{metrikaBackend}}{{vpCounterId}}?page-ref=yandex.ru&page-url=goal://{{domain}}/","init"===e?d.push('{{metrikaBackend}}{{vpCounterId}}?page-ref=yandex.ru&site-info={"kp_trailers":{"host":{"{{serviceName}}":{"{{kpId}}":{"{{uuid}}":"{{kpTrailerId}}"}}}}}&page-url=goal://{{domain}}/TRAILER_START'):"adStart"===e?d.push(n+"TRAILER_AD_START"):"adEnd"===e?d.push(n+"TRAILER_AD_END"):"viewed"===e&&d.push([n+"TRAILER_50",{percent:50}],[n+"TRAILER_90",{percent:90}])):(i='{{metrikaBackend}}<<COUNTER_NAME>>?page-ref=yandex.ru&site-info={"{{serviceName}}":{"{{fromBlock}}":{"<<EVENT_NAME>>":{"{{uuid}}":{"{{position}}":"{{monetizationModel}}"}}}}}',"setSource"!==e&&"init"!==e||(s=(o=i.replace("<<EVENT_NAME>>","video_start")).replace("<<COUNTER_NAME>>","{{counterId}}"),d.push(s+"&page-url=goal://{{domain}}/VIDEO_START"),"init"===e&&"kp"===r&&(a=o.replace("<<COUNTER_NAME>>","{{kpCounterId}}"),d.push(a+"&page-url=goal://{{domain}}/VIDEO_START"))),"adStart"!==e&&"adEnd"!==e||(s=(o=i.replace("<<EVENT_NAME>>",h="adStart"===e?"VIDEO_AD_START":"VIDEO_AD_END")).replace("<<COUNTER_NAME>>","{{counterId}}"),d.push(s),"kp"===r&&(l=o.replace("<<COUNTER_NAME>>","{{kpCounterId}}"),d.push(l))),"watchedTime"===e&&c.forEach((function(e){var t={offset:Number(e[0])},n=i.replace("<<EVENT_NAME>>",e[1]),a=n.replace("<<COUNTER_NAME>>","{{counterId}}");d.push([a,t]),"kp"===r&&d.push([n.replace("<<COUNTER_NAME>>","{{kpCounterId}}"),t]),"ya-sport"===r&&"120000"===e[0]&&d.push([n.replace("<<COUNTER_NAME>>","{{spCounterId}}")+"&page-url=goal://"+r+"/VIDEO_STREAM_2MIN",t])})),"viewed"===e&&u.forEach((function(e){var t={percent:Number(e[0])},n=(i+"&page-url=goal://{{domain}}/<<EVENT_NAME>>").replace(/<<EVENT_NAME>>/g,e[1]),a=n.replace("<<COUNTER_NAME>>","{{counterId}}");d.push([a,t]),"kp"===r&&d.push([n.replace("<<COUNTER_NAME>>","{{kpCounterId}}"),t])})));var h,f='{{ottTrackingsBackend}}watch?data={"position":"{{position}}","fromBlock":"{{fromBlock}}","serviceName":"{{serviceName}}","uuid":"{{uuid}}","puid":"{{puid}}","sid":"{{sid}}","vSid":"{{vsid}}","yaUID":"{{yandexuid}}","monetizationModel":"{{monetizationModel}}","contentTypeName":"{{contentTypeName}}","device-type":"{{device-type}}","device-type-tns":"{{device-type-tns}}","subscriptionType":"{{subscriptionType}}","page":"{{page}}","testIds":"{{testIds}}","eventId":"{{eventId}}","subProfileId":"{{subProfileId}}","deviceId":"{{deviceId}}","appVersion":"{{appVersion}}","platformOs":"{{platformOs}}","platformVersion":"{{platformVersion}}","platformVendor":"{{platformVendor}}","platformModel":"{{platformModel}}","platformVendorDeviceId":"{{platformVendorDeviceId}}","platformName":"{{platformName}}","psid":"{{psid}}","buildTimestamp":"{{buildTimestamp}}","pathId":"{{pathId}}","fromBlockPosition":"{{fromBlockPosition}}","fromBlockItemPosition":"{{fromBlockItemPosition}}","fromBlockAction":"{{fromBlockAction}}","fromBlockMLSessionId":"{{fromBlockMLSessionId}}","fromBlockStartPage":"{{fromBlockStartPage}}","fromBlockEndPage":"{{fromBlockEndPage}}","fromBlockExternalLink":"{{fromBlockExternalLink}}","isLive":"{{isLive}}"';if("setSource"!==e&&"init"!==e||d.push(f+',"eventType":"video_start","eventCount":"-","audio-track-lang":"{{audio-track-lang}}","audio-track-name":"{{audio-track-name}}","text-track-lang":"{{text-track-lang}}","text-track-name":"{{text-track-name}}"}'),"error"===e&&d.push(f+',"errorCode":"{{error-code}}","eventType":"player_error","eventCount":"-"}'),"adStart"!==e&&"adEnd"!==e||(h="adStart"===e?"VIDEO_AD_START":"VIDEO_AD_END",d.push(f+',"eventType":"'+h+'","eventCount":"-"}')),"heartbeat"===e){var p=void 0;switch(t){case"channel":case"short-video":case"ott-trailer":case"trailer":p=1e4;break;case"music-clip":p=3e4;break;default:p=6e4}d.push([f+',"timestamp":"{{timestamp}}","vts":"{{vts}}","fts":"{{fts}}","fullscreen":"{{fullscreen}}","eventType":"heartbeat","eventCount":"'+p+'","audio-track-name":"{{audio-track-name}}","audio-track-lang":"{{audio-track-lang}}","text-track-name":"{{text-track-name}}","text-track-lang":"{{text-track-lang}}","mute":"{{muted}}"}',{delay:p,offset:p}])}return"watchedTime"===e&&c.forEach((function(e){var t={offset:Number(e[0])};d.push([f+',"eventType":"'+e[1]+'","eventCount":"'+e[0]+'","audio-track-lang":"{{audio-track-lang}}","audio-track-name":"{{audio-track-name}}","text-track-lang":"{{text-track-lang}}","text-track-name":"{{text-track-name}}"}',t])})),"viewed"===e&&u.forEach((function(e){var t={percent:Number(e[0])};d.push([f+',"eventType":"'+e[1]+'","eventCount":"'+("99"==e[0]?"100":e[0])+'"}',t])})),d}(e,E,v)})),e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e[0],n=1;n<e.length;n++){var i=e[n];if("object"==typeof i)for(var a in i)r[a]=i[a]}return r}(e,m,g,{contentTypeName:s[e.contentTypeId]||"unknown"}),{trackingEvents:JSON.parse(function(e,t,r){void 0===t&&(t={});var i={}.macros,a=void 0===i?"{{"+n+"}}":i,o={};Object.keys(t).forEach((function(e){var r=a.replace(n,e);o[r]=t[e]}));var s=new RegExp("("+Object.keys(o).join("|")+")","ig");return("string"==typeof e?e:JSON.stringify(e)).replace(s,(function(e){return e in o?encodeURI(o[e]):e}))}(y,e))}}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(4)),a=n(r(0)),o=n(r(1));a.default(),window.Ya.OTT.buildTrackings=i.default,window.Ya.OTT.PlayerLoader={init:function(e){return(new o.default).init(e)}}}])},5638:(e,t,r)=>{"use strict";function n(e){if(!e||!e.toString)return!1;const t=e.toString();return/\[native code\]/.test(t)||/\/\* source code not available \*\//.test(t)}r.d(t,{E:()=>n})},3424:(e,t,r)=>{"use strict";r.d(t,{T:()=>i});var n=r(2239);const i=e=>{const t=[];for(;e;)try{if((0,n.b)(e),t.push(e),e.parent===e)break;e=e.parent}catch(r){break}return t}},8062:(e,t,r)=>{"use strict";r.d(t,{M:()=>a});const n={}.toString,i=/\[object (\w+)\]/,a=e=>{const t=n.call(e);if(!t)return null;const r=t.match(i);if(!r)return null;const a=r[1];return a||null}},2239:(e,t,r)=>{"use strict";function n(e){if(e&&e.location){const{location:t}=e;return"function"===typeof t.toString?t.toString():t.href||""}return""}r.d(t,{b:()=>n})},6377:(e,t,r)=>{"use strict";r.d(t,{V:()=>i});var n=r(8062);const i=e=>e instanceof Error||"Error"===(0,n.M)(e)},1390:(e,t,r)=>{"use strict";r.d(t,{d:()=>i});var n=r(5638);const i=e=>(0,n.E)(e.navigator.sendBeacon)},3022:(e,t,r)=>{"use strict";function n(e){return(0,i.H)(e)&&e.length>0}r.d(t,{H:()=>n});var i=r(8833)},8833:(e,t,r)=>{"use strict";function n(e){return"string"===typeof e}r.d(t,{H:()=>n})},8976:(e,t,r)=>{"use strict";r.d(t,{Y:()=>a});var n=r(1390),i=r(3357);const a=e=>(0,i.v)(e)&&(0,n.d)(e)},5521:(e,t,r)=>{"use strict";r.d(t,{k:()=>n});const n=(0,r(8976).Y)(window)},3357:(e,t,r)=>{"use strict";r.d(t,{v:()=>n});const n=e=>{try{if("noModule"in e.HTMLScriptElement.prototype)return!0}catch(t){}return!1}},6996:(e,t,r)=>{"use strict";function n(e){if(void 0!==e){if(!(0,i.H)(e))throw new Error("testIdsString is not a string or undefined ["+e+"]");if(0!==e.length){for(const t of e.split(";")){const r=t.split(",");if(3!==r.length)throw new Error("testIdParts length error ["+e+"]");const[n,,i]=r;if(0===n.trim().length)throw new Error("testId length error ["+e+"]");if(0===i.trim().length)throw new Error("testId bucket length error ["+e+"]")}return e}}}r.d(t,{m:()=>n});var i=r(8833)},4575:(e,t,r)=>{"use strict";r.d(t,{a:()=>n});const n=(0,r(6609).b)(window)},6609:(e,t,r)=>{"use strict";function n(e){let t,r,n=!1,a=!1,o=!1;return(0,s.Y)(()=>{t=function(e){const t=i(e,"adsdkecmaver");if("ES2017"===t||"ES5"===t)return t;return}(e)}),(0,s.Y)(()=>{o=Boolean(i(e,"adsdkdebug"))}),(0,s.Y)(()=>{r=i(e,"adsdkver")}),(0,s.Y)(()=>{n=Boolean(i(e,"vasnetworklogs"))}),(0,s.Y)(()=>{a=l(e,"vasfulldebug")}),o&&(console.warn("adsdkdebug is deprecated, use vasfulldebug instead"),a=!0),a&&(n=!0),{adsdkecmaver:t,vasfulldebug:a,vasnetworklogs:n,adsdkver:r,adsdkdebug:o}}function i(e,t){var r,n,i;return null!==(i=null!==(n=null!==(r=o.J.getItem(e,t))&&void 0!==r?r:function(e,t){const r=function(e){var t,r;const n=[e.document];let i=e.document;for(;i;)i=null===(r=null===(t=i.defaultView)||void 0===t?void 0:t.frameElement)||void 0===r?void 0:r.ownerDocument,i&&n.push(i);return n}(e);for(let n=0;n<r.length;n++){const e=new URLSearchParams(r[n].location.search).get(t);if(null!==e)return e}return}(e,t))&&void 0!==n?n:(0,a.$)(e,t))&&void 0!==i?i:void 0}r.d(t,{b:()=>n});var a=r(8087),o=r(2810),s=r(3253);const l=(e,t)=>{const r=i(e,t);return"false"!==r&&Boolean(r)}},2587:(e,t,r)=>{"use strict";r.d(t,{M:()=>o});var n=r(3022),i=r(4089),a=r(3652);const o=e=>{var t;const{error:r,config:o}=(0,a.vn)(e);if(!r){const e=o.flags,r=null!==(t=e[i.x])&&void 0!==t?t:e[i.f],a=(0,n.H)(r)?r:void 0;if((0,n.H)(a))return{version:a,parsedUaasConfig:o,parseUaasConfigError:void 0}}return{version:void 0,parsedUaasConfig:void 0,parseUaasConfigError:r}}},8087:(e,t,r)=>{"use strict";r.d(t,{$:()=>i});var n=r(3424);const i=(e,t)=>{var r,i;for(const a of(0,n.T)(e)){const e=null===(i=null===(r=a.Ya)||void 0===r?void 0:r.hardcodedParams)||void 0===i?void 0:i[t];if(e)return String(e)}}},4089:(e,t,r)=>{"use strict";r.d(t,{f:()=>i,x:()=>n});const n="ADSDKVER",i="VAS_STABLE_VERSION"},5799:(e,t,r)=>{"use strict";r.d(t,{E:()=>n});const n={ES5:"bundles",ES2017:"bundles-es2017"}},6891:(e,t,r)=>{"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}r.d(t,{Q5:()=>i});const i=n(n({},{InPage:"inpage",AdLoader:"loader",VideoBannerAd:"videobannerad",Multiroll:"multiroll",YaMusicAPI:"ya-music-api",VpaidPlayer:"vpaid_player",Rum:"rum"}),{MotionTailor:"motion_ad_creative",Survey:"survey"})},1346:(e,t,r)=>{"use strict";r.d(t,{e:()=>n});const n="https://"+r(6877).N9+"/vas-bundles/"},6877:(e,t,r)=>{"use strict";r.d(t,{N9:()=>n});["a","n.ya","nd","ex.ru"].join(""),["y","a","nde","x.ru"].join(""),["y","a",".r","u"].join("");const n=["ya","sta","tic.net"].join("");["ver","ify.y","a","nde","x.ru"].join("")},8767:(e,t,r)=>{"use strict";r.d(t,{I:()=>n});const n=r(5521).k?"ES2017":"ES5"},7875:(e,t,r)=>{"use strict";r.d(t,{S:()=>i});var n=r(6891);const i=e=>n.Q5[e]+".bundle.js"},3756:(e,t,r)=>{"use strict";r.d(t,{J:()=>l});var n=r(5799),i=r(8427),a=r(3475),o=r(7875),s=r(1536);const l=e=>{let{bundleName:t,win:r,ecmaVersion:l,version:c}=e;const d=n.E[l],u=(0,i.x)(r),h=(0,o.S)(t),f=""+(0,s.a)(c)+d+"/"+h;return(0,a.m)(u)?u(f):f}},1536:(e,t,r)=>{"use strict";function n(e){return i.m1||(0,a.H)(e)}r.d(t,{a:()=>n});var i=r(120),a=r(7004)},7004:(e,t,r)=>{"use strict";function n(e){return""+i.e+e+"/"}r.d(t,{H:()=>n});var i=r(1346)},2810:(e,t,r)=>{"use strict";r.d(t,{J:()=>n});const n={getItem:(e,t)=>{try{return e.localStorage.getItem(t)}catch(r){return null}},setItem:(e,t,r)=>{try{e.localStorage.setItem(t,r)}catch(n){return}},removeItem:(e,t)=>{try{e.localStorage.removeItem(t)}catch(r){return}}}},120:(e,t,r)=>{"use strict";r.d(t,{m1:()=>n});const n="undefined"===typeof BUNDLES_PATH?"":BUNDLES_PATH;"undefined"===typeof BUNDLE_NAME||BUNDLE_NAME,"undefined"===typeof BUILD_TIME||BUILD_TIME},7572:(e,t,r)=>{"use strict";r.d(t,{M:()=>n});const n="__ADB_CONFIG__"},9709:(e,t,r)=>{"use strict";r.d(t,{i:()=>u});var n=r(3424),i=r(3475),a=r(8199),o=r(4215),s=r(7572),l=r(5552);const c=(0,o.K)(s.M)&&(0,o.K)(s.M.fn)?s.M.fn:void 0,d=["encodeUrl","decodeUrl","encodeCSS","isEncodedUrl"],u=e=>{if(c)return c;const t={},r=(0,n.T)(e);for(;r.length;){const e=r.pop();e&&(0,l.E)(d,r=>{if((0,i.m)(t[r]))return;const n=(0,a.U)(e,"ya.videoAd."+r);(0,i.m)(n)&&(t[r]=n)})}return t}},8427:(e,t,r)=>{"use strict";r.d(t,{x:()=>i});var n=r(9709);const i=e=>(0,n.i)(e).encodeUrl},5552:(e,t,r)=>{"use strict";r.d(t,{E:()=>n});const n=(e,t,r)=>{for(let n=0;n<e.length;n++)t.call(r,e[n],n,e)}},2572:(e,t,r)=>{"use strict";r.d(t,{k:()=>a});var n=r(8062);const i=(0,r(4385).C)(Array,"isArray"),a=Boolean(i)?e=>i.call(Array,e):e=>"Array"===(0,n.M)(e)},9772:(e,t,r)=>{"use strict";function n(e){if(!Boolean(null===e||void 0===e?void 0:e.toString))return!1;try{const t=e.toString();return/\[native code\]/.test(t)||/\/\* source code not available \*\//.test(t)}catch(t){return!1}}r.d(t,{E:()=>n})},4385:(e,t,r)=>{"use strict";function n(e,t){let r=e[t];if(!(0,i.E)(r)){const i=r;try{delete e[t];const n=e[t];"function"===typeof n&&(r=n),e[t]=i}catch(n){}}return r}r.d(t,{C:()=>n});var i=r(9772)},3475:(e,t,r)=>{"use strict";function n(e){return"function"===typeof e}r.d(t,{m:()=>n})},33:(e,t,r)=>{"use strict";function n(e){let t=function(){let r;return t=()=>r,r=e.apply(this,arguments),r};return function(){return t.apply(this,arguments)}}r.d(t,{I:()=>n})},3253:(e,t,r)=>{"use strict";function n(e,t){try{return e()}catch(r){"function"===typeof t&&t(r)}}r.d(t,{Y:()=>n})},5295:(e,t,r)=>{"use strict";function n(e){if("function"===typeof Object.keys)return Object.keys(e);const t=[];for(const r in e)(0,i.n)(e,r)&&t.push(r);return t}r.d(t,{Z:()=>n});var i=r(5694)},5694:(e,t,r)=>{"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}r.d(t,{n:()=>n})},4215:(e,t,r)=>{"use strict";function n(e){const t=typeof e;return Boolean(e)&&("object"===t||"function"===t)}r.d(t,{K:()=>n})},8199:(e,t,r)=>{"use strict";r.d(t,{U:()=>i});var n=r(4215);const i=(e,t)=>{for(const r of t.split(".")){if(!(0,n.K)(e)){e=void 0;break}e=e[r]}return e}},3652:(e,t,r)=>{"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}r.d(t,{vn:()=>f});var i=r(6377),a=r(6996),o=r(5552),s=r(2572),l=r(33),c=r(5295),d=r(4215),u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const h={testIds:"",flags:{}};(0,l.I)(()=>{try{return __UAAS_CFG__}catch(e){return e}});const f=e=>{if((0,i.V)(e))return{error:e,config:h};try{const t=(0,d.K)(e)?e:JSON.parse(""+(e||"")),r=(e=>!!(0,d.K)(e)&&!(!("expFlags"in e)||!(0,s.k)(e.expFlags)))(t)?(e=>{const{expFlags:t}=e,r=u(e,["expFlags"]),i={},a={};return(0,o.E)(e.expFlags,e=>{(0,o.E)(e,e=>{let{CONTEXT:{FLAGS:t},TESTID:r}=e;(0,d.K)(t)&&(0,o.E)((0,c.Z)(t),e=>{var n;const o=t[e];i[e]=o,a[e]=null!==(n=a[e])&&void 0!==n?n:[],a[e].push({value:o,testId:r[0]})})})}),n({flags:i,flagsMap:a},r)})(t):t;if(!((e,t)=>{if(!(0,d.K)(t))throw new Error("Parsed replaced macro is not an object: "+e);if((0,a.m)(t.testIds),!("flags"in t)||!(0,d.K)(t.flags))throw new Error("Parsed replaced macro has no flags field: "+e);return!0})(String(e),r))throw new Error("UAAS config is not valid: "+e);return{error:void 0,config:r}}catch(t){return{error:t,config:h}}}},2868:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HAS_URL=void 0,t.HAS_URL=(()=>{try{return new URL("https://yandex.ru"),!0}catch(e){return!1}})()},7343:function(e,t,r){"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var i=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.CSPLogger=void 0;const a=r(2868),o=r(1025);t.CSPLogger=class{constructor(e,t){void 0===t&&(t={});var{url:r="https://csp.yandex.net/csp"}=e,a=i(e,["url"]);this.additional=t,this.cspEventListener=e=>{try{const t=new URL(e.blockedURI);if(this.url===t.origin+t.pathname&&"1"===t.searchParams.get("js_client"))return this.unsubscribe(),void(console.warn&&console.warn("URL for logging CSP was blocked"))}catch(a){}const t={"csp-report":{"blocked-uri":e.blockedURI,"column-number":e.columnNumber,disposition:e.disposition,"document-uri":e.documentURI,"effective-directive":e.effectiveDirective,"line-number":e.lineNumber,"original-policy":e.originalPolicy,referrer:e.referrer,"script-sample":e.sample,"status-code":e.statusCode,"violated-directive":e.violatedDirective}},r=JSON.stringify(t),i=this.addParamsToUrl(this.url,n(n(n({},this.config),this.additional),{js_client:"1"}));o.sendLog(i,r)},this.url=r,this.config=a}setAdditional(e){this.additional=n(n({},this.additional),e)}addParamsToUrl(e,t){const r=new URL(e);for(const n in t){const e=t[n];e&&"string"===typeof e&&t.hasOwnProperty(n)&&r.searchParams.append(n,e)}return r.toString()}subscribe(e){void 0===e&&(e=document),"onsecuritypolicyviolation"in document&&a.HAS_URL&&e.addEventListener("securitypolicyviolation",this.cspEventListener)}unsubscribe(e){void 0===e&&(e=document),e.removeEventListener("securitypolicyviolation",this.cspEventListener)}}},1025:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendLog=void 0,t.sendLog=function(e,t){if(navigator.sendBeacon&&navigator.sendBeacon(e,t))return;const r=new XMLHttpRequest;r.open("POST",e),r.send(t)}},3106:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.identity=void 0,t.identity=function(e){return e}},7881:(e,t,r)=>{"use strict";var n=r(3850);r.o(n,"toBps")&&r.d(t,{toBps:function(){return n.toBps}}),r.o(n,"toSeconds")&&r.d(t,{toSeconds:function(){return n.toSeconds}});var i=r(4423);r.o(i,"toBps")&&r.d(t,{toBps:function(){return i.toBps}}),r.o(i,"toSeconds")&&r.d(t,{toSeconds:function(){return i.toSeconds}});r(2968)},2968:(e,t)=>{"use strict"},6285:(e,t,r)=>{"use strict";function n(e){return Math.max(e,0)}function i(e){return Math.floor(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.toUnsignedInt=t.toUnsignedFloat=t.toInt=t.toUnsigned=t.toFloat=void 0;const a=r(3106);t.toFloat=a.identity,t.toUnsigned=n,t.toInt=i,t.toUnsignedFloat=function(e){return n((0,t.toFloat)(e))},t.toUnsignedInt=function(e){return n(i(e))}},3849:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toTimestamp=t.toMilliseconds=t.toMbps=t.toMegaBitsPerSeconds=t.toKbps=t.toKiloBitsPerSeconds=t.toBps=t.toBitsPerSeconds=t.toMegabits=t.toKilobits=void 0;const n=r(3106),i=r(2008);t.toKilobits=n.identity,t.toMegabits=n.identity,t.toBitsPerSeconds=n.identity,t.toBps=t.toBitsPerSeconds,t.toKiloBitsPerSeconds=n.identity,t.toKbps=t.toKiloBitsPerSeconds,t.toMegaBitsPerSeconds=n.identity,t.toMbps=t.toMegaBitsPerSeconds,t.toMilliseconds=n.identity,t.toTimestamp=i.toMoment},2008:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toPixels=t.toPerSeconds=t.toPercent=t.toPortion=t.toDays=t.toHours=t.toMinutes=t.toSeconds=t.toDuration=t.toMoment=t.toBytes=t.toBits=void 0;const n=r(3106);t.toBits=n.identity,t.toBytes=n.identity,t.toMoment=n.identity,t.toDuration=n.identity,t.toSeconds=n.identity,t.toMinutes=n.identity,t.toHours=n.identity,t.toDays=n.identity,t.toPortion=n.identity,t.toPercent=n.identity,t.toPerSeconds=n.identity,t.toPixels=n.identity},4423:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(6285),t),i(r(2008),t),i(r(3849),t)},963:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2846:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4957:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3850:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(963),t),i(r(4957),t),i(r(2846),t)},1299:(e,t)=>{"use strict";function r(e,t){try{return t(e)}catch(r){return e}}t.parse=function(e,t){if("string"!==typeof e)throw new TypeError("argument str must be a string");for(var i={},o=t||{},s=e.split(a),l=o.decode||n,c=0;c<s.length;c++){var d=s[c],u=d.indexOf("=");if(!(u<0)){var h=d.substr(0,u).trim(),f=d.substr(++u,d.length).trim();'"'==f[0]&&(f=f.slice(1,-1)),void 0==i[h]&&(i[h]=r(f,l))}}return i},t.serialize=function(e,t,r){var n=r||{},a=n.encode||i;if("function"!==typeof a)throw new TypeError("option encode is invalid");if(!o.test(e))throw new TypeError("argument name is invalid");var s=a(t);if(s&&!o.test(s))throw new TypeError("argument val is invalid");var l=e+"="+s;if(null!=n.maxAge){var c=n.maxAge-0;if(isNaN(c))throw new Error("maxAge should be a Number");l+="; Max-Age="+Math.floor(c)}if(n.domain){if(!o.test(n.domain))throw new TypeError("option domain is invalid");l+="; Domain="+n.domain}if(n.path){if(!o.test(n.path))throw new TypeError("option path is invalid");l+="; Path="+n.path}if(n.expires){if("function"!==typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");l+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(l+="; HttpOnly"),n.secure&&(l+="; Secure"),n.sameSite)switch("string"===typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}return l};var n=decodeURIComponent,i=encodeURIComponent,a=/; */,o=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},870:e=>{function t(e,t){var r,n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"===typeof btoa){var a=(r=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),o=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[n].concat(o).concat([a]).join("\n")}return[n].join("\n")}e.exports=function(e){var r=[];return r.toString=function(){return this.map((function(r){var n=t(r,e);return r[2]?"@media "+r[2]+"{"+n+"}":n})).join("")},r.i=function(e,t){"string"===typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var a=this[i][0];"number"===typeof a&&(n[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"===typeof o[0]&&n[o[0]]||(t&&!o[2]?o[2]=t:t&&(o[2]="("+o[2]+") and ("+t+")"),r.push(o))}},r}},6386:e=>{e.exports=function(e){e||(e=window);var t=e.navigator.userAgent,r=t.indexOf("MSIE ");if(r>0)return parseInt(t.substring(r+5,t.indexOf(".",r)),10);if(t.indexOf("Trident/")>0){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var i=t.indexOf("Edge/");return i>0&&parseInt(t.substring(i+5,t.indexOf(".",i)),10)}},6048:e=>{"use strict";var t=Array.isArray,r=Object.keys,n=Object.prototype.hasOwnProperty;e.exports=function e(i,a){if(i===a)return!0;if(i&&a&&"object"==typeof i&&"object"==typeof a){var o,s,l,c=t(i),d=t(a);if(c&&d){if((s=i.length)!=a.length)return!1;for(o=s;0!==o--;)if(!e(i[o],a[o]))return!1;return!0}if(c!=d)return!1;var u=i instanceof Date,h=a instanceof Date;if(u!=h)return!1;if(u&&h)return i.getTime()==a.getTime();var f=i instanceof RegExp,p=a instanceof RegExp;if(f!=p)return!1;if(f&&p)return i.toString()==a.toString();var m=r(i);if((s=m.length)!==r(a).length)return!1;for(o=s;0!==o--;)if(!n.call(a,m[o]))return!1;for(o=s;0!==o--;)if(!e(i[l=m[o]],a[l]))return!1;return!0}return i!==i&&a!==a}},502:(e,t,r)=>{"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.hasCookies=function(){var e=new d;try{e.setItem("__test","1");var t=e.getItem("__test");return e.removeItem("__test"),"1"===t}catch(r){return!1}};var o,s=r(1299),l=(o=s)&&o.__esModule?o:{default:o},c="lS_",d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.cookieOptions=n({path:"/"},t),c=void 0===t.prefix?c:t.prefix}return a(e,[{key:"getItem",value:function(e){var t=l.default.parse(document.cookie);return t&&t.hasOwnProperty(c+e)?t[c+e]:null}},{key:"setItem",value:function(e,t){return document.cookie=l.default.serialize(c+e,t,this.cookieOptions),t}},{key:"removeItem",value:function(e){var t=n({},this.cookieOptions,{maxAge:-1});return document.cookie=l.default.serialize(c+e,"",t),null}},{key:"clear",value:function(){var e=l.default.parse(document.cookie);for(var t in e)0===t.indexOf(c)&&this.removeItem(t.substr(c.length));return null}}]),e}();t.default=d},4585:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data={}}return r(e,[{key:"getItem",value:function(e){return this._data.hasOwnProperty(e)?this._data[e]:null}},{key:"setItem",value:function(e,t){return this._data[e]=String(t)}},{key:"removeItem",value:function(e){return delete this._data[e]}},{key:"clear",value:function(){return this._data={}}}]),e}();t.default=n},2741:(e,t,r)=>{"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=n(r(1402)),a=n(r(502)),o=n(r(4585)),s=null;s=(0,i.default)("localStorage")?window.localStorage:(0,i.default)("sessionStorage")?window.sessionStorage:(0,i.default)("cookieStorage")?new a.default:new o.default,t.ZP=s,i.default,a.default,o.default},1402:(e,t,r)=>{"use strict";function n(e){try{var t=window[e];return t.setItem("__test","1"),t.removeItem("__test"),!0}catch(r){return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"localStorage",t=String(e).replace(/storage$/i,"").toLowerCase();if("local"===t)return n("localStorage");if("session"===t)return n("sessionStorage");if("cookie"===t)return(0,i.hasCookies)();if("memory"===t)return!0;throw new Error("Storage method `"+e+"` is not available.\n    Please use one of the following: localStorage, sessionStorage, cookieStorage, memoryStorage.")};var i=r(502)},8139:e=>{"use strict";e.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(e,r)||(e[r]=t[r]);return e})},9591:e=>{e.exports.H="https://frontend.vh.yandex.ru/player"}},n={};e.m=r,e.n=t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},e.d=(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},e.f={},e.e=t=>Promise.all(Object.keys(e.f).reduce((r,n)=>(e.f[n](t,r),r),[])),e.u=e=>"js/lazy-init-multiroll.modern.js",e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},e.l=(r,n,i,a)=>{if(t[r])t[r].push(n);else{var o,s;if(void 0!==i)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")=="webpackStreamPlayerJsonp:"+i){o=d;break}}o||(s=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,e.nc&&o.setAttribute("nonce",e.nc),o.setAttribute("data-webpack","webpackStreamPlayerJsonp:"+i),o.src=r),t[r]=[n];var u=(e,n)=>{o.onerror=o.onload=null,clearTimeout(h);var i=t[r];if(delete t[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach(e=>e(n)),e)return e(n)},h=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),s&&document.head.appendChild(o)}},e.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.p="https://yastatic.net/yandex-video-player-iframe-api-bundles",(()=>{var t={209:0};e.f.j=(r,n)=>{var i=e.o(t,r)?t[r]:void 0;if(0!==i)if(i)n.push(i[2]);else{var a=new Promise((e,n)=>i=t[r]=[e,n]);n.push(i[2]=a);var o=e.p+e.u(r),s=new Error;e.l(o,n=>{if(e.o(t,r)&&(0!==(i=t[r])&&(t[r]=void 0),i)){var a=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+r+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}},"chunk-"+r,r)}};var r=(r,n)=>{var i,a,[o,s,l]=n,c=0;if(o.some(e=>0!==t[e])){for(i in s)e.o(s,i)&&(e.m[i]=s[i]);if(l)l(e)}for(r&&r(n);c<o.length;c++)a=o[c],e.o(t,a)&&t[a]&&t[a][0](),t[a]=0},n=self.webpackChunkwebpackStreamPlayerJsonp=self.webpackChunkwebpackStreamPlayerJsonp||[];n.forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n))})(),(()=>{"use strict";function t(e){return"function"===typeof e||"Function"===(e=>{const t=Jt.call(e);if(!t)return null;const r=t.match(Qt);if(!r)return null;const n=r[1];if(!n)return null;return n})(e)}function r(e){void 0===e&&(e=ar);const t=e();return()=>Math.max(0,e()-t)}function n(e){if(void 0===e)return vr.DEFAULT;const t=function(e){switch(e){case Er.DEFAULT_ERROR:return vr.DEFAULT;case Er.BROADCAST_AD_BLOCK_INIT_ERROR:case Er.AD_TYPE_IS_NOT_RECOGNIZED:case Er.AD_IS_ALREADY_PLAYING:case Er.MULTIROLL_INIT_ERROR:case Er.PLAY_AD_VIEWERS_ERROR:return vr.ADS;case Er.INVALID_METADATA:case Er.NO_STREAMS:case Er.INVALID_STREAM_URL:case Er.NO_DRM_CONFIG:return vr.CONFIG;case Er.YANDEX_RPC_ERROR:case Er.ON_TICK_ERROR:case Er.SAGA_ERROR:case Er.NO_HLS_JS_INSTANCE:case Er.REACT_COMPONENT_DID_CATCH_ERROR_INFO:case Er.RECOVER_TASK_ERROR:case Er.PRELOAD_SOURCE_FAILED:case Er.MEDIA_ERR_ABORTED:return vr.EXCEPTION;case Er.UNSUPPORTED_MEDIA_TYPE:case Er.NATIVE_HLS_NOT_SUPPORTED_ERROR:case Er.HLS_JS_NOT_SUPPORTED_ERROR:case Er.MEDIA_ERR_SRC_NOT_SUPPORTED:case Er.MEDIA_ERR_CUSTOM:case Er.MEDIA_ERR_DECODE:case Er.REPRESENTATION_CHANGE:return vr.MEDIA;case Er.SCRIPT_INIT_ERROR:case Er.META_INFO_REQUEST_FAILED:case Er.STRM_ABD_INVALID_RESPONSE:case Er.MANIFEST_NOT_FOUND:return vr.NETWORK_PLAYER;case Er.MEDIA_ERR_NETWORK:return vr.NETWORK_MEDIA;case Er.MPD_WIDEVINE_CERT_LOAD_ERROR:case Er.FAIRPLAY_CERT_LOAD_ERROR:case Er.FAIRPLAY_CREATE_MEDIA_KEYS_ERROR:case Er.FAIRPLAY_CREATE_KEY_SESSION_ERROR:case Er.FAIRPLAY_SPC_LOAD_ERROR:case Er.FAIRPLAY_CREATE_KEY_ERROR:case Er.FAIRPLAY_INVALID_CONTENT_ID:case Er.DRM_PROXY_ERROR:case Er.DRM_PROXY_ERROR_NEED_COOKIE:case Er.DRM_PROXY_ERROR_NEED_TEAM_LOGIN:case Er.DRM_PROXY_ERROR_NEED_VIEW_PERMISSION:case Er.DRM_PROXY_ERROR_SIGNATURE_EXPIRED:case Er.MEDIA_ERR_ENCRYPTED:case Er.FAIRPLAY_NOT_SUPPORTED:case Er.NO_DRM:case Er.DRM_INIT_ERROR:case Er.DRM_NO_INIT_DATA:case Er.DRM_CERT_LOAD_ERROR:case Er.DRM_NO_SUPPORTED_KEY_SYSTEM:case Er.DRM_FAILED_TO_CREATE_CDM:case Er.DRM_FAILED_TO_SET_MEDIA_KEYS:case Er.DRM_NO_LICENSE_SERVER:case Er.DRM_FAILED_TO_CREATE_SESSION:case Er.DRM_SESSION_ERROR:case Er.DRM_FAILED_TO_GENERATE_REQUEST:case Er.DRM_UNKNOWN_ERROR:return vr.DRM;case Er.REGIONAL_LIMITATION_MANIFEST:case Er.REGIONAL_LIMITATION_LEVEL:case Er.REGIONAL_LIMITATION_SEGMENT:return vr.REGIONAL;case Er.SIGNATURE_EXPIRED_MANIFEST:case Er.SIGNATURE_EXPIRED_LEVEL:case Er.SIGNATURE_EXPIRED_SEGMENT:return vr.ACCESS;case Er.BANNED_MANIFEST:case Er.BANNED_LEVEL:case Er.BANNED_SEGMENT:return vr.BANNED;case Er.NO_CODECS:return vr.NO_CODECS;case Er.NO_PLAYABLE_STREAMS:return vr.CANNOT_PLAY;case Er.NO_MSE:return vr.UNSUPPORTED_ENV}return vr.DEFAULT}(e);if(t!==vr.DEFAULT)return t;switch(e){case sr.BUFFER_FULL_ERROR:case sr.BUFFER_NUDGE_ON_STALL:case sr.BUFFER_STALLED_ERROR:case sr.FRAG_PARSING_ERROR:case sr.BUFFER_SEEK_OVER_HOLE:case sr.BUFFER_APPENDING_ERROR:case sr.PIPELINE_ERROR_DECODE:case sr.DECODER_ERROR_NOT_SUPPORTED:case sr.BUFFER_APPEND_ERROR:case sr.MEDIA_ELEMENT_ERROR_FORMAT_ERROR:case sr.REMUX_ALLOC_ERROR:case sr.BUFFER_ADD_CODEC_ERROR:case sr.DEMUXER_ERROR_COULD_NOT_OPEN:case sr.NS_ERROR_DOM_INVALID_STATE_ERR:case sr.CHUNK_DEMUXER_ERROR_APPEND_FAILED:case sr.FAILED_TO_INIT_DECODER:case sr.PIPELINE_ERROR_INITIALIZATION_FAILED:case sr.NS_ERROR_FAILURE:case sr.REQUEST_FAILED:case sr.PIPELINE_ERROR_EXTERNAL_RENDERER_FAILED:case sr.PIPELINE_ERROR_COULD_NOT_RENDER:case sr.NS_ERROR_DOM_MEDIA_METADATA_ERR:case sr.MEDIA_ELEMENT_ERROR_EMPTY_SRC_ATTRIBUTE:case sr.NS_ERROR_DOM_MEDIA_FATAL_ERR:case sr.MANIFEST_PARSING_ERROR:return vr.MEDIA;case sr.FRAG_LOAD_ERROR:case sr.MANIFEST_LOAD_ERROR:case sr.LEVEL_LOAD_ERROR:case sr.AUDIO_TRACK_LOAD_ERROR:return vr.NETWORK_MEDIA;case sr.FRAG_LOAD_TIME_OUT:case sr.MANIFEST_LOAD_TIME_OUT:case sr.LEVEL_LOAD_TIME_OUT:case sr.AUDIO_TRACK_LOAD_TIME_OUT:return vr.NETWORK_TIMEOUT;case sr.INTERNAL_EXCEPTION:case sr.ON_PLAYER_INIT_ERROR_INTERNAL:case sr.EXTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR:case sr.INTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR:case sr.LOAD_SKIN_ERROR:case sr.INSERT_INTO_WITH_SECURE_FRAME:case sr.PLAY_AD_VIEWERS_WITH_SECURE_FRAME:case sr.ERROR_SCREEN_LOAD_ERROR:return vr.EXCEPTION;case sr.UNABLE_TO_LOAD_PLAYER_IFRAME:case sr.ON_PLAYER_INIT_ERROR:case sr.LOADER_INIT_ERROR:case sr.UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT:case sr.FAILED_TO_DOWNLOAD_DEBUG_INFO:case sr.REQUEST_SOURCE_ERROR:return vr.NETWORK_PLAYER;case sr.PLAYER_CONTAINER_NOT_FOUND:case sr.KEY_LOAD_ERROR:case sr.FEATURE_HANDLER_ERROR:case sr.INVALID_CONFIG_ELEMENT_IN_CREATE_PLAYER:case sr.INVALID_CONFIG_LANG_IN_CREATE_PLAYER:case sr.INVALID_CONFIG_IN_CREATE_PLAYER:case sr.INVALID_CONFIG_IN_SET_SOURCE:case sr.INVALID_CONFIG_IN_SOURCE_UPDATE:case sr.IFRAME_DOES_NOT_ALLOW_DRM:case sr.DRM_IS_NOT_ALLOWED:case sr.ELEMENT_NOT_IN_DOM:case sr.INVALID_LOG_URL:case sr.SCREEN_WAKE_LOCK_ERROR:return vr.CONFIG}return vr.DEFAULT}function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function a(e){return"number"===typeof e&&isFinite(e)}function o(e){let t,n=Cr.Z,i=Cr.Z,o=Cr.Z,s=Cr.Z;e.once("Ready",e=>{t=e});const l=()=>{e.off("RequestPlayingState",n),e.off("PlayingStateChange",i),e.off("ContentImpression",o),e.off("AdPodStart",s)};e.on("StreamChange",()=>{let c;l();let d=!1,u=!1,h=Cr.Z,f=Cr.Z;const p=()=>{if(l(),d||!c||!c.engine)return;const{hasPreroll:e=!1,engine:r}=c,n=h(),i=f();a(n)&&(0,gr.Y)(()=>t.logDelta(e?kr[r]:wr[r],n)),a(i)&&(0,gr.Y)(()=>t.logDelta(e?Dr[r]:Nr[r],i))};n=e=>{let{playingState:t}=e;if(t===Or.X.PAUSE)return;h=r(),d=!(0,br.s)(document,!0);const n=(0,Ar.Y)(document,e=>{e||(d=!0,n())});void 0!==c?p():u=!0},i=e=>{let{playingState:t}=e;t===Or.X.BUFFERING?f=r():t===Or.X.PAUSE?f=()=>0:t===Or.X.PLAY&&l()},o=t=>{e.off("AdPodStart",s),t&&t.engine&&(c=t,u&&p())},s=()=>{c={engine:"AD",hasPreroll:!0},e.off("ContentImpression",o),u&&p()},e.once("RequestPlayingState",n),e.on("PlayingStateChange",i),e.once("ContentImpression",o),e.once("AdPodStart",s)})}function s(e){const t=e;return t.Ya||(t.Ya={}),t.Ya.streamPlayer||(t.Ya.streamPlayer={}),t.Ya.streamPlayer}function l(e,t){return e+"/"+t}function c(e){if("string"===typeof e&&(e={message:e}),"object"===typeof e&&null!==e||(e={}),"function"===typeof e.toJSON)try{return{__stringifyError:e.toJSON()}}catch(i){}const{name:t,message:r,stack:n}=e;return{__stringifyError:{name:t,message:r,stack:n}}}function d(e,t,r,n){const i=h(e[t],l(r,t),n);return void 0===i?"null":i}function u(e){return JSON.stringify(e)}function h(e,t,r){switch(typeof e){case"boolean":return e?"true":"false";case"string":return u(e);case"undefined":return;case"bigint":return u(e.toString());case"function":return u("[Function"+("string"===typeof e.name&&e.name.length>0?" "+e.name:"")+"]");case"symbol":return u("[Symbol]");case"number":return isNaN(e)||!isFinite(e)?"null":String(e);case"object":if(null===e)return"null";if(n=e,"[object Window]"===Object.prototype.toString.call(n))return u("[object Window]");if((0,jr.m)(e))return u("[DOMNode "+e.tagName+"]");if(function(e){return"undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}(e)){const{name:t}=e.constructor;return u("["+(t||"TypedArray")+"("+(e.byteLength||0)+")]")}const i=r.get(e);if(void 0!==i)return u("[Circular "+i+"]");r.set(e,t);return Br(e)?function(e,t,r){if(0===e.length)return"[]";let n="["+d(e,0,t,r);for(let i=1;i<e.length;i++)n+=","+d(e,i,t,r);return n+"]"}(e,t,r):function(e,t,r){if("function"===typeof e.toJSON){let n;try{n=e.toJSON()}catch(Kn){n=c(Kn)}return h(n,l(t,"toJSON"),r)}let n="{",i=!0;for(let a in e){if(!Object.prototype.hasOwnProperty.call(e,a))continue;let o;try{o=e[a]}catch(Kn){o=c(Kn)}const s=h(o,l(t,a),r);void 0!==s&&(i?i=!1:n+=",",n+=u(a)+":"+s)}return n+"}"}(e,t,r)}var n}function f(e){try{return h(e,"~",function(){const e="undefined"!==typeof WeakMap?new WeakMap:void 0,t=[];return{set:(r,n)=>{if(void 0!==e)try{e.set(r,n)}catch(i){t.push({path:n,value:r})}else t.push({path:n,value:r})},get:r=>{const n=Ur(t,e=>e.value===r);return void 0!==e&&void 0===n?e.get(r):n?n.path:void 0}}}())}catch(Kn){return JSON.stringify(c(Kn))}}function p(e){const t=e.document;let r=t.getElementsByTagName("head")[0];return r||(r=t.createElement("head"),t.documentElement.appendChild(r)),r}function m(){return(m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e){const{dropCacheOnRetry:t=!1,onBeforeLoad:r=Kr,retries:n=0}=e;if(e.checkLoad&&e.checkLoad())return void(e.onLoad&&e.onLoad());let i=r,a=0;return t&&n>0&&(i=e=>{if(r(e),a>0){const t=-1===e.src.indexOf("?")?"?":"&",r=function(e){const t=1e9;let r=Math.floor(Math.random()*t)%t;return Number.isFinite(r)||(r=0),r+=Date.now()%t,String(e)+r.toString(36)}(a);e.src+=t+r}a++}),function e(t){const{src:r,win:n=window,charset:i="utf-8",async:a=!0,retries:o=0,onRetry:s=Kr,retryDelay:l=0,checkLoad:c=Hr,onBeforeLoad:d=Kr,onLoad:u=Kr,onError:h=Kr}=t,f=n.document.createElement("script"),g=n=>{var i;o>0?(s(n),e(m({},t,{src:r,retries:o-1}))):h(n),null==(i=f.parentNode)||i.removeChild(f)};f.type="text/javascript",f.async=a,f.onload=()=>c(f)?u():g(new Error("checkLoad for "+r+" failed")),f.onerror=e=>{try{n.setTimeout(()=>{g(e)},l)}catch(t){}},f.src=r,f.charset=i,d(f),p(n).appendChild(f)}(m({},e,{onBeforeLoad:i}))}function y(){return(y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v(e){return new Promise((t,r)=>{g(y({},e,{onLoad:t,onError:r}))})}function E(){return(E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _(){return(_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function S(e){return new Promise((t,r)=>{!function(e){const{win:t=window,src:r,retries:n=0,onLoad:i=Gr.Z,onError:a=Gr.Z}=e,o=new Wr({id:"LOAD_SCRIPT_ERROR",message:"Failed to load script ["+r+"]",details:{src:r,isSelfWindow:t===window,onBeforeLoad:Boolean(e.onBeforeLoad),retries:n}});v(E({},e,{win:t})).then(i).catch(()=>a(o))}(_({},e,{onLoad:t,onError:r}))})}function R(e){let{win:t=window,src:r,checkLoad:n,onBeforeLoad:i=Cr.Z,onLoad:a=Cr.Z,withCredentials:o=!1}=e;Zt["ll1.0-11679"]=Zt["ll1.0-11679"]||{};const s=Zt["ll1.0-11679"];return s[r]||(s[r]=S({checkLoad:n,win:t,src:r,retries:3,dropCacheOnRetry:!0,onBeforeLoad:e=>{o||(e.crossOrigin="anonymous"),i()}}).then(a),s[r].catch(()=>delete s[r])),s[r]}function b(e,t,r){return(r?"https://yastatic.net/yandex-video-player-iframe-api-bundles-stable":"https://yastatic.net/yandex-video-player-iframe-api-bundles")+"/1.0-"+t+"/js/"+e}function A(e){let{modern:t,lang:r}=e;return b(function(e){let{modern:t,lang:r}=e;return"skin_"+r+(t?".modern":"")+".js"}({modern:t,lang:r}),11679,!1)}function T(e){const t=window;let r=!1;return e.player.once(Lr.Destroy,()=>r=!0),R({src:A({modern:e.modern,lang:Mr.i18nLang?Mr.i18nLang:"ru"}),checkLoad:()=>(0,_r.K)(t.Ya)&&(0,_r.K)(t.Ya.playerSkin)&&(0,xr.m)(t.Ya.playerSkin.create)}).then(()=>{if(!r)return t.Ya.playerSkin.create(e)})}function P(){return(P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function O(e,t){Zt.timeAPIInit=ar();const n=t(e),i=(0,Pr.K)(n.getDebugConfig().logCalls);!function(e,t){if(void 0===t&&(t=!0),!(0,br.s)(document,!0))return;let n=!1;const i=(0,Ar.Y)(document,e=>{e||(n=!0,i())}),a=t?"loader":"create",o=0===Tr++,s=o?a+".player.firstready":a+".player.ready",l=o?a+".player.firststart":a+".player.start",c=r();let d,u=!0;e.once("Ready",e=>{const t=c();d=e,(0,gr.Y)(()=>{n||e.logDelta(s,t,{initSubpage:!0})})}),e.once("ResourcesIdle",()=>{u=!1}),e.once("ContentImpression",()=>{const e=c();!n&&u&&void 0!==d&&(0,gr.Y)(()=>d.logDelta(l,e,{initSubpage:!0}))})}(i,!1),!0!==e.skipPlayRumLogger&&o(i);const{setReadyInstance:a,setInstance:s}=i,l=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(i,Xr);s(n),n.once(Lr.Ready,a),n.once(Lr.SkinReady,()=>l.skin=n.skin);const{loadSkin:c=T}=e,d=c===T;n.on(Lr.RequestFullscreenStateChange,async e=>{d&&!n.skin&&n.once(Lr.SkinReady,()=>{n.emit(Lr.RequestFullscreenStateChange,e)})});const u=(0,zt.I)(async()=>{if(!1===c)return;if(n.getReadyState()===Zr.k.destroyed)return;const t=e.skinParams||{};try{if(d){const e=r();n.once(Lr.SkinReady,t=>{let{error:r}=t;n.logSkinDelta(r?"skin.error":"skin.load",e(),{initSubpage:!0})})}n.skin=await c(P({},t,{container:n.getContainer(),player:l,modern:!0},d?{flags:e.flags}:{})),n.emit(Lr.SkinReady,{})}catch(i){n.logError(new Rr({code:sr.LOAD_SKIN_ERROR,isFatal:!1,details:i})),n.setNativeControlsVisibility(!0),n.setNativeAdControlsVisibility(!0),n.emit(Lr.SkinReady,{error:i})}}),h=e=>{let{error:t}=e;t&&t.isFatal&&u()};n.once(Lr.ErrorChange,h);return Promise.all([new Promise(e=>n.once(Lr.Ready,e)),Promise.race([new Promise(e=>setTimeout(e,1e4)),new Promise(e=>n.once(Lr.ResourcesIdle,e))])]).then(()=>{n.off(Lr.ErrorChange,h),u()}),l}function I(e,t){const r=e.style;for(const n in t)if(t.hasOwnProperty(n)){r[rn(n)]=t[n]}}function C(e){return e instanceof Date||"Date"===(0,Sr.M)(e)}function w(e,t){void 0===t&&(t=window);return("function"===typeof t.getComputedStyle?t.getComputedStyle(e,null):e.currentStyle)||{}}function k(e){const t=e.getRootNode;if((0,xr.m)(t))return t.call(e);let r=e;for(;r.parentNode;)r=r.parentNode;return r}function N(e){return Boolean(e)&&"ShadowRoot"===(0,Sr.M)(e)}function D(e){const t=e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;let r=e;for(;r;){if(r&&t.document.body.contains(r))return!0;const e=k(r);if(!N(e)||!on(e.host))return!1;r=e.host}return!1}function L(e,t){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function x(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];(0,nn.k)(e)&&e.forEach(e=>{"function"===typeof e&&e(...r)})}function M(e){e&&"function"===typeof e.catch&&e.catch(e=>{})}function F(e){if(!e)return;const{parentElement:t}=e;t&&t.removeChild(e)}function V(e,t){if(void 0===t&&(t=!0),cn.$&&t)return[];const r=[];let n=e;for(;;)try{if(n=n.ownerDocument.defaultView.frameElement,!n)return r;r.push(n)}catch(Kn){return r}}function U(e,t){!function(e){return"function"===typeof e.dispatch}(e)?e(t):e.dispatch(t)}function j(e,t){e.forEach(e=>{U(e,t)})}function B(e,t){void 0===t&&(t=!1);const r=e.code;if(r===Er.NO_CODECS&&vn&&En>6)return{title:"NO_CODECS_TITLE",message:"NO_CODECS_MESSAGE",helpLink:"https://yandex.ru/support/video-player/player-issues.html#no-codecs",helpLinkButtonText:"NO_CODECS_HELP_LINK_TITLE"};if(r===Er.DRM_PROXY_ERROR_NEED_COOKIE)return{title:"NEED_COOKIE_TITLE",message:"NEED_COOKIE_MESSAGE",helpLink:e.helpLink||void 0,helpLinkButtonText:"NEED_COOKIE_HELP_LINK_TITLE"};if(r===Er.DRM_PROXY_ERROR_NEED_TEAM_LOGIN)return{title:"NEED_TEAM_LOGIN_TITLE",message:"NEED_TEAM_LOGIN_MESSAGE",helpLink:e.helpLink||void 0,helpLinkButtonText:"NEED_TEAM_LOGIN_HELP_LINK_TITLE"};if(r===Er.DRM_PROXY_ERROR_NEED_VIEW_PERMISSION)return{title:"NEED_VIEW_PERMISSION_TITLE",message:"NEED_VIEW_PERMISSION_MESSAGE",helpLink:e.helpLink||void 0,helpLinkButtonText:"NEED_VIEW_PERMISSION_HELP_LINK_TITLE"};const i=n(r);return t&&function(e){return[vr.NETWORK_PLAYER,vr.NETWORK_MEDIA,vr.NETWORK_TIMEOUT,vr.DRM,vr.ADS].indexOf(e)>-1}(i)?{title:"ADBLOCK_DETECTED_TITLE",message:"ADBLOCK_DETECTED_MESSAGE",helpLink:"https://yandex.ru/support/video-player/blocker-settings.html",helpLinkButtonText:"ERROR_SCREEN_DEFAULT_HELP_LINK"}:function(e){return{title:Sn[e],message:Rn[e],helpLink:_n[e],helpLinkButtonText:bn[e]||"ERROR_SCREEN_DEFAULT_HELP_LINK"}}(i)}function Y(e){return(t=e.supportInfo).supported&&void 0!==t.engine;var t}function q(e){return void 0===e?[]:(e.testIds||"").split(",").map(e=>parseInt(e,10)).filter(a)}function W(e,t){function r(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Yn(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function G(e,t,r,n){return new(r=r||Promise)((function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))}function K(e,t){function r(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,(r=a?[2&r[0],a.value]:r)[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=0<(a=o.trys).length&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(s){r=[6,s],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}var n,i,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},s={next:r(0),throw:r(1),return:r(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function H(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Z(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o}function X(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e}function z(e){return new Bi({values:e,typeName:Ci.ZodEnum})}function J(e){return void 0===e?void 0:Boolean(e)}function Q(e){return"number"===typeof e&&0<=e&&e<=1}function $(e){var t;return function(e){if(0===e.length)return[];e=(()=>{const t=function(e,t){for(let r=e.length-1;r>=0;--r)if(e[r]===t)return r;return-1}(e,xa.ALL);return-1!==t?[...Xa,...e.splice(t+1)]:e})();const t=new Map;return e.reverse().forEach(e=>{const r="!"===e[0],n=r?e.slice(1):e;t.has(n)||t.set(n,r)}),[...t.entries()].filter(e=>{let[t,r]=e;return!r}).map(e=>{let[t]=e;return t}).reverse()}(void 0===(t=e)?[]:Array.isArray(t)?t.filter(Ja):String(t).split(",").map(e=>e.trim()).filter(Ja))}function ee(e){return"function"===typeof Object.entries?Object.entries(e):(0,La.Z)(e).map(t=>[t,e[t]])}function te(){return(te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function re(e,t){var r,n;if(!e.servers)return e;const i={},{vsid:a,sourceIndex:o}=t,s=e=>(0,ro.Sr)(e,{vsid:a,source_index:String(o)},{override:!0,saveOriginalPath:!0});ee(e.servers).forEach(e=>{let[t,r]=e;!function(e){const{hostname:t}=(0,ro.en)(e);return-1!==no.indexOf(t)}(r)?i[t]=r:i[t]=s(r)});const l=te({},e);l.servers=i;const c=l;return null!=(r=c.advanced)&&null!=(n=r["com.widevine.alpha"])&&n.serverCertificateUrl&&(c.advanced=te({},c.advanced,{"com.widevine.alpha":te({},c.advanced["com.widevine.alpha"],{serverCertificateUrl:s(c.advanced["com.widevine.alpha"].serverCertificateUrl)})})),function(e){if(!(0,_r.K)(e))return!1;if(!(0,_r.K)(e.servers)||!("com.apple.fps.1_0"in e.servers))return!1;if(!(0,_r.K)(e.advanced)||!("com.apple.fps.1_0"in e.advanced))return!1;const t=e.advanced["com.apple.fps.1_0"];if(!(0,_r.K)(t))return!1;const{processSPCPath:r}=t;return(0,yr.H)(r)}(l)&&(l.advanced=te({},l.advanced,{"com.apple.fps.1_0":te({},l.advanced["com.apple.fps.1_0"],{processSPCPath:s(l.advanced["com.apple.fps.1_0"].processSPCPath)})})),l}function ne(){return(ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ie(e){const t=e.filter(a).sort().join(",");return t.length>0?t:void 0}function ae(e){return ie(e.map(e=>parseInt(e,10)))}function oe(e){try{return JSON.stringify(e),!0}catch(Kn){return!1}}function se(e,t){void 0===e&&(e={});const r={};return function(e,t){for(const r in t)(0,Ro.n)(t,r)&&(e[r]=t[r])}(r,e),bo.forEach(e=>{"undefined"===typeof r[e]&&"undefined"!==typeof t[e]&&(r[e]=t[e])}),r}function le(e){let t=function(e){let{PI:t,min:r,max:n,cos:i,round:a}=Math,o=e[0]|e[1]<<8|e[2]<<16,s=e[3]|e[4]<<8,l=(63&o)/63,c=(o>>6&63)/31.5-1,d=(o>>12&63)/31.5-1,u=(o>>18&31)/31,h=o>>23,f=(s>>3&63)/63,p=(s>>9&63)/63,m=s>>15,g=n(3,m?h?5:7:7&s),y=n(3,m?7&s:h?5:7),v=h?(15&e[5])/15:1,E=(e[5]>>4)/15,_=h?6:5,S=0,R=(t,r,n)=>{let i=[];for(let a=0;a<r;a++)for(let o=a?0:1;o*r<t*(r-a);o++)i.push(((e[_+(S>>1)]>>((1&S++)<<2)&15)/7.5-1)*n);return i},b=R(g,y,u),A=R(3,3,1.25*f),T=R(3,3,1.25*p),P=h&&R(5,5,E),O=function(e){let t=e[3],r=128&e[2],n=128&e[4];return(n?r?5:7:7&t)/(n?7&t:r?5:7)}(e),I=a(O>1?32:32*O),C=a(O>1?32/O:32),w=new Uint8Array(I*C*4),k=[],N=[];for(let D=0,L=0;D<C;D++)for(let e=0;e<I;e++,L+=4){let a=l,o=c,s=d,u=v;for(let r=0,l=n(g,h?5:3);r<l;r++)k[r]=i(t/I*(e+.5)*r);for(let e=0,r=n(y,h?5:3);e<r;e++)N[e]=i(t/C*(D+.5)*e);for(let e=0,t=0;e<y;e++)for(let r=e?0:1,n=2*N[e];r*y<g*(y-e);r++,t++)a+=b[t]*k[r]*n;for(let e=0,t=0;e<3;e++)for(let r=e?0:1,n=2*N[e];r<3-e;r++,t++){let e=k[r]*n;o+=A[t]*e,s+=T[t]*e}if(h)for(let e=0,t=0;e<5;e++)for(let r=e?0:1,n=2*N[e];r<5-e;r++,t++)u+=P[t]*k[r]*n;let f=a-2/3*o,p=(3*a-f+s)/2,m=p-s;w[L]=n(0,255*r(1,p)),w[L+1]=n(0,255*r(1,m)),w[L+2]=n(0,255*r(1,f)),w[L+3]=n(0,255*r(1,u))}return{w:I,h:C,rgba:w}}(e);return function(e,t,r){let n=4*e+1,i=6+t*(5+n),a=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,e>>8,255&e,0,0,t>>8,255&t,8,6,0,0,0,0,0,0,0,i>>>24,i>>16&255,i>>8&255,255&i,73,68,65,84,120,1],o=[0,498536548,997073096,651767980,1994146192,1802195444,1303535960,1342533948,-306674912,-267414716,-690576408,-882789492,-1687895376,-2032938284,-1609899400,-1111625188],s=1,l=0;for(let c=0,d=0,u=n-1;c<t;c++,u+=n-1)for(a.push(c+1<t?0:1,255&n,n>>8,255&~n,n>>8^255,0),l=(l+s)%65521;d<u;d++){let e=255&r[d];a.push(e),s=(s+e)%65521,l=(l+s)%65521}a.push(l>>8,255&l,s>>8,255&s,0,0,0,0,0,0,0,0,73,69,78,68,174,66,96,130);for(let[c,d]of[[12,29],[37,41+i]]){let e=-1;for(let t=c;t<d;t++)e^=a[t],e=e>>>4^o[15&e],e=e>>>4^o[15&e];e=~e,a[d++]=e>>>24,a[d++]=e>>16&255,a[d++]=e>>8&255,a[d++]=255&e}return"data:image/png;base64,"+btoa(String.fromCharCode(...a))}(t.w,t.h,t.rgba)}function ce(e){const t=atob(e);let r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return le(r)}function de(){return(de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ue(){return(ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function he(e,t,r){const n=ue({},Ao.parse(e),{sourceIndex:r}),{vsid:i,vpuid:a}=t;n.params.additionalParams.vsid=i,n.params.additionalParams=ue({},to,n.params.additionalParams,{vsid:i});const o=(0,Po.r)(),{testIds:s,slots:l}=function(e){const{testIds:t,slots:r}=lo.parse({testIds:null==e?void 0:e.testids,slots:null==e?void 0:e.slots});return{testIds:t,slots:r}}({slots:o.slots,testids:o.testids}),c=(0,To.S)(n.params.additionalParams.slots,l),d=function(){const e={};for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.filter(Boolean).join(",").split(",").forEach(t=>{if(!/^\d+$/.test(t))return;const r=parseInt(t,10);e[r]=null});const i=Object.keys(e);return 0<i.length?i.join(","):void 0}(n.params.additionalParams.testIds,s);n.params.additionalParams=ue({},n.params.additionalParams,c?{slots:c}:{},d?{testIds:d}:{}),n.params.posterStyle=ue({objectFit:t.objectFit},n.params.posterStyle);const{adConfig:u}=n.params;return void 0!==u&&void 0===u.skinType&&(u.skinType=function(e){return void 0===e.loadSkin?"defaultInstream":void 0}(t)),n.streams=n.streams.map(e=>ue({},e,{drmConfig:e.drmConfig?re(e.drmConfig,{vsid:i,sourceIndex:r}):void 0,url:(0,ro.Sr)(e.url,{vsid:i,vpuid:a,source_index:String(r)},{override:!0,saveOriginalPath:!0})})),n}function fe(e){if(!(0,_r.K)(e))return!1;const{utcStart:t,utcEnd:r}=e;return(void 0===t||a(t))&&(void 0===r||a(r))}function pe(e){return Array.isArray(e)?e.filter(e=>"string"===typeof e):[]}function me(e){if(!(0,_r.K)(e))return{init:[],start:[],end:[],setSource:[],adStart:[],adRequest:[],adError:[],adEnd:[],adPodStart:[],adPodClick:[],adPodEnd:[],adPodSkip:[],sourceStart:[],play:[],pause:[],seek:[],firstQuartile:[],midpoint:[],thirdQuartile:[],viewed:[],heartbeat:[],watchedTime:[],error:[]};const{init:t,start:r,end:n,setSource:i,adRequest:o,adError:s,adStart:l,adEnd:c,adPodStart:d,adPodClick:u,adPodEnd:h,adPodSkip:f,sourceStart:p,play:m,pause:g,seek:y,firstQuartile:v,midpoint:E,thirdQuartile:_,viewed:S,heartbeat:R,watchedTime:b,error:A}=e;return{init:pe(t),start:pe(r),end:pe(n),setSource:pe(i),adRequest:pe(o),adError:pe(s),adStart:pe(l),adEnd:pe(c),adPodStart:pe(d),adPodClick:pe(u),adPodEnd:pe(h),adPodSkip:pe(f),sourceStart:pe(p),play:pe(m),pause:pe(g),seek:pe(y),firstQuartile:pe(v),midpoint:pe(E),thirdQuartile:pe(_),heartbeat:(O=R,Array.isArray(O)?O.filter(e=>{if(!Array.isArray(e)||2!==e.length)return!1;const[t,r]=e;if("string"!==typeof t||!fe(r))return!1;const{offset:n,delay:i,callsCount:o}=r;return"number"===typeof i&&(void 0===n||a(n))&&(void 0===o||"number"===typeof o&&o>0)}):[]),viewed:(P=S,Array.isArray(P)?P.filter(e=>{if(Array.isArray(e)&&2===e.length){const[t,r]=e;if("string"!==typeof t)return!1;if(!(0,_r.K)(r))return!1;{const{percent:e}=r;if("number"!==typeof e)return!1}return!0}return!1}):[]),watchedTime:(T=b,Array.isArray(T)?T.filter(e=>{if(!Array.isArray(e)||2!==e.length)return!1;const[t,r]=e;if("string"!==typeof t||!(0,_r.K)(r))return!1;const{offset:n}=r;return fe(r)&&"number"===typeof n}):[]),error:pe(A)};var T,P,O}function ge(e){if(void 0===e||!(0,_r.K)(e))return Oo;const{trackingEvents:t}=e;return{trackingEvents:(Array.isArray(t)?t:[t]).map(me)}}function ye(){return(ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ve(e,t,r){return ye({},function(e){return(0,_r.K)(e)?Co.parse(e):Co.parse({})}(e),{source:he(e,t,r)})}function Ee(e){if(void 0===e)return;const t=e&&e.match&&e.match(No);if(t&&t[1])return parseInt(t[1],10);throw new Error("paramsObject.version must be a string like [1.0-0] or undefined")}function _e(e,t){return void 0===t&&(t=window),(0,ka.O)(wa.Xy,e=>e&&parseInt(e,10),t)||Ee(e)}function Se(e,t){return t?wo.PLAYER_API_MOCK:Do&&(e=>{0;try{const t=(0,yr.H)(e)?Ee(e):e;return"number"===typeof t&&t>=1410}catch(t){return!1}})(e||Vo)?wo.PLAYER_API_MODERN:wo.PLAYER_API}function Re(e){void 0===e&&(e=window);const{userAgent:t=""}=e.navigator,r=/Android/.test(t),n=Uo(e),i=/com\.yandex\.mobile\.metrica\.ads\.sdk.*?Android/.test(t);return r&&!n||i}function be(e,t){void 0===t&&(t={});const{silent:r=!0,allowRelative:n=!1}=t;return n||function(e){const t=e.trim();return"//"===t.substr(0,2)||"http://"===t.substr(0,7)||"https://"===t.substr(0,8)}(e)?new Promise((t,n)=>{const i=document.createElement("img");i.onload=()=>t(e),i.onerror=r?()=>t(null):()=>n(new Error("knockPixel failed to load image ["+e+"]")),i.src=e}):r?Promise.resolve(null):Promise.reject("["+e+"] is not an absolute url, to knock this pixel use { allowRelative: true } option")}async function Ae(e){let{url:t,data:r,contentType:n}=e;if(((e,t)=>{if("function"!==typeof navigator.sendBeacon)return!1;try{return navigator.sendBeacon(e,t)}catch(r){return!1}})(t,n?new Blob([r],{type:n}):r))return;const i=new XMLHttpRequest;i.open("POST",t),i.withCredentials=!0,void 0!==n&&i.setRequestHeader("Content-Type",n),i.send(r)}function Te(e){let[t,{offset:r,utcStart:n,utcEnd:i}]=e;return[t,{offset:r,utcStart:n,utcEnd:i,delay:1/0,callsCount:1}]}function Pe(e,t){return e.map(e=>[e,{percent:t}])}function Oe(e){if("string"===typeof e)return"plain-url="+e;const[t,{utcStart:r="none",offset:n="none",delay:i="none"}]=e;return"url="+t+"|"+r+"/"+n+"/"+i}function Ie(e){return void 0===e?"":"inroll"===e?"midroll":"postPauseroll"===e?"pauseroll":e}function Ce(){return(Ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function we(e){const{location:t,referrer:r}=e;return{location:(0,ss.b)(window),topLocation:t,referrer:window.document.referrer,topReferrer:r}}function ke(e){let t="",r="";if(e){(function(e){const t=V(e.documentElement).map(e=>e.ownerDocument);return t.unshift(e),t.map(e=>({location:(0,ss.b)(e.defaultView),referrer:e.referrer}))})(e).reverse().forEach(e=>{let{location:n,referrer:i}=e;t=t||n,r=r||i})}return{location:t,referrer:r}}function Ne(e,t){return function(e,t){if(e.status===t.status)return 0;if(e.status===mn.OFFLINE)return 1;return-1}(e,t)||function(e,t){return String.prototype.localeCompare.call(e.name,t.name)}(e,t)}function De(){return(De=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Le(e){let t=0;var r;return(0,us.W)(De({},e,{checkStatus:e=>(t=e,304===t||t>=200&&t<300),url:(r=e.url,r.replace(/<tld>/g,ds))})).then(e=>e.responseText).catch(e=>{throw e.status=t,e})}function xe(e){return{name:e.name,bitrate:e.bitrate,lang:e.lang}}function Me(e){return"undefined"===typeof e?null:{name:e.name,lang:e.lang}}function Fe(e){return{auto:e.auto,name:e.name,bitrate:e.bitrate,width:e.width,height:e.height}}function Ve(){return(Ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ue(e){void 0===e&&(e={});const t={};for(const r in e){const n=e[r],i=typeof n;"string"!==i&&"number"!==i&&"boolean"!==i||(t[r]=n)}return t}function je(){const{plugins:e}=window.navigator;return void 0===e||0===e.length?[]:ln(e,Ue)}function Be(){const e=window.navigator||{},t=window.performance||{},{location:r,referrer:n}=ke(document);return{navigator:Ve({},Ue(e),{connection:Ue(e.connection),plugins:je()}),performance:{memory:Ue(t.memory)},playerLocation:location.href,iframeApiLocation:r,iframeApiReferrer:n}}function Ye(e){let{videoType:t,currentTime:r,dvrStartTime:n,dvrDuration:i}=e;if(void 0===t||t===rs.VOD)return Nn;if(i===1/0||r>n+i-10)return vs;if(t!==rs.LIVE)return Nn;return n+(0===r?0:10)>r?ys:Nn}function qe(e,t){const r=document.createElement("style");r.textContent+=e,t?t.appendChild(r):p(window).appendChild(r)}function We(e){const t=function(e,t){let{content:r,size:n}=void 0===t?{}:t;const i=e.ownerDocument.createElement("iframe");i.scrolling="no",i.setAttribute("allowfullscreen",""),i.style.display="block",n&&(i.height=n.height,i.width=n.width),e.appendChild(i);const a=i.contentDocument;a.open(),r&&a.write(r),a.close();try{a.body.style.margin="0"}catch(o){}return i.style.borderWidth="0",i}(e);return t.width="0",t.height="0",t.style.position="absolute",t}function Ge(e){let t,{vsid:r,container:n}=e;return t=function(e,t){void 0===t&&(t=document);const r=We(t.body);return r.id="ya-video-player-frame-"+e,r}(r),n.appendChild(function(e){_s();const t=document.createElement("yaplayertag");return t.id=function(e){return"ya-video-player-"+e}(e),I(t,{width:"100%",height:"100%",position:"relative",overflow:"hidden",display:"block"}),t}(r)),t}function Ke(){return(Ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function He(e,t,r,n){const i=function(e){let t=!1,r=!1,n=!1;return!0===e?t=!0:"object"===typeof e&&(t=Boolean(e.capture),r=Boolean(e.passive),n=Boolean(e.once)),{capture:t,passive:r,once:n}}(n),a=ks?i:i.capture,o=i.once&&!Cs?function(e){s(),r.call(this,e)}:r,s=()=>{Is(e,t,o,a)};return Os(e,t,o,a),s}function Ze(e,t){return Ns.some(r=>{if(!e[r.element])return!1;let n=t;for(;n;){if(e[r.element]===n)return!0;n=n.parentElement}return!1})}function Xe(e){if(e&&function(e){const t=(0,ro.en)(e).pathname;return 0===t.indexOf("/vod/")||0===t.indexOf("/live/")||0===t.indexOf("/kal/")}(e))return(0,ro.Sr)(e,{json_preview:"1",preview_version:"4"})}function ze(){return(ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Je(){this.returnValue=!1}function Qe(){this.cancelBubble=!0}function $e(e){return function(t){const r=function(e){return e.stopPropagation||(e.stopPropagation=Qe),e.preventDefault||(e.preventDefault=Je),e.target||(e.target=e.srcElement),e}(t);e.call(this,r)}}function et(e){e&&e.un()}function tt(e,t,r){return Math.max(Math.min(t,r)-Math.max(e,0),0)}function rt(e){const t=Hs(e),r=t.width,n=t.height;let i=0;if(r>0&&n>0){const e={width:window.innerWidth,height:window.innerHeight};i=tt(t.left,t.right,e.width)*tt(t.top,t.bottom,e.height)/(r*n)}return i}function nt(){return(nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function it(){return(it=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function at(e){let{playingState:t}=e;return t===Or.X.BUFFERING||t===Or.X.PLAY}function ot(e){let{playingState:t}=e;return t===Or.X.PLAY}function st(){return(st=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function lt(){return((e,t)=>{for(let r=0;r<e.length;r++)if(t(e[r],r,e))return!0;return!1})(sl,e=>{let[t,r]=e;const n=function(e,t){void 0===t&&(t=window);const r=(0,yn.i)(t),n=new RegExp("\\b"+e+"/((?:\\d+)(?:\\.\\d+)*)\\b","i"),i=r.match(n);if(i)return i[1].split(".").map(e=>parseInt(e,10))}(t);if(void 0===n)return!1;const[i]=n;return i<r})}function ct(){return ol||jo&&function(){const e=il<5;return lt()||e}()}function dt(){return ct()||(window,!1)}function ut(){return!dt()&&((jo||Yo||nl)&&!ct())}function ht(){return(ht=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ft(){return(ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function pt(e){const t=[...e],r=t.pop();if(!r||0===t.length)throw new Error("memoizeSingle need at least 2 functions as arg");return{preparers:t,resolver:r}}function mt(e){return(0,yr.H)(e.className)?e.className:e.namespaceURI===Sl&&e.getAttribute("class")||""}function gt(e,t){(0,yr.H)(e.className)?e.className=t:e.namespaceURI===Sl&&e.setAttributeNS("","class",t)}function yt(e,t){void 0===t&&(t=""),0!==e.className.length?bl(e)?Pl(e,t):function(e,t){let r=mt(e).split(" ").concat(t.split(" "));r=function(e){const t={};for(let r=0;r<e.length;r++)t[e[r]]=r;return(0,La.Z)(t)}(Yr(r,(function(e){return""!==e}))),gt(e,r.join(" "))}(e,t):e.className=t}function vt(e){const t=e.createElement("div");return I(t,Nl),t}function Et(){const e=document.createElement("div");I(e,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"});const t=document.createElement("div");return e.appendChild(t),I(t,{color:"#fff",fontFamily:'"Helvetica Neue",Helvetica,Arial,sans-serif',fontSize:"16px",lineHeight:"19px",textShadow:"0 0 3px #000",textAlign:"center",margin:"0 10px 20px 10px"}),{wrapper:e,setText:e=>{t.textContent=e}}}function _t(e){let{document:t,poster:r,firstFrameHash:n,firstFrameUrl:i,style:a,onReady:o,hiddenControls:s=[],primaryColor:l=rl,backgroundColor:c}=e;const d=t.createElement("div");I(d,{width:"100%",height:"100%",display:"block",position:"relative",pointerEvents:"none",backgroundColor:c});const u=new El({container:d,onReady:o,src:r,firstFrameUrl:i,firstFrameHash:n,style:a}),h=vt(t);let f;-1===s.indexOf(xa.ALL)&&-1===s.indexOf(xa.PRELOADER)&&(f=function(e){let{document:t,primaryColor:r,isMobileSkin:n=!1}=e;kl();const i=t.createElement("div");yt(i,Il().locals.spinner),i.innerHTML=n?wl:Cl;const a=i.getElementsByTagName("svg")[0];return yt(a,Il().locals.spinner__svg),n||a.setAttributeNS("","fill",r||rl),i.appendChild(a),i}({document:t,primaryColor:l,isMobileSkin:ut()}),h.appendChild(f)),d.appendChild(h);const p=Et();return d.appendChild(p.wrapper),{element:d,setPoster:(e,t,r)=>u.setPoster(e,t,r),setStyle:e=>u.setStyle(e),setSpinnerVisibility:e=>{f&&I(f,{display:e?"block":"none"})},setVisibility:e=>{I(d,{display:e?"block":"none"})},setAnnotationText:e=>{p.setText(e)},destroy:()=>{u.destroy(),F(d)}}}function St(e){function t(){return n.length<e}function r(e){function r(){n.splice(n.indexOf(a),1),function(){if(!t())return;const e=i.shift();e&&e()}()}const a=e.then(r,r);return n.push(a),e}void 0===e&&(e=1);const n=[],i=[];return{waitAndLock:function(e){return t()?r(e()):new Promise(t=>{i.push(()=>{t(r(e()))})})},addLock:r,isFree:t}}function Rt(){return(Rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function bt(e){let{source:t}=e;return!!t&&(!!t.adConfig&&(!(!t.adConfig.partnerId&&!t.adConfig.adBreaks)&&!1!==t.adConfig.hasPreroll))}function At(e){return!!(0,_r.K)(e)&&(!!(0,_r.K)(e.videoInfo)&&Boolean(e.enableRemoteProgressSaving&&e.videoInfo.videoContentId))}function Tt(e){const{details:t}=e;try{const e="string"===typeof t?JSON.parse(t):t;return Boolean(e.isVhError)}catch(r){}return!1}function Pt(e){return void 0===e&&(e="/log"),"https://log.strm.yandex.ru"+e}function Ot(){return Pt("/"+(0,dl.a)((e=Wl,t=Gl,Math.floor(Math.floor(Math.random()*(t-e+1))+e))));var e,t}function It(e){return{reqid:null==e?void 0:e.reqid,from_block:null==e?void 0:e.from_block,frontend_vh_reqid:null==e?void 0:e.frontend_vh_reqid,recommender_reqid:null==e?void 0:e.recommender_reqid,stream_block:null==e?void 0:e.stream_block}}function Ct(e,t){const r=function(e,t,r){return void 0===r&&(r=0),Ur(e,e=>{let{start:n,end:i}=e;return n-r<=t&&t<=i+r})}(e,t);return void 0===r?void 0:r.end-t}function wt(){if(void 0!==document.featurePolicy)try{return document.featurePolicy.allowedFeatures()}catch(e){return}}function kt(e){let{useAbdBundle:t}=e;return(t?"https://yastatic.net/yandex-video-player-iframe-api-bundles-stable":"https://yastatic.net/yandex-video-player-iframe-api-bundles")+"/1.0-11679"}function Nt(e){let{vsid:t,from:r,reqid:n,slots:i,flags:a}=e,o="use_friendly_frame=true&vsid="+encodeURIComponent(t)+"&from="+encodeURIComponent(r);return n&&(o+="&reqid="+encodeURIComponent(n)),i&&(o+="&slots="+encodeURIComponent(i)),function(e){void 0===e&&(e=(0,ss.b)(window));try{if("1"===localStorage.getItem("rumdebug"))return console&&(0,xr.m)(console.warn)&&console.warn("using rumdebug=1 from localStorage"),!0}catch(t){}return/[?&#]rumdebug=1(?:[&#]|$)/.test(e)}()&&(o+="&rumdebug=1"),o+="&flags="+encodeURIComponent(a),o}function Dt(){return(Dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Lt(e){return kt({useAbdBundle:e})+(Do?"/js/player.v2.modern.js":"/js/player.v2.js")}function xt(t){let{iframe:n,useAbdBundle:i,vsid:a,from:o,reqid:l,slots:c,shouldLoadAdSdk:d,adConfig:u,flags:h,sendDelta:f}=t;const p=n.contentDocument,m=n.contentWindow;!function(e,t){if(void 0===t&&(t=window),t.history&&(0,xr.m)(t.history.replaceState)&&!Ql)try{t.history.replaceState(null,t.document.title,t.location.pathname+"#"+e)}catch(r){$l(e,t)}else $l(e,t)}(Nt({vsid:a,from:o,reqid:l,slots:c,flags:h}),m),function(e,t){const r=kt({useAbdBundle:t}),n=e.createElement("base");n.href=r,e.head.appendChild(n)}(p,i);const g=s(m),y=function(e){return{win:e,retries:3,async:!0,dropCacheOnRetry:!0,onBeforeLoad:e=>{e.crossOrigin="anonymous"}}}(m);d&&void 0!==u&&e.e(769).then(e.bind(e,9627)).then(e=>{let{initMultirollModule:t}=e;return t(m,u,a,i)}).catch(Cr.Z);const v=r();return S(Dt({src:Lt(i)},y,{checkLoad:()=>{try{return g.playerJsLoaded}catch(e){return!1}}})).then(e=>(f("internal_js_load",v()),e)).catch(e=>{throw new Rr(Dt({},e,{code:sr.UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT}))})}function Mt(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function Ft(){return(Ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Vt(e){if(e in fc)return fc[e];const t=document.createElement("link");return t.rel="preload",t.as="script",fc[e]=new Promise((r,n)=>{t.onload=r,t.onerror=n,t.href=e,t.crossOrigin="anonymous",hc.appendChild(t)}).then(()=>{fc[e]=Promise.resolve()}).catch(()=>{delete fc[e],hc.removeChild(t)}),fc[e]}function Ut(e){void 0===e&&(e={});const t=_e(e.version)||Vo,r=[b(Do?uc.PLAYER_API_MODERN:uc.PLAYER_API,t,e.useAbdBundle||!1),b(Do?uc.PLAYER_MODERN:uc.PLAYER,t,e.useAbdBundle||!1)];if(bt(e)){var n;const t=(null==(n=e.source)?void 0:n.adConfig)||{};(e=>{var t;const{win:r,config:{vasUaasConfig:n},moduleName:i}=e,{version:a}=(0,dc.M)(n);if(void 0===a)return[];return[{src:(0,lc.J)({version:a,bundleName:i,win:r,ecmaVersion:null!==(t=cc.a.adsdkecmaver)&&void 0!==t?t:sc.I}),type:"script"}]})({win:window,config:t,moduleName:"Multiroll"}).forEach(e=>{let{src:t}=e;r.push(t)})}return Promise.all(r.map(Vt)).then(()=>r)}function jt(e,t){void 0===t&&(t=window),Ut(e);try{const r=function(e,t){let{version:r,useAbdBundle:n,usePlayerApiMock:i}=e;const a=_e(r,t),o=Se(a,i);return b(o,a||Vo,Boolean(n))}(e,window);return void 0===pc&&(pc=v({win:t,src:r,retries:3,dropCacheOnRetry:!0,onBeforeLoad:e=>{e.crossOrigin="anonymous"},checkLoad:()=>{try{var e,r;return(0,xr.m)(null==(e=t.Ya)||null==(r=e.playerApi)?void 0:r.create)}catch(n){return!1}}})),{promise:pc,bundleUrl:r}}catch(Kn){return{promise:Promise.reject(Kn),bundleUrl:""}}}function Bt(){return(Bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Yt(e){const t=Bt({},e,{element:"string"===typeof e.element?document.getElementById(e.element):e.element}),r=function(e){void 0===e&&(e=document);const t=e.getElementById("ya-video-playerapi-mock-frame");if(t)return t;const r=We(e.body);return r.id="ya-video-playerapi-mock-frame",r}(document).contentWindow,n=(0,Pr.K)(),{setReadyInstance:i,setInstance:a}=n,o=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(n,mc);return jt(t,r).promise.then(()=>{const e=r.Ya.playerApi.create(t);i(e),a(e)}),o}var qt=e(1792),Wt=e(7549);const Gt=[...qt.o,...Wt.t,"getState","getReadyState"],Kt=window;Kt.Ya||(Kt.Ya={}),Kt.Ya.playerApi||(Kt.Ya.playerApi={}),Kt.Ya.playerApi.METHODS||(Kt.Ya.playerApi.METHODS=Gt);const Ht=window.Ya.playerApi,Zt=window.Ya.playerApi;var Xt=e(9591),zt=e(1153);const Jt={}.toString,Qt=/\[object (\w+)\]/,$t=Date&&t(Date.now)?()=>Date.now():()=>(new Date).getTime(),er="undefined"===typeof window?void 0:window.performance,tr=er&&t(er.now),rr=er&&er.timing&&er.timing.navigationStart,nr=er&&er.timeOrigin?er.timeOrigin:rr?er.timing.navigationStart:$t();let ir=0;const ar=tr?()=>er.now():()=>(()=>{const e=$t()-nr;return ir=Math.max(e,ir),ir})();var or=e(7881);let sr;!function(e){e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.BUFFER_STALLED_ERROR="bufferStalledError",e.FRAG_PARSING_ERROR="fragParsingError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.PIPELINE_ERROR_DECODE="PIPELINE_ERROR_DECODE",e.DECODER_ERROR_NOT_SUPPORTED="DECODER_ERROR_NOT_SUPPORTED",e.BUFFER_APPEND_ERROR="bufferAppendError",e.MEDIA_ELEMENT_ERROR_FORMAT_ERROR="MEDIA_ELEMENT_ERROR: Format error",e.REMUX_ALLOC_ERROR="remuxAllocError",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.DEMUXER_ERROR_COULD_NOT_OPEN="DEMUXER_ERROR_COULD_NOT_OPEN",e.NS_ERROR_DOM_INVALID_STATE_ERR="NS_ERROR_DOM_INVALID_STATE_ERR",e.CHUNK_DEMUXER_ERROR_APPEND_FAILED="CHUNK_DEMUXER_ERROR_APPEND_FAILED",e.FAILED_TO_INIT_DECODER="Failed to init decoder",e.PIPELINE_ERROR_INITIALIZATION_FAILED="PIPELINE_ERROR_INITIALIZATION_FAILED",e.NS_ERROR_FAILURE="NS_ERROR_FAILURE",e.REQUEST_FAILED="2147500036: Request failed",e.PIPELINE_ERROR_EXTERNAL_RENDERER_FAILED="PIPELINE_ERROR_EXTERNAL_RENDERER_FAILED",e.PIPELINE_ERROR_COULD_NOT_RENDER="PIPELINE_ERROR_COULD_NOT_RENDER",e.MEDIA_ELEMENT_ERROR_EMPTY_SRC_ATTRIBUTE="MEDIA_ELEMENT_ERROR: Empty src attribute",e.NS_ERROR_DOM_MEDIA_METADATA_ERR="NS_ERROR_DOM_MEDIA_METADATA_ERR",e.NS_ERROR_DOM_MEDIA_FATAL_ERR="NS_ERROR_DOM_MEDIA_FATAL_ERR",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.FRAG_LOAD_ERROR="fragLoadError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.LEVEL_LOAD_ERROR="levelLoadError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.FRAG_LOAD_TIME_OUT="fragLoadTimeOut",e.MANIFEST_LOAD_TIME_OUT="manifestLoadTimeOut",e.LEVEL_LOAD_TIME_OUT="levelLoadTimeOut",e.AUDIO_TRACK_LOAD_TIME_OUT="audioTrackLoadTimeOut",e.INTERNAL_EXCEPTION="internalException",e.ON_PLAYER_INIT_ERROR_INTERNAL="ON_PLAYER_INIT_ERROR_INTERNAL",e.UNABLE_TO_LOAD_PLAYER_IFRAME="UNABLE_TO_LOAD_PLAYER_IFRAME",e.ON_PLAYER_INIT_ERROR="ON_PLAYER_INIT_ERROR",e.LOADER_INIT_ERROR="LoaderInitError",e.UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT="UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT",e.FAILED_TO_DOWNLOAD_DEBUG_INFO="FAILED_TO_DOWNLOAD_DEBUG_INFO",e.PLAYER_CONTAINER_NOT_FOUND="PLAYER_CONTAINER_NOT_FOUND",e.KEY_LOAD_ERROR="keyLoadError",e.FEATURE_HANDLER_ERROR="FEATURE_HANDLER_ERROR",e.INVALID_CONFIG_ELEMENT_IN_CREATE_PLAYER="InvalidConfigElementInCreatePlayer",e.INVALID_CONFIG_LANG_IN_CREATE_PLAYER="InvalidConfigLangInCreatePlayer",e.INVALID_CONFIG_IN_CREATE_PLAYER="InvalidConfigInCreatePlayer",e.INVALID_CONFIG_IN_SET_SOURCE="InvalidConfigInSetSource",e.INVALID_CONFIG_IN_SOURCE_UPDATE="InvalidConfigInSourceUpdate",e.INVALID_LOG_URL="InvalidLogUrl",e.IFRAME_DOES_NOT_ALLOW_DRM="IframeDoesNotAllowDrm",e.DRM_IS_NOT_ALLOWED="DrmIsNotAllowed",e.EXTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR="EXTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR",e.INTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR="INTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR",e.LOAD_SKIN_ERROR="LOAD_SKIN_ERROR",e.INSERT_INTO_WITH_SECURE_FRAME="INSERT_INTO_WITH_SECURE_FRAME",e.PLAY_AD_VIEWERS_WITH_SECURE_FRAME="PLAY_AD_VIEWERS_WITH_SECURE_FRAME",e.ELEMENT_NOT_IN_DOM="ELEMENT_NOT_IN_DOM",e.ERROR_SCREEN_LOAD_ERROR="ERROR_SCREEN_LOAD_ERROR",e.REQUEST_SOURCE_ERROR="REQUEST_SOURCE_ERROR",e.SCREEN_WAKE_LOCK_ERROR="SCREEN_WAKE_LOCK_ERROR"}(sr||(sr={}));const lr="DEFAULT_ERROR_MESSAGE",cr=0,dr="",ur="?:?:?",hr=!0,fr="DEFAULT";var pr=e(8139),mr=e.n(pr),gr=e(8712),yr=e(9899);let vr,Er;!function(e){e.DEFAULT="DEFAULT",e.MEDIA="MEDIA",e.NETWORK_MEDIA="NETWORK_MEDIA",e.NETWORK_PLAYER="NETWORK_PLAYER",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NO_CODECS="NO_CODECS",e.CANNOT_PLAY="CANNOT_PLAY",e.UNSUPPORTED_ENV="UNSUPPORTED_ENV",e.EXCEPTION="EXCEPTION",e.ADS="ADS",e.CONFIG="CONFIG",e.REGIONAL="REGIONAL",e.DRM="DRM",e.ACCESS="ACCESS",e.BANNED="BANNED"}(vr||(vr={})),function(e){e.DEFAULT_ERROR="DEFAULT_ERROR",e.YANDEX_RPC_ERROR="YANDEX_RPC_ERROR",e.BROADCAST_AD_BLOCK_INIT_ERROR="BROADCAST_AD_BLOCK_INIT_ERROR",e.AD_TYPE_IS_NOT_RECOGNIZED="AD_TYPE_IS_NOT_RECOGNIZED",e.INVALID_METADATA="INVALID_METADATA",e.INVALID_STREAM_URL="INVALID_STREAM_URL",e.UNSUPPORTED_MEDIA_TYPE="UNSUPPORTED_MEDIA_TYPE",e.SCRIPT_INIT_ERROR="SCRIPT_INIT_ERROR",e.MPD_WIDEVINE_CERT_LOAD_ERROR="MPD_WIDEVINE_CERT_LOAD_ERROR",e.NATIVE_HLS_NOT_SUPPORTED_ERROR="NATIVE_HLS_NOT_SUPPORTED_ERROR",e.HLS_JS_NOT_SUPPORTED_ERROR="HLS_JS_NOT_SUPPORTED_ERROR",e.ON_TICK_ERROR="ON_TICK_ERROR",e.FAIRPLAY_NOT_SUPPORTED="FAIRPLAY_NOT_SUPPORTED",e.FAIRPLAY_CERT_LOAD_ERROR="FAIRPLAY_CERT_LOAD_ERROR",e.FAIRPLAY_CREATE_MEDIA_KEYS_ERROR="FAIRPLAY_CREATE_MEDIA_KEYS_ERROR",e.FAIRPLAY_CREATE_KEY_SESSION_ERROR="FAIRPLAY_CREATE_KEY_SESSION_ERROR",e.FAIRPLAY_SPC_LOAD_ERROR="FAIRPLAY_SPC_LOAD_ERROR",e.FAIRPLAY_CREATE_KEY_ERROR="FAIRPLAY_CREATE_KEY_ERROR",e.FAIRPLAY_INVALID_CONTENT_ID="FAIRPLAY_INVALID_CONTENT_ID",e.DRM_PROXY_ERROR="DRM_PROXY_ERROR",e.DRM_PROXY_ERROR_SIGNATURE_EXPIRED="DRM_PROXY_ERROR_SIGNATURE_EXPIRED",e.DRM_PROXY_ERROR_NEED_COOKIE="DRM_PROXY_ERROR_NEED_COOKIE",e.DRM_PROXY_ERROR_NEED_TEAM_LOGIN="DRM_PROXY_ERROR_NEED_TEAM_LOGIN",e.DRM_PROXY_ERROR_NEED_VIEW_PERMISSION="DRM_PROXY_ERROR_NEED_VIEW_PERMISSION",e.DRM_INIT_ERROR="DRM_INIT_ERROR",e.DRM_NO_INIT_DATA="DRM_NO_INIT_DATA",e.DRM_CERT_LOAD_ERROR="DRM_CERT_LOAD_ERROR",e.DRM_NO_SUPPORTED_KEY_SYSTEM="DRM_NO_SUPPORTED_KEY_SYSTEM",e.DRM_FAILED_TO_CREATE_CDM="DRM_FAILED_TO_CREATE_CDM",e.DRM_FAILED_TO_SET_MEDIA_KEYS="DRM_FAILED_TO_SET_MEDIA_KEYS",e.DRM_NO_LICENSE_SERVER="DRM_NO_LICENSE_SERVER",e.DRM_FAILED_TO_CREATE_SESSION="DRM_FAILED_TO_CREATE_SESSION",e.DRM_SESSION_ERROR="DRM_SESSION_ERROR",e.DRM_FAILED_TO_GENERATE_REQUEST="DRM_FAILED_TO_GENERATE_REQUEST",e.DRM_UNKNOWN_ERROR="DRM_UNKNOWN_ERROR",e.NO_HLS_JS_INSTANCE="NO_HLS_JS_INSTANCE",e.AD_IS_ALREADY_PLAYING="AD_IS_ALREADY_PLAYING",e.META_INFO_REQUEST_FAILED="META_INFO_REQUEST_FAILED",e.MULTIROLL_INIT_ERROR="MULTIROLL_INIT_ERROR",e.REACT_COMPONENT_DID_CATCH_ERROR_INFO="REACT_COMPONENT_DID_CATCH_ERROR_INFO",e.PLAY_AD_VIEWERS_ERROR="PLAY_AD_VIEWERS_ERROR",e.SAGA_ERROR="SAGA_ERROR",e.STRM_ABD_INVALID_RESPONSE="STRM_ABD_INVALID_RESPONSE",e.REPRESENTATION_CHANGE="REPRESENTATION_CHANGE",e.RECOVER_TASK_ERROR="RECOVER_TASK_ERROR",e.PRELOAD_SOURCE_FAILED="PRELOAD_SOURCE_FAILED",e.REGIONAL_LIMITATION_MANIFEST="REGIONAL_LIMITATION_MANIFEST",e.REGIONAL_LIMITATION_LEVEL="REGIONAL_LIMITATION_LEVEL",e.REGIONAL_LIMITATION_SEGMENT="REGIONAL_LIMITATION_SEGMENT",e.SIGNATURE_EXPIRED_MANIFEST="SIGNATURE_EXPIRED_MANIFEST",e.SIGNATURE_EXPIRED_LEVEL="SIGNATURE_EXPIRED_LEVEL",e.SIGNATURE_EXPIRED_SEGMENT="SIGNATURE_EXPIRED_SEGMENT",e.BANNED_MANIFEST="BANNED_MANIFEST",e.BANNED_LEVEL="BANNED_LEVEL",e.BANNED_SEGMENT="BANNED_SEGMENT",e.MANIFEST_NOT_FOUND="MANIFEST_NOT_FOUND",e.NO_STREAMS="NO_STREAMS",e.NO_CODECS="NO_CODECS",e.NO_MSE="NO_MSE",e.NO_DRM_CONFIG="NO_DRM_CONFIG",e.NO_DRM="NO_DRM",e.NO_PLAYABLE_STREAMS="NO_PLAYABLE_STREAMS",e.MEDIA_ERR_CUSTOM="MEDIA_ERR_CUSTOM",e.MEDIA_ERR_ABORTED="MEDIA_ERR_ABORTED",e.MEDIA_ERR_NETWORK="MEDIA_ERR_NETWORK",e.MEDIA_ERR_DECODE="MEDIA_ERR_DECODE",e.MEDIA_ERR_SRC_NOT_SUPPORTED="MEDIA_ERR_SRC_NOT_SUPPORTED",e.MEDIA_ERR_ENCRYPTED="MEDIA_ERR_ENCRYPTED"}(Er||(Er={}));var _r=e(5689),Sr=e(9951);class Rr extends Error{constructor(e,t){const r="object"===typeof e?e:{message:String(e),code:0};super(r.message||String(r.code)),this.message=void 0,this.messageDetails=void 0,this.code=void 0,this.category=void 0,this.isFatal=void 0,this.details=void 0,this.stack=void 0,this.vsid=void 0,this.helpLink=void 0,mr()(this,Rr.prototype),this.message=r.message||String(r.code)||this.message,this.messageDetails=r.messageDetails,this.code=r.code;const i=n(this.code);if(this.category=null!=r&&r.category&&i===vr.DEFAULT?r.category:i,this.details=r.details,this.isFatal=void 0===r.isFatal||r.isFatal,this.stack=r.stack&&"?:?:?"!==r.stack?r.stack:this.details&&this.details.stack||((e,t)=>{const{url:r,line:n,col:i,fileName:a,columnNumber:o,lineNumber:s}=e;return String(t||(r||a||"?")+":"+(n||s||"?")+":"+(i||o||"?"))})(r,this.stack),!this.stack||this.stack===ur)try{throw new Error(this.message)}catch(Kn){(0,_r.K)(Kn)&&(this.stack=Kn.stack||ur)}this.helpLink=r.helpLink||void 0,this.vsid=t||r.vsid}static from(e,t){var r,n;void 0===t&&(t={});const a=null!=(r=null!=(n=t.code)?n:(0,gr.Y)(()=>e.code))?r:0;return e instanceof Rr?t?new Rr(i({},e,t,{code:a})):e:(o=e)instanceof Error||"Error"===(0,Sr.M)(o)?new Rr(i({},e,t,{code:a})):(0,yr.H)(e)?new Rr(i({message:e},t,{code:a})):new Rr(i({message:"UNEXPECTED_ERROR_TYPE"},t,{code:a}));var o}toString(){return JSON.stringify(this.toJSON())}toJSON(){const e={message:this.message,messageDetails:this.messageDetails,code:this.code,category:this.category,isFatal:this.isFatal,details:this.details,stack:this.stack,vsid:this.vsid,helpLink:this.helpLink||void 0};return i({},e,{raw:JSON.stringify(e)})}}var br=e(3041),Ar=e(9166);let Tr=0;var Pr=e(4841),Or=e(7746);let Ir;!function(e){e.NATIVE="NATIVE",e.HLS="HLS",e.MP4="MP4",e.YASP="YASP"}(Ir||(Ir={}));var Cr=e(55);const wr={AD:"play.start.adsdk",[Ir.YASP]:"play.start.yasp",[Ir.NATIVE]:"play.start.native",[Ir.HLS]:"play.start.hls",[Ir.MP4]:"play.start.mp4"},kr={AD:"play.start.adsdk",[Ir.YASP]:"play.start.adsdk.yasp",[Ir.NATIVE]:"play.start.adsdk.native",[Ir.HLS]:"play.start.adsdk.hls",[Ir.MP4]:"play.start.adsdk.mp4"},Nr={AD:"network.start.adsdk",[Ir.YASP]:"network.start.yasp",[Ir.NATIVE]:"network.start.native",[Ir.HLS]:"network.start.hls",[Ir.MP4]:"network.start.mp4"},Dr={AD:"network.start.adsdk",[Ir.YASP]:"network.start.adsdk.yasp",[Ir.NATIVE]:"network.start.adsdk.native",[Ir.HLS]:"network.start.adsdk.hls",[Ir.MP4]:"network.start.adsdk.mp4"};let Lr;!function(e){e.Ready="Ready",e.SkinReady="SkinReady",e.PosterReady="PosterReady",e.UserReady="UserReady",e.Destroy="Destroy",e.ContentImpression="ContentImpression",e.ResourcesIdle="ResourcesIdle",e.SourceChange="SourceChange",e.StreamChange="StreamChange",e.StreamsWithSupportInfoChange="StreamsWithSupportInfoChange",e.StartStageChange="StartStageChange",e.PlayingStateChange="PlayingStateChange",e.RequestPlayingState="RequestPlayingState",e.VideoTypeChange="VideoTypeChange",e.UtcStartTimeChange="UtcStartTimeChange",e.DVRStartTimeChange="DVRStartTimeChange",e.DVRDurationChange="DVRDurationChange",e.CurrentTimeChange="CurrentTimeChange",e.WatchedTimeChange="WatchedTimeChange",e.LiveLatencyChange="LiveLatencyChange",e.DurationChange="DurationChange",e.VolumeChange="VolumeChange",e.MutedChange="MutedChange",e.VolumeChangeReasonChange="VolumeChangeReasonChange",e.FullscreenStateChange="FullscreenStateChange",e.RequestFullscreenStateChange="RequestFullscreenStateChange",e.PictureInPictureStateChange="PictureInPictureStateChange",e.VisibleStateChange="VisibleStateChange",e.VideoSizeChange="VideoSizeChange",e.VideoTracksChange="VideoTracksChange",e.VideoTrackChange="VideoTrackChange",e.AudioTracksChange="AudioTracksChange",e.AudioTrackChange="AudioTrackChange",e.TextTracksChange="TextTracksChange",e.TextTrackChange="TextTrackChange",e.SubtitlesChange="SubtitlesChange",e.ErrorChange="ErrorChange",e.PlaybackRateRangeChange="PlaybackRateRangeChange",e.PlaybackRateChange="PlaybackRateChange",e.AdStateChange="AdStateChange",e.NextAdRemainingTimeChange="NextAdRemainingTimeChange",e.BeforeAdPodStart="BeforeAdPodStart",e.AdPodStart="AdPodStart",e.AdPodSkip="AdPodSkip",e.AdPodEnd="AdPodEnd",e.AdSkippableStateChange="AdSkippableStateChange",e.AdVolumeAvailabilityStateChange="AdVolumeAvailabilityStateChange",e.AdPodCloseStateChange="AdPodCloseStateChange",e.AdPodDurationChange="AdPodDurationChange",e.AdPodCurrentTimeChange="AdPodCurrentTimeChange",e.AdPodTimeToSkipChange="AdPodTimeToSkipChange",e.AdInteraction="AdInteraction",e.BufferedRangesChange="BufferedRangesChange",e.TileMetaInfoChange="TileMetaInfoChange",e.TileMetaInfoUrlChange="TileMetaInfoUrlChange",e.NetworkStatusChange="NetworkStatusChange",e.RecoverStart="RecoverStart",e.ConnectionQualityChange="ConnectionQualityChange",e.DrmSystemChange="DrmSystemChange",e.AdLoaded="AdLoaded",e.AdError="AdError",e.AdPodClick="AdPodClick",e.InrollFrame="InrollFrame",e.UgcLiveStatusChange="UgcLiveStatusChange"}(Lr||(Lr={}));var xr=e(4754);const Mr=s("object"===typeof self?self:window);var Fr=e(2839);const Vr=[].find,Ur=(0,Fr.t)(Vr)?(e,t)=>Vr.call(e,t):(e,t)=>{for(let r=0;r<e.length;r++){const n=e[r];if(t(n,r,e))return n}};var jr=e(5605);const Br="function"===typeof Array.isArray?Array.isArray:function(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)},Yr=(e,t,r)=>{const n=[];for(let i=0;i<e.length;i++){const a=e[i];t.call(r,a,i,e)&&n.push(a)}return n},qr=e(8139);class Wr extends Error{constructor(e,t){void 0===t&&(t={});const r="object"===typeof e?e:{message:String(e||lr)};super(),this.message=void 0,this.code=void 0,this.category=void 0,this.isFatal=void 0,this.details=void 0,this.stack=void 0,this.toString=void 0,this.toJSON=void 0,qr(this,Wr.prototype),this.message=t.message||r.message||lr,this.code=t.code||r.code||r.id||cr,this.category=t.category||r.category||fr,this.isFatal=Boolean(function(e){const[t]=Yr(e,e=>void 0!==e);return t}([t.isFatal,r.isFatal,hr])),this.details=t.details||r.details||dr,Object.defineProperty(this,"stack",{enumerable:!0});const n=t.stack||r.stack||function(e){const{url:t,line:r,col:n,fileName:i,columnNumber:a,lineNumber:o}=e;return(t||i||"?")+":"+(r||o||"?")+":"+(n||a||"?")}(r);let i=n===ur?this.stack:n;if(i&&i!==ur)this.stack=i;else if(!this.stack)try{throw new Error(this.message)}catch(Kn){this.stack=i=Kn.stack||ur}this.toString=()=>f(this.toJSON())||"{}",this.toJSON=()=>({message:this.message,code:this.code,isFatal:this.isFatal,details:this.details,category:this.category,stack:i})}}var Gr=e(4612);const Kr=()=>{},Hr=e=>!0;e(5865);var Zr=e(6094);const Xr=["setReadyInstance","setInstance"];var zr=e(3461);let Jr;const Qr=function(e){return void 0===e&&(e=window),Jr||(Jr=e.document.createElement("div")),Jr}(window),$r=(e,t)=>{const r="undefined"!==typeof Qr.style[e];if(r&&t&&(0,yr.H)(t))try{Qr.style.cssText=e+": "+t+";";const r=Boolean(Qr.style.cssText);return Qr.style.cssText="",r}catch(Kn){return!1}return r},en=["","webkit","moz","o","ms"],tn={},rn=function(e){return void 0===e&&(e=""),tn[e]||function(e){const t=""+e[0].toUpperCase()+e.slice(1);for(let r=0;r<en.length;r++){const n=en[r],i=n?""+n+t:e;if($r(i))return tn[e]=i}return tn[e]=e}(e)};var nn=e(1312),an=e(7974);const on=e=>{try{return"display"in w(e)}catch(Kn){return!1}},sn=e=>function(e){return e instanceof Promise||"Promise"===(0,Sr.M)(e)&&Boolean((0,gr.Y)(()=>(0,Fr.t)(e.constructor)))}(e)||(e=>Boolean((0,gr.Y)(()=>(0,xr.m)(e.then)&&(0,xr.m)(e.catch))))(e),ln=(e,t,r)=>{const n=new Array(e.length);for(let i=0;i<e.length;i++)n[i]=t.call(r,e[i],i,e);return n};var cn=e(8344);const dn=V(document.documentElement),un=function(){const e=ln(dn,e=>e.ownerDocument),{length:t}=e,r=(t?e[t-1]:document).defaultView;return!!r&&r.self!==r.parent}();class hn extends class{constructor(){this.on=[],this.once=[]}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.on.push(...t),()=>this.remove(...t)}addOne(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.once.push(...t),()=>this.remove(...t)}promise(){return new Promise(e=>this.addOne(e))}dispatch(e){const{once:t}=this;this.once=[],j(this.on,e),j(t,e)}removeAll(){this.on.length=0,this.once.length=0}remove(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.on=this.on.filter(e=>t.indexOf(e)<0),this.once=this.once.filter(e=>t.indexOf(e)<0)}}{constructor(e,t){void 0===t&&(t=(e,t)=>e===t),super(),this.checkToEqualFunction=t,this.value=void 0,this.value=e}getValue(){return this.value}subscribeValueCondition(e,t){return this.add(r=>{e(r)&&U(t,r)})}subscribeValueConditionOnce(e,t){const r=this.subscribeValueCondition(e,e=>{r(),U(t,e)});return r}dispatch(e){this.checkToEqualFunction(this.value,e)||(this.value=e,super.dispatch(e))}}var fn=e(6048),pn=e.n(fn);let mn,gn;!function(e){e.OFFLINE="offline",e.IDLE="idle",e.ATTEMPT="attempt",e.PLAYING="playing",e.ERROR="error"}(mn||(mn={})),function(e){e.init="init",e.waitForUserPlay="waitForUserPlay",e.waitForDocumentVisibility="waitForDocumentVisibility",e.starting="starting",e.started="started",e.broken="broken",e.destroyed="destroyed"}(gn||(gn={}));var yn=e(1247);const vn=function(e){void 0===e&&(e=window);const t=(0,yn.i)(e).toLowerCase();return/windows/.test(t)}(),En=function(e){void 0===e&&(e=window);const t=(0,yn.i)(e).toLowerCase(),r=/windows nt (\d+\.\d+)/.exec(t);if(r){const e=Number(r[1]);return e>0?e:-1}return-1}(),_n={[vr.MEDIA]:"https://yandex.ru/support/video-player/loading-issues.html",[vr.NETWORK_MEDIA]:"https://yandex.ru/support/video-player/loading-issues.html",[vr.NETWORK_PLAYER]:"https://yandex.ru/support/video-player/player-issues.html",[vr.NETWORK_TIMEOUT]:"https://yandex.ru/support/video-player/player-issues.html",[vr.NO_CODECS]:"https://yandex.ru/search/?text=\u043a\u043e\u0434\u0435\u043a\u0438",[vr.UNSUPPORTED_ENV]:"https://yandex.ru/soft/browsers/",[vr.EXCEPTION]:"https://yandex.ru/support/video-player/loading-issues.html",[vr.DRM]:"https://yandex.ru/support/video-player/drm.html",[vr.BANNED]:null},Sn={[vr.DEFAULT]:"DEFAULT_ERROR_CATEGORY_TITLE",[vr.MEDIA]:"MEDIA_ERROR_CATEGORY_TITLE",[vr.NETWORK_MEDIA]:"NETWORK_MEDIA_ERROR_CATEGORY_TITLE",[vr.NETWORK_PLAYER]:"NETWORK_PLAYER_ERROR_CATEGORY_TITLE",[vr.NETWORK_TIMEOUT]:"NETWORK_TIMEOUT_ERROR_CATEGORY_TITLE",[vr.NO_CODECS]:"NO_CODECS_ERROR_CATEGORY_TITLE",[vr.UNSUPPORTED_ENV]:"UNSUPPORTED_ENV_ERROR_CATEGORY_TITLE",[vr.CANNOT_PLAY]:"CANNOT_PLAY_ERROR_CATEGORY_TITLE",[vr.EXCEPTION]:"EXCEPTION_ERROR_CATEGORY_TITLE",[vr.CONFIG]:"CONFIG_ERROR_CATEGORY_TITLE",[vr.REGIONAL]:"REGIONAL_ERROR_CATEGORY_TITLE",[vr.DRM]:"DRM_ERROR_CATEGORY_TITLE",[vr.ACCESS]:"ACCESS_ERROR_CATEGORY_TITLE",[vr.BANNED]:"BANNED_ERROR_CATEGORY_TITLE"},Rn={[vr.DEFAULT]:"DEFAULT_ERROR_CATEGORY_MESSAGE",[vr.MEDIA]:"MEDIA_ERROR_CATEGORY_MESSAGE",[vr.NETWORK_MEDIA]:"NETWORK_MEDIA_ERROR_CATEGORY_MESSAGE",[vr.NETWORK_PLAYER]:"NETWORK_PLAYER_ERROR_CATEGORY_MESSAGE",[vr.NETWORK_TIMEOUT]:"NETWORK_TIMEOUT_ERROR_CATEGORY_MESSAGE",[vr.NO_CODECS]:"NO_CODECS_ERROR_CATEGORY_MESSAGE",[vr.UNSUPPORTED_ENV]:"UNSUPPORTED_ENV_ERROR_CATEGORY_MESSAGE",[vr.CANNOT_PLAY]:"CANNOT_PLAY_ERROR_CATEGORY_MESSAGE",[vr.EXCEPTION]:"EXCEPTION_ERROR_CATEGORY_MESSAGE",[vr.CONFIG]:"CONFIG_ERROR_CATEGORY_MESSAGE",[vr.DRM]:"DRM_ERROR_CATEGORY_MESSAGE",[vr.ACCESS]:"ACCESS_ERROR_CATEGORY_MESSAGE",[vr.BANNED]:"BANNED_ERROR_CATEGORY_MESSAGE"},bn={[vr.NO_CODECS]:"NO_CODECS_ERROR_CATEGORY_HELP_LINK",[vr.UNSUPPORTED_ENV]:"UNSUPPORTED_ENV_ERROR_CATEGORY_HELP_LINK"};let An;!function(e){e.BroadcastAdReceived="BroadcastAdReceived",e.BroadcastAdInit="BroadcastAdInit",e.StreamPlayerReceivedMetadata="StreamPlayerReceivedMetadata",e.StreamPlayerChooseMetadata="StreamPlayerChooseMetadata",e.PlayWithoutRAAResults="PlayWithoutRAAResults",e.CanPlay="CanPlay",e.ContentImpression="ContentImpression",e.WaitForPlayCompleted="WaitForPlayCompleted",e.DrmSystemsSupportDetected="DrmSystemsSupportDetected",e.InrollAdStart="InrollAdStart",e.InrollAdPodStart="InrollAdPodStart",e.InrollAdPodEnd="InrollAdPodEnd",e.InrollAdEnd="InrollAdEnd",e.PlayAdViewers="PlayAdViewers",e.AdStart="AdStart",e.AdPodImpression="AdPodImpression",e.AdPodLoading="AdPodLoading",e.AdPodError="AdPodError",e.AdPodStart="AdPodStart",e.AdPodEnd="AdPodEnd",e.AdEnd="AdEnd",e.AdClickThru="AdClickThru",e.NoAdPodsToPlayAd="NoAdPodsToPlayAd",e.Stalled="Stalled",e.NudgeStalledFailed="NudgeStalledFailed",e.LoadSource="LoadSource",e.PrerollInit="PrerollInit",e.WaitForUserGesture="WaitForUserGesture",e.WaitForDocumentVisibility="WaitForDocumentVisibility",e.HiddenAutoplayPrevented="HiddenAutoplayPrevented",e.PlayVideoOnVisibilityChange="PlayVideoOnVisibilityChange",e.PauseVideoOnVisibilityChange="PauseVideoOnVisibilityChange",e.StreamStopWhileLoadingMultiroll="StreamStopWhileLoadingMultiroll",e.StreamStopWhileChoosingStream="StreamStopWhileChoosingStream",e.StreamStopWhileDestroyVideoController="StreamStopWhileDestroyVideoController",e.StreamStopDuringDefineAutoplaySettings="StreamStopDuringDefineAutoplaySettings",e.StreamStopWhileWaitingForPlay="StreamStopWhileWaitingForPlay",e.StreamStopWhileWaitingForDocumentVisibility="StreamStopWhileWaitingForDocumentVisibility",e.StreamStopWhileLoadingPreroll="StreamStopWhileLoadingPreroll",e.StreamStopWhilePreloadingPreroll="StreamStopWhilePreloadingPreroll",e.SkippableFragmentWidgetDrawn="SkippableFragmentWidgetDrawn",e.SkippableFragmentWidgetHidden="SkippableFragmentWidgetHidden",e.PreloadSource="PreloadSource",e.UsePreloadedHlsJs="UsePreloadedHlsJs",e.PlayAfterWaitingForDocumentVisibility="PlayAfterWaitingForDocumentVisibility",e.ResourcesIdle="ResourcesIdle",e.ClientInfo="ClientInfo",e.HlsJsForceCappingStart="HlsJsForceCappingStart",e.ExternalPlaybackOpenButtonClick="ExternalPlaybackOpenButtonClick",e.ExternalPlaybackCloseButtonClick="ExternalPlaybackCloseButtonClick",e.ExternalPlayerListVisibleStatusChange="ExternalPlayerListVisibleStatusChange",e.ExternalPlaybackPlayerCsrfFetching="ExternalPlaybackPlayerCsrfFetching",e.ExternalPlaybackPlayerCsrfFetchSuccess="ExternalPlaybackPlayerCsrfFetchSuccess",e.ExternalPlaybackPlayerCsrfFetchError="ExternalPlaybackPlayerCsrfFetchError",e.ExternalPlaybackPlayerListHasAnyDevice="ExternalPlaybackPlayerListHasAnyDevice",e.ExternalPlaybackPlayerListFetching="ExternalPlaybackPlayerListFetching",e.ExternalPlaybackPlayerListFetchSuccess="ExternalPlaybackPlayerListFetchSuccess",e.ExternalPlaybackPlayerListFetchError="ExternalPlaybackPlayerListFetchError",e.ExternalPlaybackPlayerActivate="ExternalPlaybackPlayerActivate",e.ExternalPlaybackPlayerActivateSucceed="ExternalPlaybackPlayerActivateSucceed",e.ExternalPlaybackPlayerActivateFailed="ExternalPlaybackPlayerActivateFailed",e.ExternalPlaybackCsrfTokenExpired="ExternalPlaybackCsrfTokenExpired",e.Seek="Seek",e.MediaInternalsHistoryOnFatal="MediaInternalsHistoryOnFatal",e.PlayInrollAd="PlayInrollAd",e.FPSControllerRestrictions="FPSControllerRestrictions",e.NativeVideoTypeChange="NativeVideoTypeChange"}(An||(An={}));var Tn=e(8557);let Pn,On,In;!function(e){e[e.PLAYING=1]="PLAYING",e[e.NOT_PLAYING=2]="NOT_PLAYING"}(Pn||(Pn={})),function(e){e.INIT="INIT",e.SET_SOURCE="SET_SOURCE"}(On||(On={})),function(e){e.SetMuted="SetMuted",e.SetVolume="SetVolume",e.RequestAutoplaySettings="RequestAutoplaySettings",e.VolumeChangeEvent="VolumeChangeEvent",e.RestoreSavedMuted="RestoreSavedMuted"}(In||(In={}));var Cn=e(7343);const wn=(0,Fr.t)(Object.getPrototypeOf)?e=>Object.getPrototypeOf(e):e=>e.__proto__||Object.prototype;let kn;!function(e){e.PublicApiCall="PublicApiCall",e.Unload="Unload",e.PlayerContainerNotFound="PlayerContainerNotFound"}(kn||(kn={}));const Nn={min:0,max:1/0},Dn="0000000000000000000000000000000000000000000000000000000000000000",Ln={state:Pn.NOT_PLAYING,type:void 0,adParams:{}},xn={source:void 0,stream:void 0,drmSystem:void 0,startStage:gn.init,playingState:Or.X.PAUSE,playingStateReason:Tn.l.Unknown,videoType:void 0,utcStartTime:void 0,currentTime:NaN,watchedTime:0,dvrStartTime:NaN,dvrDuration:NaN,duration:NaN,volume:NaN,muted:!1,volumeChangeReason:void 0,isFullscreen:!1,pictureInPictureAllowed:!1,isPictureInPicture:!1,isVisible:!1,videoSize:void 0,videoTracks:[],videoTrack:void 0,audioTracks:[],audioTrack:void 0,textTracks:[],textTrack:void 0,subtitles:[],vsid:Dn,error:void 0,playbackRateRange:Nn,playbackRate:1,version:"1.0-11679",adState:Ln,adSkippableState:!1,adVolumeAvailabilityState:!1,adPodCloseState:void 0,adPodCurrentTime:NaN,adPodTimeToSkip:NaN,adPodDuration:NaN,nextAdRemainingTime:void 0,bufferedRanges:[],tileMetaInfo:void 0,tileMetaInfoUrl:void 0,liveLatency:void 0,connectionQuality:void 0,ugcLiveStatus:void 0};let Mn;!function(e){e[e.LOADING=0]="LOADING",e[e.READY=1]="READY",e[e.ERROR=2]="ERROR"}(Mn||(Mn={}));var Fn,Vn,Un=e(2178),jn=window.Map||function(){},Bn=window.Set||function(){},Yn=function(e,t){return(Yn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},qn=function(){return(qn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Wn=function(){function e(e){this.promise=e}return e.prototype.then=function(t){return new e(this.promise.then(t))},e.all=function(t){return new e(Promise.all(t.map((function(t){return t instanceof e?t.promise:t}))))},e}();(Vn=Fn=Fn||{}).assertNever=function(e){throw new Error},Vn.arrayToEnum=function(e){var t,r,n={};try{for(var i=H(e),a=i.next();!a.done;a=i.next()){var o=a.value;n[o]=o}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n},Vn.getValidEnumValues=function(e){var t,r,n=Vn.objectKeys(e).filter((function(t){return"number"!=typeof e[e[t]]})),i={};try{for(var a=H(n),o=a.next();!o.done;o=a.next()){var s=o.value;i[s]=e[s]}}catch(r){t={error:r}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return Vn.objectValues(i)},Vn.objectValues=function(e){return Vn.objectKeys(e).map((function(t){return e[t]}))},Vn.objectKeys="function"==typeof Object.keys?function(e){return Object.keys(e)}:function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r},Vn.find=function(e,t){var r,n;try{for(var i=H(e),a=i.next();!a.done;a=i.next()){var o=a.value;if(t(o))return o}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},Vn.isInteger="function"==typeof Number.isInteger?function(e){return Number.isInteger(e)}:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};var Gn,Kn,Hn=Fn.arrayToEnum(["invalid_type","custom","invalid_union","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types"]),Zn=function(e){function t(t){var r=this.constructor,n=e.call(this)||this;return n.issues=[],n.format=function(){var e={_errors:[]};return function t(r){var n,i;try{for(var a=H(r.issues),o=a.next();!o.done;o=a.next()){var s=o.value;if("invalid_union"===s.code)s.unionErrors.map(t);else if("invalid_return_type"===s.code)t(s.returnTypeError);else if("invalid_arguments"===s.code)t(s.argumentsError);else if(0===s.path.length)e._errors.push(s.message);else for(var l=e,c=0;c<s.path.length;){var d,u=s.path[c];c===s.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(s.message)):"string"==typeof u?l[u]=l[u]||{_errors:[]}:"number"==typeof u&&((d=[])._errors=[],l[u]=l[u]||d),l=l[u],c++}}}catch(r){n={error:r}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}}(n),e},n.addIssue=function(e){n.issues=X(X([],Z(n.issues)),[e])},n.addIssues=function(e){void 0===e&&(e=[]),n.issues=X(X([],Z(n.issues)),Z(e))},n.flatten=function(e){var t,r;void 0===e&&(e=function(e){return e.message});var i={},a=[];try{for(var o=H(n.issues),s=o.next();!s.done;s=o.next()){var l=s.value;0<l.path.length?(i[l.path[0]]=i[l.path[0]]||[],i[l.path[0]].push(e(l))):a.push(e(l))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return{formErrors:a,fieldErrors:i}},r=r.prototype,Object.setPrototypeOf?Object.setPrototypeOf(n,r):n.__proto__=r,n.name="ZodError",n.issues=t,n}return W(t,e),Object.defineProperty(t.prototype,"errors",{get:function(){return this.issues},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this.message},Object.defineProperty(t.prototype,"message",{get:function(){return JSON.stringify(this.issues,null,2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.issues.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"formErrors",{get:function(){return this.flatten()},enumerable:!1,configurable:!0}),t.create=function(e){return new t(e)},t}(Error),Xn=function(e,t){var r;switch(e.code){case Hn.invalid_type:r="undefined"===e.received?"Required":"Expected "+e.expected+", received "+e.received;break;case Hn.unrecognized_keys:r="Unrecognized key(s) in object: "+e.keys.map((function(e){return"'"+e+"'"})).join(", ");break;case Hn.invalid_union:r="Invalid input";break;case Hn.invalid_enum_value:r="Invalid enum value. Expected "+e.options.map((function(e){return"string"==typeof e?"'"+e+"'":e})).join(" | ")+", received "+("string"==typeof t.data?"'"+t.data+"'":t.data);break;case Hn.invalid_arguments:r="Invalid function arguments";break;case Hn.invalid_return_type:r="Invalid function return type";break;case Hn.invalid_date:r="Invalid date";break;case Hn.invalid_string:r="regex"!==e.validation?"Invalid "+e.validation:"Invalid";break;case Hn.too_small:r="array"===e.type?"Should have "+(e.inclusive?"at least":"more than")+" "+e.minimum+" items":"string"===e.type?"Should be "+(e.inclusive?"at least":"over")+" "+e.minimum+" characters":"number"===e.type?"Value should be greater than "+(e.inclusive?"or equal to ":"")+e.minimum:"Invalid input";break;case Hn.too_big:r="array"===e.type?"Should have "+(e.inclusive?"at most":"less than")+" "+e.maximum+" items":"string"===e.type?"Should be "+(e.inclusive?"at most":"under")+" "+e.maximum+" characters long":"number"===e.type?"Value should be less than "+(e.inclusive?"or equal to ":"")+e.maximum:"Invalid input";break;case Hn.custom:r="Invalid input";break;case Hn.invalid_intersection_types:r="Intersections only support objects";break;default:r=t.defaultError,Fn.assertNever(e)}return{message:r}},zn=Xn,Jn=Fn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Qn=function(e){switch(typeof e){case"undefined":return Jn.undefined;case"string":return Jn.string;case"number":return isNaN(e)?Jn.nan:Jn.number;case"boolean":return Jn.boolean;case"function":return Jn.function;case"bigint":return Jn.bigint;case"object":return Array.isArray(e)?Jn.array:null===e?Jn.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?Jn.promise:e instanceof jn?Jn.map:e instanceof Bn?Jn.set:e instanceof Date?Jn.date:Jn.object;default:return Jn.unknown}},$n=function(e,t,r,n){var i=X(X([],Z(t)),Z(n.path||[])),a=qn(qn({},n),{path:i});t=Xn(a,{data:e,defaultError:"Invalid input"});return qn(qn({},n),{path:i,message:n.message||r(a,{data:e,defaultError:t.message}).message})},ei=function(e){if(null===e)return[];for(var t=new Array(e.count);null!==e;)t[e.count-1]=e.component,e=e.parent;return t},ti=function(e){for(var t=null,r=0;r<e.length;r++)t={parent:t,component:e[r],count:r+1};return t},ri=function(){function e(e,t,r){this.path=e,this.issues=t,this.params=r}return e.prototype.stepInto=function(t){return new e(null===this.path?{parent:null,count:1,component:t}:{parent:this.path,count:this.path.count+1,component:t},this.issues,this.params)},e.prototype.addIssue=function(e,t){t=$n(e,ei(this.path),this.params.errorMap,t),this.issues.push(t)},e}(),ni=Object.freeze({valid:!1}),ii=function(e){return{valid:!0,value:e}},ai=function(e){return new Wn(e)},oi=function(e){return!1===e.valid},si=function(e){return!0===e.valid},li=function(e){return e instanceof Wn};(Kn=Gn=Gn||{}).errToObj=function(e){return"string"==typeof e?{message:e}:e||{}},Kn.toString=function(e){return"string"==typeof e?e:null==e?void 0:e.message};var ci,di=function(e){return e.params.async?[]:null},ui=function(e){var t;return new ri(ti(e.path||[]),[],{async:null!==(t=e.async)&&void 0!==t&&t,errorMap:e.errorMap||zn})},hi=function(e,t,r){return si(t)?{success:!0,data:t.value}:(null!=r&&r.addIssues(e.issues),{success:!1,error:new Zn(e.issues)})},fi=function(){function e(e){var t=this;this.parse=function(e,r){if((r=t.safeParse(e,r)).success)return r.data;throw r.error},this.safeParse=function(e,r){var n=ui(qn(qn({},r),{async:!1}));e=t._parseSync(n,e,Qn(e));return hi(n,e,null==r?void 0:r.parentError)},this.parseAsync=function(e,r){return G(t,void 0,void 0,(function(){var t;return K(this,(function(n){switch(n.label){case 0:return[4,this.safeParseAsync(e,r)];case 1:if((t=n.sent()).success)return[2,t.data];throw t.error}}))}))},this.safeParseAsync=function(e,r){return G(t,void 0,void 0,(function(){var t,n;return K(this,(function(i){switch(i.label){case 0:return t=ui(qn(qn({},r),{async:!0})),n=this._parse(t,e,Qn(e)),[4,li(n)?n.promise:Promise.resolve(n)];case 1:return n=i.sent(),[2,hi(t,n,null==r?void 0:r.parentError)]}}))}))},this.spa=this.safeParseAsync,this.refine=function(e,r){return t._refinement((function(t,n){function i(){return n.addIssue(qn({code:Hn.custom},"string"==typeof r||void 0===r?{message:r}:"function"==typeof r?r(t):r))}var a=e(t);return a instanceof Promise?a.then((function(e){return!!e||(i(),!1)})):!!a||(i(),!1)}))},this.refinement=function(e,r){return t._refinement((function(t,n){return!!e(t)||(n.addIssue("function"==typeof r?r(t,n):r),!1)}))},this.superRefine=this._refinement,this.optional=function(){return Gi.create(t)},this.nullable=function(){return Ki.create(t)},this.nullish=function(){return t.optional().nullable()},this.array=function(){return Ii.create(t)},this.promise=function(){return qi.create(t)},this.isOptional=function(){return t.safeParse(void 0).success},this.isNullable=function(){return t.safeParse(null).success},this._def=e,this.transform=this.transform.bind(this),this.default=this.default.bind(this)}return e.prototype._parseSync=function(e,t,r){if(r=this._parse(e,t,r),li(r))throw new Error("Synchronous parse encountered promise.");return r},e.prototype._refinement=function(e){return e=new Wi(this instanceof Wi?qn(qn({},this._def),{effects:X(X([],Z(this._def.effects||[])),[{type:"refinement",refinement:e}])}):{schema:this,typeName:Ci.ZodEffects,effects:[{type:"refinement",refinement:e}]})},e.prototype.or=function(e){return Ni.create([this,e])},e.prototype.and=function(e){return Di.create(this,e)},e.prototype.transform=function(e){return new Wi({schema:this,typeName:Ci.ZodEffects,effects:[{type:"transform",transform:e}]})},e.prototype.default=function(e){return new Hi({innerType:this,defaultValue:"function"==typeof e?e:function(){return e},typeName:Ci.ZodDefault})},e}(),pi=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[89ab][a-f0-9]{3}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,mi=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,gi=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r._regex=function(e,t,n){return r.refinement((function(t){return e.test(t)}),qn({validation:t,code:Hn.invalid_string},Gn.errToObj(n)))},r.email=function(e){return new t(qn(qn({},r._def),{checks:X(X([],Z(r._def.checks)),[qn({kind:"email"},Gn.errToObj(e))])}))},r.url=function(e){return new t(qn(qn({},r._def),{checks:X(X([],Z(r._def.checks)),[qn({kind:"url"},Gn.errToObj(e))])}))},r.uuid=function(e){return new t(qn(qn({},r._def),{checks:X(X([],Z(r._def.checks)),[qn({kind:"uuid"},Gn.errToObj(e))])}))},r.regex=function(e,n){return new t(qn(qn({},r._def),{checks:X(X([],Z(r._def.checks)),[qn({kind:"regex",regex:e},Gn.errToObj(n))])}))},r.min=function(e,n){return new t(qn(qn({},r._def),{checks:X(X([],Z(r._def.checks)),[qn({kind:"min",value:e},Gn.errToObj(n))])}))},r.max=function(e,n){return new t(qn(qn({},r._def),{checks:X(X([],Z(r._def.checks)),[qn({kind:"max",value:e},Gn.errToObj(n))])}))},r.nonempty=function(e){return r.min(1,Gn.errToObj(e))},r}return W(t,e),t.prototype._parse=function(e,t,r){var n,i;if(r!==Jn.string)return e.addIssue(t,{code:Hn.invalid_type,expected:Jn.string,received:r}),ni;var a=!1;try{for(var o=H(this._def.checks),s=o.next();!s.done;s=o.next()){var l=s.value;if("min"===l.kind)t.length<l.value&&(a=!0,e.addIssue(t,{code:Hn.too_small,minimum:l.value,type:"string",inclusive:!0,message:l.message}));else if("max"===l.kind)t.length>l.value&&(a=!0,e.addIssue(t,{code:Hn.too_big,maximum:l.value,type:"string",inclusive:!0,message:l.message}));else if("email"===l.kind)mi.test(t)||(a=!0,e.addIssue(t,{validation:"email",code:Hn.invalid_string,message:l.message}));else if("uuid"===l.kind)pi.test(t)||(a=!0,e.addIssue(t,{validation:"uuid",code:Hn.invalid_string,message:l.message}));else if("url"===l.kind)try{new URL(t)}catch(r){a=!0,e.addIssue(t,{validation:"url",code:Hn.invalid_string,message:l.message})}else"regex"===l.kind&&(l.regex.test(t)||(a=!0,e.addIssue(t,{validation:"regex",code:Hn.invalid_string,message:l.message})))}}catch(r){n={error:r}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a?ni:ii(t)},t.prototype.length=function(e,t){return this.min(e,t).max(e,t)},Object.defineProperty(t.prototype,"isEmail",{get:function(){return!!this._def.checks.find((function(e){return"email"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isURL",{get:function(){return!!this._def.checks.find((function(e){return"url"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUUID",{get:function(){return!!this._def.checks.find((function(e){return"uuid"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minLength",{get:function(){var e=-1/0;return this._def.checks.map((function(t){"min"===t.kind&&(null===e||t.value>e)&&(e=t.value)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){var e=null;return this._def.checks.map((function(t){"max"===t.kind&&(null===e||t.value<e)&&(e=t.value)})),e},enumerable:!1,configurable:!0}),t.create=function(){return new t({checks:[],typeName:Ci.ZodString})},t}(fi),yi=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.gte=function(e,t){return r.setLimit("min",e,!0,Gn.toString(t))},r.min=r.gte,r.gt=function(e,t){return r.setLimit("min",e,!1,Gn.toString(t))},r.lte=function(e,t){return r.setLimit("max",e,!0,Gn.toString(t))},r.max=r.lte,r.lt=function(e,t){return r.setLimit("max",e,!1,Gn.toString(t))},r.setLimit=function(e,n,i,a){return new t(qn(qn({},r._def),{checks:X(X([],Z(r._def.checks)),[{kind:e,value:n,inclusive:i,message:Gn.toString(a)}])}))},r.int=function(e){return new t(qn(qn({},r._def),{checks:X(X([],Z(r._def.checks)),[{kind:"int",message:Gn.toString(e)}])}))},r.positive=function(e){return new t(qn(qn({},r._def),{checks:X(X([],Z(r._def.checks)),[{kind:"min",value:0,inclusive:!1,message:Gn.toString(e)}])}))},r.negative=function(e){return new t(qn(qn({},r._def),{checks:X(X([],Z(r._def.checks)),[{kind:"max",value:0,inclusive:!1,message:Gn.toString(e)}])}))},r.nonpositive=function(e){return new t(qn(qn({},r._def),{checks:X(X([],Z(r._def.checks)),[{kind:"max",value:0,inclusive:!0,message:Gn.toString(e)}])}))},r.nonnegative=function(e){return new t(qn(qn({},r._def),{checks:X(X([],Z(r._def.checks)),[{kind:"min",value:0,inclusive:!0,message:Gn.toString(e)}])}))},r}return W(t,e),t.prototype._parse=function(e,t,r){var n,i;if(r!==Jn.number)return e.addIssue(t,{code:Hn.invalid_type,expected:Jn.number,received:r}),ni;var a=!1;try{for(var o=H(this._def.checks),s=o.next();!s.done;s=o.next()){var l=s.value;"int"===l.kind?Fn.isInteger(t)||(a=!0,e.addIssue(t,{code:Hn.invalid_type,expected:"integer",received:"float",message:l.message})):"min"===l.kind?(l.inclusive?t<l.value:t<=l.value)&&(a=!0,e.addIssue(t,{code:Hn.too_small,minimum:l.value,type:"number",inclusive:l.inclusive,message:l.message})):"max"===l.kind&&(l.inclusive?t>l.value:t>=l.value)&&(a=!0,e.addIssue(t,{code:Hn.too_big,maximum:l.value,type:"number",inclusive:l.inclusive,message:l.message}))}}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a?ni:ii(t)},Object.defineProperty(t.prototype,"minValue",{get:function(){var e,t,r=null;try{for(var n=H(this._def.checks),i=n.next();!i.done;i=n.next()){var a=i.value;"min"===a.kind&&(null===r||a.value>r)&&(r=a.value)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxValue",{get:function(){var e,t,r=null;try{for(var n=H(this._def.checks),i=n.next();!i.done;i=n.next()){var a=i.value;"max"===a.kind&&(null===r||a.value<r)&&(r=a.value)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInt",{get:function(){return!!this._def.checks.find((function(e){return"int"===e.kind}))},enumerable:!1,configurable:!0}),t.create=function(){return new t({checks:[],typeName:Ci.ZodNumber})},t}(fi),vi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype._parse=function(e,t,r){return r!==Jn.bigint?(e.addIssue(t,{code:Hn.invalid_type,expected:Jn.bigint,received:r}),ni):ii(t)},t.create=function(){return new t({typeName:Ci.ZodBigInt})},t}(fi),Ei=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype._parse=function(e,t,r){return r!==Jn.boolean?(e.addIssue(t,{code:Hn.invalid_type,expected:Jn.boolean,received:r}),ni):ii(t)},t.create=function(){return new t({typeName:Ci.ZodBoolean})},t}(fi),_i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype._parse=function(e,t,r){return r!==Jn.date?(e.addIssue(t,{code:Hn.invalid_type,expected:Jn.date,received:r}),ni):isNaN(t.getTime())?(e.addIssue(t,{code:Hn.invalid_date}),ni):ii(new Date(t.getTime()))},t.create=function(){return new t({typeName:Ci.ZodDate})},t}(fi),Si=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype._parse=function(e,t,r){return r!==Jn.undefined?(e.addIssue(t,{code:Hn.invalid_type,expected:Jn.undefined,received:r}),ni):ii(t)},t.create=function(){return new t({typeName:Ci.ZodUndefined})},t}(fi),Ri=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype._parse=function(e,t,r){return r!==Jn.null?(e.addIssue(t,{code:Hn.invalid_type,expected:Jn.null,received:r}),ni):ii(t)},t.create=function(){return new t({typeName:Ci.ZodNull})},t}(fi),bi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._any=!0,t}return W(t,e),t.prototype._parse=function(e,t,r){return ii(t)},t.create=function(){return new t({typeName:Ci.ZodAny})},t}(fi),Ai=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._unknown=!0,t}return W(t,e),t.prototype._parse=function(e,t,r){return ii(t)},t.create=function(){return new t({typeName:Ci.ZodUnknown})},t}(fi),Ti=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype._parse=function(e,t,r){return e.addIssue(t,{code:Hn.invalid_type,expected:Jn.never,received:r}),ni},t.create=function(){return new t({typeName:Ci.ZodNever})},t}(fi),Pi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype._parse=function(e,t,r){return r!==Jn.undefined?(e.addIssue(t,{code:Hn.invalid_type,expected:Jn.void,received:r}),ni):ii(t)},t.create=function(){return new t({typeName:Ci.ZodVoid})},t}(fi),Oi=function(e,t,r,n){if(r!==Jn.array)return e.addIssue(t,{code:Hn.invalid_type,expected:Jn.array,received:r}),ni;var i=!1;null!==n.minLength&&t.length<n.minLength.value&&(i=!0,e.addIssue(t,{code:Hn.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,message:n.minLength.message})),null!==n.maxLength&&t.length>n.maxLength.value&&(i=!0,e.addIssue(t,{code:Hn.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,message:n.maxLength.message}));var a=di(e),o=new Array(t.length),s=n.type;return t.forEach((function(t,r){!function e(t,r){si(r)?o[t]=r.value:oi(r)?i=!0:null!=a&&a.push(r.promise.then((function(r){return e(t,r)})))}(r,s._parse(e.stepInto(r),t,Qn(t)))})),null!==a&&0<a.length?ai(Promise.all(a).then((function(){return i?ni:ii(o)}))):i?ni:ii(o)},Ii=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.min=function(e,n){return new t(qn(qn({},r._def),{minLength:{value:e,message:Gn.toString(n)}}))},r.max=function(e,n){return new t(qn(qn({},r._def),{maxLength:{value:e,message:Gn.toString(n)}}))},r.length=function(e,t){return r.min(e,t).max(e,t)},r.nonempty=function(e){return r.min(1,e)},r}return W(t,e),t.prototype._parse=function(e,t,r){return Oi(e,t,r,this._def)},Object.defineProperty(t.prototype,"element",{get:function(){return this._def.type},enumerable:!1,configurable:!0}),t.create=function(e){return new t({type:e,minLength:null,maxLength:null,typeName:Ci.ZodArray})},t}(fi);!function(e){e.mergeShapes=function(e,t){return qn(qn({},e),t)},e.intersectShapes=function(e,t){var r,n,i=Fn.objectKeys(e),a=Fn.objectKeys(t),o=(i=i.filter((function(e){return-1!==a.indexOf(e)})),{});try{for(var s=H(i),l=s.next();!l.done;l=s.next()){var c=l.value;o[c]=Di.create(e[c],t[c])}}catch(e){r={error:e}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return qn(qn(qn({},e),t),o)}}(ci=ci||{});var Ci,wi=function(e){return function(t){return new ki(qn(qn({},e),{shape:function(){return qn(qn({},e.shape()),t)}}))}},ki=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r._cached=null,r.strict=function(){return new t(qn(qn({},r._def),{unknownKeys:"strict"}))},r.strip=function(){return new t(qn(qn({},r._def),{unknownKeys:"strip"}))},r.passthrough=function(){return new t(qn(qn({},r._def),{unknownKeys:"passthrough"}))},r.nonstrict=r.passthrough,r.augment=wi(r._def),r.extend=wi(r._def),r.setKey=function(e,t){var n;return r.augment(((n={})[e]=t,n))},r.merge=function(e){var n=ci.mergeShapes(r._def.shape(),e._def.shape());return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:function(){return n},typeName:Ci.ZodObject})},r.catchall=function(e){return new t(qn(qn({},r._def),{catchall:e}))},r.pick=function(e){var n={};return Fn.objectKeys(e).map((function(e){n[e]=r.shape[e]})),new t(qn(qn({},r._def),{shape:function(){return n}}))},r.omit=function(e){var n={};return Fn.objectKeys(r.shape).map((function(t){-1===Fn.objectKeys(e).indexOf(t)&&(n[t]=r.shape[t])})),new t(qn(qn({},r._def),{shape:function(){return n}}))},r.partial=function(){var e,n={};for(e in r.shape){var i=r.shape[e];n[e]=i.isOptional()?i:i.optional()}return new t(qn(qn({},r._def),{shape:function(){return n}}))},r.deepPartial=function(){var e,n={};for(e in r.shape){var i=r.shape[e];n[e]=i instanceof t?i.isOptional()?i:i.deepPartial().optional():i.isOptional()?i:i.optional()}return new t(qn(qn({},r._def),{shape:function(){return n}}))},r.required=function(){var e,n={};for(e in r.shape){for(var i=r.shape[e];i instanceof Gi;)i=i._def.innerType;n[e]=i}return new t(qn(qn({},r._def),{shape:function(){return n}}))},r}return W(t,e),t.prototype._getCached=function(){if(null!==this._cached)return this._cached;var e=this._def.shape(),t=Fn.objectKeys(e);return this._cached={shape:e,keys:t}},t.prototype._parse=function(e,t,r){var n,i,a,o,s;if(r!==Jn.object)return e.addIssue(t,{code:Hn.invalid_type,expected:Jn.object,received:r}),ni;var l=(r=this._getCached()).shape,c=(r=r.keys,!1),d=di(e),u={},h=function e(r,n){var i;si(n)?(void 0!==(i=n.value)||r in t)&&(u[r]=i):oi(n)?c=!0:null!=d&&d.push(n.promise.then((function(t){return e(r,t)})))};try{for(var f=H(r),p=f.next();!p.done;p=f.next()){var m=p.value,g=l[m],y=t[m];h(m,g._parse(e.stepInto(m),y,Qn(y)))}}catch(e){v={error:e}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(v)throw v.error}}if(this._def.catchall instanceof Ti){var v=this._def.unknownKeys;if("passthrough"===v){var E=Fn.objectKeys(t).filter((function(e){return!(e in l)}));try{for(var _=H(E),S=_.next();!S.done;S=_.next())m=S.value,u[m]=t[m]}catch(e){i={error:e}}finally{try{S&&!S.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}}else if("strict"===v)0<(E=Fn.objectKeys(t).filter((function(e){return!(e in l)}))).length&&(c=!0,e.addIssue(t,{code:Hn.unrecognized_keys,keys:E}));else if("strip"!==v)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{var R=this._def.catchall;E=Fn.objectKeys(t).filter((function(e){return!(e in l)}));try{for(var b=H(E),A=b.next();!A.done;A=b.next())m=A.value,y=t[m],h(m,R._parse(e.stepInto(m),y,Qn(y)))}catch(e){o={error:e}}finally{try{A&&!A.done&&(s=b.return)&&s.call(b)}finally{if(o)throw o.error}}}return null!==d&&0<d.length?ai(Promise.all(d).then((function(){return c?ni:ii(u)}))):c?ni:ii(u)},Object.defineProperty(t.prototype,"shape",{get:function(){return this._def.shape()},enumerable:!1,configurable:!0}),t.create=function(e){return new t({shape:function(){return e},unknownKeys:"strip",catchall:Ti.create(),typeName:Ci.ZodObject})},t.strictCreate=function(e){return new t({shape:function(){return e},unknownKeys:"strict",catchall:Ti.create(),typeName:Ci.ZodObject})},t.lazycreate=function(e){return new t({shape:e,unknownKeys:"strip",catchall:Ti.create(),typeName:Ci.ZodObject})},t}(fi),Ni=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype._parse=function(e,t,r){function n(r){var n=r.map((function(e){return new Zn(e)}));return 1===(r=n.filter((function(e){return"invalid_type"!==e.issues[0].code}))).length?r[0].issues.forEach((function(t){return e.issues.push(t)})):e.addIssue(t,{code:Hn.invalid_union,unionErrors:n}),ni}var i,a,o=this._def.options;if(e.params.async){var s=o.map((function(){return new ri(e.path,[],e.params)}));return Wn.all(o.map((function(e,n){return e._parse(s[n],t,r)}))).then((function(e){var t,r;try{for(var i=H(e),a=i.next();!a.done;a=i.next()){var o=a.value;if(si(o))return o}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n(s.map((function(e){return e.issues})))}))}var l=[];try{for(var c=H(o),d=c.next();!d.done;d=c.next()){var u=d.value,h=new ri(e.path,[],e.params),f=u._parseSync(h,t,r);if(!oi(f))return f;l.push(h.issues)}}catch(a){i={error:a}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return n(l)},Object.defineProperty(t.prototype,"options",{get:function(){return this._def.options},enumerable:!1,configurable:!0}),t.create=function(e){return new t({options:e,typeName:Ci.ZodUnion})},t}(fi),Di=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype._parse=function(e,t,r){function n(r,n){return oi(r)||oi(n)?ni:(n=function e(t,r){var n,i,a=Qn(t),o=Qn(r);if(t===r)return{valid:!0,data:t};if(a!==Jn.object||o!==Jn.object)return{valid:!1};var s=Fn.objectKeys(r),l=(o=Fn.objectKeys(t).filter((function(e){return-1!==s.indexOf(e)})),qn(qn({},t),r));try{for(var c=H(o),d=c.next();!d.done;d=c.next()){var u=d.value,h=e(t[u],r[u]);if(!h.valid)return{valid:!1};l[u]=h.data}}catch(t){n={error:t}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return{valid:!0,data:l}}(r.value,n.value)).valid?ii(n.data):(e.addIssue(t,{code:Hn.invalid_intersection_types}),ni)}return e.params.async?Wn.all([this._def.left._parse(e,t,r),this._def.right._parse(e,t,r)]).then((function(e){var t;return n(e=(t=Z(e,2))[0],t=t[1])})):n(this._def.left._parseSync(e,t,r),this._def.right._parseSync(e,t,r))},t.create=function(e,r){return new t({left:e,right:r,typeName:Ci.ZodIntersection})},t}(fi),Li=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype._parse=function(e,t,r){if(r!==Jn.array)return e.addIssue(t,{code:Hn.invalid_type,expected:Jn.array,received:r}),ni;if(t.length>this._def.items.length)return e.addIssue(t,{code:Hn.too_big,maximum:this._def.items.length,inclusive:!0,type:"array"}),ni;if(t.length<this._def.items.length)return e.addIssue(t,{code:Hn.too_small,minimum:this._def.items.length,inclusive:!0,type:"array"}),ni;var n=di(e),i=(r=this._def.items,new Array(r.length)),a=!1;return r.forEach((function(r,o){!function e(t,r){si(r)?i[t]=r.value:oi(r)?a=!0:null!=n&&n.push(r.promise.then((function(r){return e(t,r)})))}(o,r._parse(e.stepInto(o),t[o],Qn(t[o])))})),null!==n&&0<n.length?ai(Promise.all(n).then((function(){return a?ni:ii(i)}))):a?ni:ii(i)},Object.defineProperty(t.prototype,"items",{get:function(){return this._def.items},enumerable:!1,configurable:!0}),t.create=function(e){return new t({items:e,typeName:Ci.ZodTuple})},t}(fi),xi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype._parse=function(e,t,r){if(r!==Jn.object)return e.addIssue(t,{code:Hn.invalid_type,expected:Jn.object,received:r}),ni;var n,i=di(e),a=this._def.valueType,o={},s=!1,l=function e(t,r){si(r)?o[t]=r.value:oi(r)?s=!0:null!=i&&i.push(r.promise.then((function(r){return e(t,r)})))};for(n in t)l(n,a._parse(e.stepInto(n),t[n],Qn(t[n])));return null!==i&&0<i.length?ai(Promise.all(i).then((function(){return s?ni:ii(o)}))):s?ni:ii(o)},t.create=function(e){return new t({valueType:e,typeName:Ci.ZodRecord})},t}(fi),Mi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype._parse=function(e,t,r){if(r!==Jn.map)return e.addIssue(t,{code:Hn.invalid_type,expected:Jn.map,received:r}),ni;var n=this._def.keyType,i=this._def.valueType,a=(t=t,new jn),o=di(e),s=!1,l=function e(t,r){li(t)||li(r)?null!=o&&o.push(Wn.all([t,r]).promise.then((function(t){t=(r=Z(t,2))[0];var r=r[1];return e(t,r)}))):oi(t)||oi(r)?s=!0:a.set(t.value,r.value)};return X([],Z(t.entries())).forEach((function(t,r){t=(a=Z(t,2))[0];var a=a[1];r=e.stepInto(r),t=n._parse(r.stepInto("key"),t,Qn(t)),a=i._parse(r.stepInto("value"),a,Qn(a));l(t,a)})),null!==o&&0<o.length?ai(Promise.all(o).then((function(){return s?ni:ii(a)}))):s?ni:ii(a)},t.create=function(e,r){return new t({valueType:r,keyType:e,typeName:Ci.ZodMap})},t}(fi),Fi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype._parse=function(e,t,r){if(r!==Jn.set)return e.addIssue(t,{code:Hn.invalid_type,expected:Jn.set,received:r}),ni;t=t;var n=this._def.valueType,i=new Bn,a=di(e),o=!1;return X([],Z(t.values())).forEach((function(t,r){return function e(t){si(t)?i.add(t.value):oi(t)?o=!0:null!=a&&a.push(t.promise.then((function(t){return e(t)})))}(n._parse(e.stepInto(r),t,Qn(t)))})),null!==a&&0<a.length?ai(Promise.all(a).then((function(){return o?ni:ii(i)}))):o?ni:ii(i)},t.create=function(e){return new t({valueType:e,typeName:Ci.ZodSet})},t}(fi),Vi=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.args=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new t(qn(qn({},r._def),{args:Li.create(e)}))},r.returns=function(e){return new t(qn(qn({},r._def),{returns:e}))},r.implement=function(e){return r.parse(e)},r.strictImplement=function(e){return r.parse(e)},r.validate=r.implement,r}return W(t,e),t.prototype._parse=function(e,t,r){function n(t,r){if(r.success)return r.data;throw r=$n(t,ei(e.path),e.params.errorMap,{code:Hn.invalid_arguments,argumentsError:r.error}),new Zn([r])}function i(t,r){if(r.success)return r.data;throw r=$n(t,ei(e.path),e.params.errorMap,{code:Hn.invalid_return_type,returnTypeError:r.error}),new Zn([r])}var a=this;if(r!==Jn.function)return e.addIssue(t,{code:Hn.invalid_type,expected:Jn.function,received:r}),ni;var o={errorMap:e.params.errorMap},s=t;return this._def.returns instanceof qi?ii((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return G(a,void 0,void 0,(function(){var t,r,a,l,c;return K(this,(function(d){switch(d.label){case 0:return t=n,r=[e],[4,this._def.args.spa(e,o)];case 1:return a=t.apply(void 0,r.concat([d.sent()])),[4,s.apply(void 0,X([],Z(a)))];case 2:return a=d.sent(),l=i,c=[a],[4,this._def.returns.spa(a,o)];case 3:return[2,l.apply(void 0,c.concat([d.sent()]))]}}))}))})):ii((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=n(e,a._def.args.safeParse(e,o));return i(r=s.apply(void 0,X([],Z(r))),a._def.returns.safeParse(r,o))}))},t.prototype.parameters=function(){return this._def.args},t.prototype.returnType=function(){return this._def.returns},t.create=function(e,r){return new t({args:e||Li.create([]),returns:r||Ai.create(),typeName:Ci.ZodFunction})},t}(fi),Ui=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),Object.defineProperty(t.prototype,"schema",{get:function(){return this._def.getter()},enumerable:!1,configurable:!0}),t.prototype._parse=function(e,t,r){return this._def.getter()._parse(e,t,r)},t.create=function(e){return new t({getter:e,typeName:Ci.ZodLazy})},t}(fi),ji=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype._parse=function(e,t,r){return t!==this._def.value?(e.addIssue(t,{code:Hn.invalid_type,expected:this._def.value,received:t}),ni):ii(t)},Object.defineProperty(t.prototype,"value",{get:function(){return this._def.value},enumerable:!1,configurable:!0}),t.create=function(e){return new t({value:e,typeName:Ci.ZodLiteral})},t}(fi),Bi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype._parse=function(e,t,r){return-1===this._def.values.indexOf(t)?(e.addIssue(t,{code:Hn.invalid_enum_value,options:this._def.values}),ni):ii(t)},Object.defineProperty(t.prototype,"options",{get:function(){return this._def.values},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enum",{get:function(){var e,t,r={};try{for(var n=H(this._def.values),i=n.next();!i.done;i=n.next()){var a=i.value;r[a]=a}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Values",{get:function(){var e,t,r={};try{for(var n=H(this._def.values),i=n.next();!i.done;i=n.next()){var a=i.value;r[a]=a}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Enum",{get:function(){var e,t,r={};try{for(var n=H(this._def.values),i=n.next();!i.done;i=n.next()){var a=i.value;r[a]=a}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},enumerable:!1,configurable:!0}),t.create=z,t}(fi),Yi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype._parse=function(e,t,r){var n=Fn.getValidEnumValues(this._def.values);return-1===n.indexOf(t)?(e.addIssue(t,{code:Hn.invalid_enum_value,options:Fn.objectValues(n)}),ni):ii(t)},t.create=function(e){return new t({values:e,typeName:Ci.ZodNativeEnum})},t}(fi),qi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype._parse=function(e,t,r){var n=this;return r!==Jn.promise&&!1===e.params.async?(e.addIssue(t,{code:Hn.invalid_type,expected:Jn.promise,received:r}),ni):(t=r===Jn.promise?t:Promise.resolve(t),ii(t.then((function(t){return n._def.type.parseAsync(t,{path:ei(e.path),errorMap:e.params.errorMap})}))))},t.create=function(e){return new t({type:e,typeName:Ci.ZodPromise})},t}(fi),Wi=function(e){function t(t){return e.call(this,t)||this}return W(t,e),t.prototype.innerType=function(){return this._def.schema},t.prototype._parse=function(e,t,r){function n(e,t){switch(t.type){case"refinement":var r=t.refinement(e,s);if(r instanceof Promise){if(a)throw new Error("You can't use .parse() on a schema containing async refinements. Use .parseAsync instead.");return r.then((function(t){var r=s.issueFound;return l=l||r,e}))}return r=s.issueFound,l=l||r,e;case"transform":if((r=t.transform(e))instanceof Promise&&a)throw new Error("You can't use .parse() on a schema containing async transformations. Use .parseAsync instead.");return r;default:throw new Error("Invalid effect type.")}}function i(e){return(e=o.reduce((function(e,t){return e instanceof Promise?e.then((function(e){return n(e,t)})):n(e,t)}),e))instanceof Promise?ai(e.then((function(e){return l?ni:ii(e)}))):l?ni:ii(e)}var a=!1===e.params.async,o=this._def.effects||[],s={issueFound:!1,addIssue:function(r){this.issueFound=!0,e.addIssue(t,r)},get path(){return ei(e.path)}},l=!1;if(a){var c=this._def.schema._parseSync(e,t,r);return si(c)?(c=o.reduce(n,c.value),l?ni:ii(c)):ni}return r=this._def.schema._parse(e,t,r),si(r)?i(r.value):oi(r)?ni:ai(r.promise.then((function(e){return oi(e)?ni:(e=i(e.value),li(e)?e.promise:e)})))},t.create=function(e){return new t({schema:e,typeName:Ci.ZodEffects})},t}(fi),Gi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype._parse=function(e,t,r){return r===Jn.undefined?ii(void 0):this._def.innerType._parse(e,t,r)},t.prototype.unwrap=function(){return this._def.innerType},t.create=function(e){return new t({innerType:e,typeName:Ci.ZodOptional})},t}(fi),Ki=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype._parse=function(e,t,r){return r===Jn.null?ii(null):this._def.innerType._parse(e,t,r)},t.prototype.unwrap=function(){return this._def.innerType},t.create=function(e){return new t({innerType:e,typeName:Ci.ZodNullable})},t}(fi),Hi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype._parse=function(e,t,r){return r===Jn.undefined&&(t=this._def.defaultValue()),this._def.innerType._parse(e,t,Qn(t))},t.prototype.removeDefault=function(){return this._def.innerType},t.create=function(e){return new Gi({innerType:e,typeName:Ci.ZodOptional})},t}(fi),Zi=function(e,t){return e?bi.create().refine(e,t):bi.create()},Xi={object:ki.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodPromise="ZodPromise"}(Ci=Ci||{});var zi=gi.create,Ji=yi.create,Qi=vi.create,$i=Ei.create,ea=_i.create,ta=Si.create,ra=Ri.create,na=bi.create,ia=Ai.create,aa=Ti.create,oa=Pi.create,sa=Ii.create,la=ki.create,ca=ki.strictCreate,da=Ni.create,ua=Di.create,ha=Li.create,fa=xi.create,pa=Mi.create,ma=Fi.create,ga=Vi.create,ya=Ui.create,va=ji.create,Ea=Bi.create,_a=Yi.create,Sa=qi.create,Ra=Wi.create,ba=Gi.create,Aa=Ki.create;Object.freeze({__proto__:null,ZodParsedType:Jn,getParsedType:Qn,makeIssue:$n,EMPTY_PATH:null,pathToArray:ei,pathFromArray:ti,ParseContext:ri,createRootContext:function(e){var t;return new ri(null,[],{async:null!==(t=e.async)&&void 0!==t&&t,errorMap:e.errorMap||zn})},INVALID:ni,OK:ii,ASYNC:ai,isInvalid:oi,isOk:si,isAsync:li,ZodType:fi,ZodString:gi,ZodNumber:yi,ZodBigInt:vi,ZodBoolean:Ei,ZodDate:_i,ZodUndefined:Si,ZodNull:Ri,ZodAny:bi,ZodUnknown:Ai,ZodNever:Ti,ZodVoid:Pi,ZodArray:Ii,get objectUtil(){return ci},mergeObjects:function(e){return function(t){var r=ci.mergeShapes(e._def.shape(),t._def.shape());return new ki({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:function(){return r},typeName:Ci.ZodObject})}},ZodObject:ki,ZodUnion:Ni,ZodIntersection:Di,ZodTuple:Li,ZodRecord:xi,ZodMap:Mi,ZodSet:Fi,ZodFunction:Vi,ZodLazy:Ui,ZodLiteral:ji,ZodEnum:Bi,ZodNativeEnum:Yi,ZodPromise:qi,ZodEffects:Wi,ZodTransformer:Wi,ZodOptional:Gi,ZodNullable:Ki,ZodDefault:Hi,custom:Zi,Schema:fi,ZodSchema:fi,late:Xi,get ZodFirstPartyTypeKind(){return Ci},any:na,array:sa,bigint:Qi,boolean:$i,date:ea,effect:Ra,enum:Ea,function:ga,instanceof:function(e,t){return void 0===t&&(t={message:"Input not instance of "+e.name}),Zi((function(t){return t instanceof e}),t)},intersection:ua,lazy:ya,literal:va,map:pa,nativeEnum:_a,never:aa,null:ra,nullable:Aa,number:Ji,object:la,oboolean:function(){return $i().optional()},onumber:function(){return Ji().optional()},optional:ba,ostring:function(){return zi().optional()},promise:Sa,record:fa,set:ma,strictObject:ca,string:zi,transformer:Ra,tuple:ha,undefined:ta,union:da,unknown:ia,void:oa,ZodIssueCode:Hn,quotelessJson:function(e){return JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:")},ZodError:Zn,defaultErrorMap:Xn,get overrideErrorMap(){return zn},setErrorMap:function(e){zn=e}});const Ta=["be","en","id","kk","ru","tr","tt","uk","uz"],Pa=Ea([Ta[0],...Ta.slice(1)]).transform(e=>e).default("ru"),Oa=da([Pa,zi().transform(()=>"ru")]).transform(e=>e).default("ru"),Ia=e=>void 0!==function(e){let t;try{t=JSON.stringify(e)}catch(Kn){}return t}(e),Ca=da([$i().default(!1).transform(e=>({autoplay:e,allowMuted:!0})),la({allowMuted:$i()}).transform(e=>{let{allowMuted:t}=e;return{autoplay:!0,allowMuted:t}})]);var wa=e(6170),ka=e(3126);const Na=da([$i().default(!1).transform(e=>({logCalls:e,logEvents:e,logInternals:e,showDebugPanel:e})),la({logCalls:$i().default(!1),logEvents:$i().default(!1),logInternals:$i().default(!1),showDebugPanel:$i().default(!1)})]).transform(e=>{let{logCalls:t,logEvents:r,logInternals:n,showDebugPanel:i}=e;return{logCalls:(0,Un.RW)("web_debug_log_calls")||(0,ka.O)(wa.hV,J)||t,logEvents:(0,Un.RW)("web_debug_log_events")||(0,ka.O)(wa.wS,J)||r,logInternals:(0,Un.RW)("web_debug_log_internals")||(0,ka.O)(wa.V9,J)||n,showDebugPanel:(0,Un.RW)("web_debug_panel")||(0,ka.O)(wa.g2,J)||i}}),Da=la({}).passthrough().optional();var La=e(9298);let xa;!function(e){e.ALL="*",e.PLAY="play",e.START_SCREEN_PLAY="startScreenPlay",e.VOLUME="sound",e.VOLUME_SLIDER="volumeSlider",e.SETTINGS="settings",e.SETTINGS_ITEM="settingsItem",e.FULLSCREEN="fullscreen",e.TIMELINE="timeline",e.TIMELINE_PREVIEW="timelinePreview",e.LIVE="live",e.POSTER="poster",e.START_POSITION_CONFIRM="startPositionConfirm",e.TIME_DISPLAY="time",e.TITLE_DISPLAY="titleDisplay",e.REPORT="report",e.FORWARD="forward",e.BACKWARD="backward",e.LOGO="logo",e.PRELOADER="preloader",e.CONTEXT_MENU="contextMenu",e.START_SCREEN="startScreen",e.PLAYBACK_RATE="playbackRate",e.SKIPPABLE_FRAGMENTS="skippableFragments",e.EXTERNAL_PLAYBACK="externalPlayback",e.RECOMMENDATIONS="recommendations",e.CLOSE_BUTTON="closeButton",e.NEXT_AD_INFO="nextAdInfo",e.SUBTITLES_TOGGLE="subtitlesToggle",e.LOGO_WIDGET="logoWidget",e.SKIP_AD="skipAd",e.MOBILE_SEEK_BUTTONS="mobileSeekButtons",e.TITLE="title"}(xa||(xa={}));const Ma=(0,La.Z)(xa).map(e=>xa[e]),Fa=zi().transform(e=>{if("!*"===e)throw new Error("!* is forbidden value");for(const t of Ma)if(e===t||e==="!"+t)return e;return""}),Va=sa(Fa).transform(e=>e.filter(Boolean)),Ua=da([sa(Fa),zi().transform(e=>e.split(",").map(e=>e.trim()).filter(e=>""!==e))]).transform(e=>Va.parse(e)).default(""),ja=Ji().optional().transform(e=>Math.max(void 0===e?30:e,5)),Ba=da([$i().transform(e=>({enabled:e,reportUrl:"https://yandex.ru/support/video-player/feedback.html"})),la({enabled:ia().transform(e=>!0===e),reportUrl:zi().default("https://yandex.ru/support/video-player/feedback.html")})]).default(!1),Ya=Number.EPSILON||Math.pow(2,-52),qa=da([$i().transform(e=>{if(e)return{onlyMuted:!1,forceAutoplay:!0,threshold:.5}}),ta().transform(()=>({onlyMuted:!0,forceAutoplay:!1,threshold:Ya})),la({onlyMuted:$i()}).strict().transform(e=>{let{onlyMuted:t}=e;return{threshold:.5,onlyMuted:t,forceAutoplay:!0}}),la({threshold:Ji().nonnegative().max(1),onlyMuted:$i().default(!1)}).transform(e=>{let{threshold:t,onlyMuted:r}=e;return{threshold:t,onlyMuted:r,forceAutoplay:!0}})]);let Wa;!function(e){e.USER_VOLUME="yandexJSPlayerApiSavedUserAdjustedVolume",e.VOLUME="yandexJSPlayerApiSavedUserVolume",e.MUTED="yandexJSPlayerApiSavedUserMuted"}(Wa||(Wa={}));var Ga=e(9396);class Ka{static setSavedVolume(e){Ga.t.setItem(Wa.VOLUME,String(e))}static getSavedVolume(){const e=this.parseVolume(Ga.t.getItem(Wa.VOLUME));return void 0===e?1:e}static setSavedMuted(e){Ga.t.setItem(Wa.MUTED,String(e))}static getSavedMuted(){return"true"===Ga.t.getItem(Wa.MUTED)}static parseVolume(e){if(!(0,yr.H)(e))return;const t=parseFloat(e);return isNaN(t)?void 0:t>=0&&t<=1?t:t>=0&&t<=100?t/100:void 0}}const Ha=Ji().refine(Q,"must be a number 0..1").optional().transform(e=>void 0===e?Ka.getSavedVolume():e).transform(e=>Q(e)?e:1),Za=la({debug:Na,autoplay:Ca,slowConnection:$i().default(!1),volume:Ha,muted:$i().optional(),preload:$i().default(!0),autoQuality:$i().default(!0),defaultQuality:Ji().nullable().default(720),feed:$i().default(!1),useAbdBundle:$i().default(!1),lang:Oa,env:Da,maxBufferLength:Ji().refine(a).transform(or.toSeconds).optional(),enableRemoteProgressSaving:$i().default(!1),liveOffset:ja,bandwidthEstimateOffset:Ji().refine(a).transform(or.toBps).optional(),report:Ba,preferNative:$i().default(!1),togglePlaybackOnVisibilityChange:qa,restoreTabSessionPlaybackProgress:$i().default(!1),useFallbackStream:$i().default(!1),loadSkin:da([ga(),va(!1)]).optional(),perfLogUrl:zi().optional(),skinParams:la({skinConfig:la({hiddenControls:Ua,primaryColor:zi().optional().default("#FFCC00"),secondaryColor:zi().optional().default("#EEEEEE")}).passthrough().optional().default({})}).refine(Ia).optional(),useNativeAdControls:$i().default(!0),device:ia().refine(Ia).transform(e=>e).default({}),backgroundColor:zi().transform(e=>e||void 0).default("#000"),objectFit:zi().optional().transform(e=>e||void 0),cacheSourcesCount:Ji().nonnegative().int().refine(a).default(0)}),Xa=Ma.filter(e=>e!==xa.ALL),za=new Set([xa.ALL,...Xa,...Xa.map(e=>"!"+e)]),Ja=e=>za.has(e);var Qa=e(5745);const $a=Za.transform(e=>{var t,r,n,i,a,o;const s=$(null==(t=e.skinParams)||null==(r=t.skinConfig)?void 0:r.hiddenControls),l=0===e.volume||(void 0===e.muted?Ka.getSavedMuted():e.muted),c=e.togglePlaybackOnVisibilityChange&&e.togglePlaybackOnVisibilityChange.forceAutoplay||e.autoplay.autoplay,d=null===e.defaultQuality?e.defaultQuality:Math.floor(e.defaultQuality/9*16),u=(0,Qa.z)();return{streamPlayerParams:{debug:e.debug.logInternals,hidden:!1===e.loadSkin?s:Ma,autoplay:!u&&c,allowMuted:(0,Un.RW)("web_forbid_allow_muted_autoplay")?l:e.autoplay.allowMuted,lang:e.lang,autoQuality:e.autoQuality,defaultQuality:d,feed:e.feed,preload:!u&&e.preload,togglePlaybackOnVisibilityChange:e.togglePlaybackOnVisibilityChange,restoreTabSessionPlaybackProgress:e.restoreTabSessionPlaybackProgress,maxBufferLength:e.maxBufferLength,preferNative:e.preferNative,report:e.report.enabled,skinConfig:null==(n=e.skinParams)?void 0:n.skinConfig,backgroundColor:e.backgroundColor,shouldPlayOnFirstClick:void 0===e.loadSkin,bandwidthEstimateOffset:e.bandwidthEstimateOffset,useNativeAdControls:e.useNativeAdControls,device:e.device,volume:e.volume,muted:l,liveOffset:e.liveOffset,slowConnection:e.slowConnection,cacheSourcesCount:e.cacheSourcesCount,showUnmuteButtonForAll:!1,perfLogUrl:null!=(i=e.perfLogUrl)?i:"https://log.strm.yandex.ru/perf"},useAbdBundle:e.useAbdBundle,useFallbackStream:e.useFallbackStream,debugConfig:e.debug,reportConfig:e.report,loadSkin:e.loadSkin,originalHiddenControls:s,primaryColor:null==(a=e.skinParams)||null==(o=a.skinConfig)?void 0:o.primaryColor,objectFit:e.objectFit,savedMutedRestored:void 0===e.muted&&0!==e.volume}}),eo="other",to={from:eo,reqid:void 0,hash:void 0,vsid:Dn};var ro=e(504);const no=["playready-proxy.ott.yandex.ru","playready-proxy-preproduction.ott.yandex.ru","widevine-proxy.ott.yandex.ru","widevine-proxy-preproduction.ott.yandex.ru","fairplay-proxy.ott.yandex.ru","fairplay-proxy-preproduction.ott.yandex.ru","drm.yandex-team.ru"],io=0,ao=["partnerId","partner_id","category","impId","imp_id","hasPreroll","videoContentId","video_content_id","videoContentName","video_content_name","videoPublisherId","video_publisher_id","videoPublisherName","video_publisher_name","videoGenreId","video_genre_id","videoGenreName","video_genre_name","distrId","distr_id","adBreaks"],oo=la({}).passthrough().default({partnerId:void 0}).transform((function(e){const{partnerId:t,partner_id:r=t,category:n=io,impId:i,imp_id:a=i,hasPreroll:o,videoContentId:s,video_content_id:l=s,videoContentName:c,video_content_name:d=c,videoPublisherId:u,video_publisher_id:h=u,videoPublisherName:f,video_publisher_name:p=f,videoGenreId:m,video_genre_id:g=m,videoGenreName:y,video_genre_name:v=y,distrId:E,distr_id:_=E,adBreaks:S}=e;return ne({},function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,ao),{partnerId:Number(r),category:Number(n),impId:void 0!==a?parseInt(String(a),10)||0:void 0,hasPreroll:"boolean"===typeof o?o:void 0,videoContentId:l,videoContentName:d,videoPublisherId:h,videoPublisherName:p,videoGenreId:g,videoGenreName:v,distrId:_,adBreaks:S})})),so=/^\w(\-|_|:|\s|\.|\w){0,70}$/,lo=la({from:zi().transform((function(e){if(!e)return to.from;const t=String(e);return so.test(t)?t:"_$invalid_label_value$_"})).optional(),slots:da([zi().transform((function(e){return"string"===typeof e?e.split(";"):[]})),sa(zi()),ia().transform(()=>{})]).optional().transform((function(e){if(!Array.isArray(e))return;const t=e.filter(e=>"string"===typeof e&&/^\d+,\d+,-?\d+$/.test(e)).sort().join(";");return t.length>0?t:void 0})),testIds:da([zi().transform((function(e){return ae(e.split(","))})),sa(zi()).transform(ae),sa(Ji()).transform(ie),ia().transform(()=>{})]).optional()}).catchall(ia().transform(e=>{if(void 0!==e)return String(e)})).transform((function(e){return void 0!==e.slots&&(e.testIds=ae(e.slots.split(";"))),e})),co=la({}).passthrough().refine(oe,"must be serializable"),uo=la({preferredAudioLangs:sa(zi()).max(1),preferredTextLangs:sa(zi()).max(1)}).transform(e=>e),ho=ba(Ji().nonnegative().refine(a).transform(or.toSeconds)).transform(e=>({videoTime:e})),fo=la({url:zi().url(),drmConfig:co.optional(),metaInfoUrl:zi().optional()}),po=la({objectFit:zi().optional()}).optional(),mo=la({videoContentId:zi().optional(),videoContentName:zi().optional(),videoContentDescription:zi().optional(),videoPublisherId:zi().optional(),videoPublisherName:zi().optional(),videoGenreId:zi().optional(),videoGenreName:zi().optional()}),go=la({endTime:Ji(),startTime:Ji(),type:Ea(["intro","recap","credits"])}),yo=la({loop:$i().default(!1),startPosition:ho,adConfig:oo.default({}),withCredentials:$i().optional(),passportRetpath:zi().url().optional(),preview:zi().optional(),firstFrameHash:zi().optional(),firstFrameUrl:zi().optional(),posterStyle:po,additionalParams:lo.optional().default({}),externalPlayerConfig:la({}).passthrough().optional(),id:zi().default(""),videoInfo:mo.default({}),enableRemoteProgressSaving:$i().optional().default(!1),preferredTracks:uo.default({preferredAudioLangs:[],preferredTextLangs:[]}),skippableFragments:sa(go).optional(),initialStalledDuration:Ji().default(0),externalStalledDuration:Ji().optional()}),vo=la({streamUrl:zi().url(),drmConfig:co.optional(),contentId:da([ta(),aa()])}),Eo=la({streams:sa(fo).nonempty(),drmConfig:da([ta(),aa()]),contentId:da([ta(),aa()])}),_o=la({contentId:zi(),streamUrl:da([ta(),aa()]),streams:da([ta(),aa()])}),So=ua(da([_o,Eo,vo]).transform(e=>{if("contentId"in e)return{contentId:e.contentId,streams:[]};if("streams"in e)return{streams:e.streams,contentId:void 0};if("streamUrl"in e)return{streams:[{url:e.streamUrl,drmConfig:e.drmConfig}],contentId:void 0};throw new Error("SourceSchema Exception")}),yo);var Ro=e(8870);const bo=["videoContentName","videoContentId","videoPublisherId","videoPublisherName","videoGenreId","videoGenreName"],Ao=So.transform(e=>({contentId:e.contentId,id:e.id,streams:e.streams,params:{startPosition:e.startPosition,adConfig:de({},e.adConfig,se(e.videoInfo,e.adConfig)),withCredentials:e.withCredentials,loop:e.loop,preview:e.preview,firstFrameHash:ce(e.firstFrameHash||""),firstFrameUrl:e.firstFrameUrl,posterStyle:e.posterStyle,additionalParams:e.additionalParams,externalPlayerConfig:(0,_r.K)(e.externalPlayerConfig)?de({},e.externalPlayerConfig,{passportRetpath:(0,yr.H)(e.passportRetpath)?e.passportRetpath:void 0}):e.externalPlayerConfig,videoInfo:se(e.videoInfo,e.adConfig),preferredTracks:e.preferredTracks,skippableFragments:e.skippableFragments},initialStalledDuration:e.initialStalledDuration,externalStalledDuration:void 0!==e.externalStalledDuration?e.externalStalledDuration:void 0}));var To=e(3563),Po=e(7550);const Oo={trackingEvents:[{init:[],start:[],end:[],setSource:[],adStart:[],adRequest:[],adError:[],adEnd:[],adPodStart:[],adPodClick:[],adPodEnd:[],adPodSkip:[],sourceStart:[],play:[],pause:[],seek:[],firstQuartile:[],midpoint:[],thirdQuartile:[],viewed:[],heartbeat:[],watchedTime:[],error:[]}]},Io=ga().args().returns(na()),Co=la({trackings:ia().transform(ge).default(Oo),update:Io.default(()=>Cr.Z),enableRemoteProgressSaving:$i().default(!1).or(ia().transform(()=>!1)),videoInfo:mo.default({})});let wo;!function(e){e.PLAYER_API="player-api.js",e.PLAYER_API_MODERN="player-api.modern.js",e.PLAYER_API_MOCK="player-api-mock.js"}(wo||(wo={}));const ko=e=>(e=>{try{if("noModule"in e.HTMLScriptElement.prototype)return!0}catch(t){}return!1})(e)&&(e=>(0,Fr.t)(e.navigator.sendBeacon))(e),No=/1\.0-(\d+)/,Do=(e=>ko(e))(window),Lo=!(0,Fr.t)(Math.random)||Math.random()===Math.random();var xo=e(3451);let Mo=(0,xo.m6)()*(0,xo.no)()%2147483647;const Fo=Lo?function(){return Mo=16807*Mo%2147483647,(Mo-1)/2147483646}:function(){return Math.random()},Vo=function(e){const t=100*Fo();let r=0;for(let n=0;n<e.length;n++)if(r+=e[n].percent,t<r)return e[n].id;return e[0].id}([{id:11679,percent:100}]),Uo=function(e){return void 0===e&&(e=window),/Windows Phone/i.test(e.navigator.userAgent)},jo=Re();var Bo=e(3628);const Yo=(0,Bo.P)(),qo=function(e){void 0===e&&(e=window);const t=(0,yn.i)(e).toLowerCase();return/linux/.test(t)&&!Re(e)}(),Wo=function(e){void 0===e&&(e=window);const t=(0,yn.i)(e).toLowerCase();return/mac/.test(t)&&!(0,Bo.P)(e)}(),Go=Uo();var Ko=e(5753);let Ho,Zo,Xo,zo;!function(e){e.DESKTOP="d",e.MOBILE="m"}(Ho||(Ho={})),function(e){e.DESKTOP="desktop",e.MOBILE="mobile",e.TABLET="tablet"}(Zo||(Zo={})),function(e){e.UNDEFINED="0",e.DESKTOP="1",e.IOS="2",e.ANDROID="3",e.WINDOWS_MOBILE="4"}(Xo||(Xo={})),function(e){e.vsid="vsid",e.dl="dl",e.random="random",e.timestamp="timestamp",e.fts="fts",e.vts="vts",e["watched-time"]="watched-time",e["video-time"]="video-time",e["device-type"]="device-type",e["device-type-mediascope"]="device-type-mediascope",e["device-type-tns"]="device-type-tns",e.fullscreen="fullscreen",e.duration="duration",e["old-position"]="old-position",e["error-code"]="error-code",e["audio-track-name"]="audio-track-name",e["audio-track-lang"]="audio-track-lang",e["text-track-name"]="text-track-name",e["text-track-lang"]="text-track-lang",e.muted="muted",e["drm-supported"]="drm-supported",e["drm-type"]="drm-type",e["bitrate-video"]="bitrate-video",e["bitrate-audio"]="bitrate-audio",e["buffering-duration"]="buffering-duration",e["buffering-count"]="buffering-count",e["initial-buffering-time"]="initial-buffering-time",e["ad-position"]="ad-position",e["client-ad-sec"]="client-ad-sec"}(zo||(zo={}));const Jo=(0,La.Z)(zo),Qo=new RegExp(/^https:\/\/tracking(-testing){0,1}\.ott\.yandex\.net\/v\d+\/watch-batch/);var $o=e(3807);class es{constructor(){this.handlers=Object.create(null),this.onceHandlers=Object.create(null),this.maxEventListeners=10}setMaxListeners(e){!isFinite(e)||e<=0||(this.maxEventListeners=e)}on(e,t){this.getHandlers(e).push(t),this.checkSubscriptions(e)}once(e,t){this.getOnceHandlers(e).push(t),this.checkSubscriptions(e)}off(e,t){const r=this.getHandlers(e),n=this.getOnceHandlers(e);if(void 0===t)return r.length=0,void(n.length=0);this.removeHandler(t,r),this.removeHandler(t,n)}emit(e,t){const r=this.getHandlers(e),n=this.getOnceHandlers(e).slice();this.getOnceHandlers(e).length=0,r.slice().concat(n).forEach(e=>{try{e(t)}catch(r){setTimeout(()=>{throw r},0)}})}getHandlers(e){return void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e]}getOnceHandlers(e){return void 0===this.onceHandlers[e]&&(this.onceHandlers[e]=[]),this.onceHandlers[e]}checkSubscriptions(e){const t=this.getHandlers(e).length+this.getOnceHandlers(e).length;t>this.maxEventListeners&&console.warn("There are "+t+" subscriptions on event named "+String(e))}removeHandler(e,t){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}}class ts{constructor(){this.value=0,this.measureTime=()=>0}start(){this.measureTime=r()}pause(){this.value=this.value+this.measureTime(),this.measureTime=()=>0}getTime(){return this.value+this.measureTime()}reset(){this.measureTime=r(),this.value=0}}let rs;!function(e){e.LIVE="LIVE",e.EVENT="EVENT",e.VOD="VOD"}(rs||(rs={}));const ns=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test((0,yn.i)());class is extends es{constructor(e){super(),this.params=e,this.MACROS={dl:()=>window.document.referrer||window.location&&window.location.href||"",random:()=>Math.floor(Math.random()*10**16),timestamp:()=>String(Date.now()),vts:()=>{return Math.floor((e=Date.now(),Math.round(e/1e3)));var e},fts:()=>{const e=this.params.getVideoType();return Math.floor(e===rs.VOD?this.params.getCurrentTime():this.params.getUtcPosition())},"watched-time":()=>Math.floor(this.params.getWatchedTime()),"video-time":()=>Math.floor(this.params.getCurrentTime()),"device-type":()=>ns?Ho.MOBILE:Ho.DESKTOP,"device-type-mediascope":()=>ns?Zo.MOBILE:Zo.DESKTOP,"device-type-tns":()=>{if(ns){if(Yo)return Xo.IOS;if(jo)return Xo.ANDROID;if(Go)return Xo.WINDOWS_MOBILE}else if(vn||Wo||qo)return Xo.DESKTOP;return Xo.UNDEFINED},fullscreen:()=>this.params.getIsFullscreen()?"1":"0",duration:()=>Math.floor(this.params.getDuration()),vsid:()=>this.params.vsid,"audio-track-name":()=>{const e=this.params.getAudioTrack();return e?e.name:""},"audio-track-lang":()=>{const e=this.params.getAudioTrack();return e?e.lang:""},"text-track-name":()=>{const e=this.params.getTextTrack();return e?e.name:""},"text-track-lang":()=>{const e=this.params.getTextTrack();return e?e.lang:""},"drm-supported":()=>{switch(this.params.getIsDrmSupported()){case!0:return"1";case!1:return"0";default:return""}},"drm-type":()=>{var e;return null!=(e=this.params.getDrmSystemName())?e:""},"bitrate-video":()=>{var e;const t=null==(e=this.params.getVideoTrack())?void 0:e.bitrate;return t?Math.floor(1e3*t):""},"bitrate-audio":()=>{var e;const t=null==(e=this.params.getAudioTrack())?void 0:e.bitrate;return t?Math.floor(1e3*t):""},"initial-buffering-time":()=>{var e;return null!=(e=this.initialBufferingTime)?e:""},"ad-position":()=>{const{type:e}=this.params.getAdState();return Ie(e)},"client-ad-sec":()=>Math.floor(this.clientAdTimeMeasurer.getTime()/1e3),muted:()=>this.params.getMuted()?"1":"0"},this.measureInitialBufferingTime=void 0,this.initialBufferingTime=void 0,this.clientAdTimeMeasurer=new ts,this.watchedTimeClock=new $o.EW,this.heartbeatTimers=[],this.bufferedInfoByTrackKey={},this.trackingEvents={init:[],start:[],end:[],setSource:[],adStart:[],adRequest:[],adError:[],adEnd:[],adPodStart:[],adPodClick:[],adPodEnd:[],adPodSkip:[],sourceStart:[],play:[],pause:[],seek:[],firstQuartile:[],midpoint:[],thirdQuartile:[],viewed:[],heartbeat:[],watchedTime:[],error:[]},this.onError=e=>{let{code:t,isFatal:r}=e;r&&this.trackingEvents.error.forEach(e=>{const r=Oe(e);this.parseAndTrackUrls([e],Ce({"error-code":()=>String(t)},this.getBufferedInfoGetters(r))),this.clearBufferedInfo(r)})},this.onReady=()=>{this.parseAndTrackUrls(this.trackingEvents.init)},this.onSetSourceComplete=()=>{this.parseAndTrackUrls(this.trackingEvents.setSource)},this.onWatchedTimeChange=e=>{isNaN(e)||this.watchedTimeClock.setTime(1e3*e)},this.onCurrentTimeChange=e=>{this.emit("CurrentTimeChange",e)},this.onAdLoaded=e=>{this.emit("AdLoaded",e)},this.onAdError=()=>{this.emit("AdError")},this.onAdStateChange=e=>{this.emit("AdStateChange",e)},this.onAdPodStart=()=>{this.emit("AdPodStart")},this.onAdPodEnd=()=>{this.emit("AdPodEnd")},this.onAdPodClick=()=>{this.emit("AdPodClick")},this.onAdPodSkip=()=>{this.emit("AdPodSkip")},this.onStateChange=e=>{this.emit("StateChange",e)}}setTrackings(e){this.resetTrackings(),this.trackingEvents=function(e){if(!Array.isArray(e))return e;const t={init:[],start:[],end:[],setSource:[],adStart:[],adRequest:[],adError:[],adEnd:[],adPodStart:[],adPodClick:[],adPodEnd:[],adPodSkip:[],sourceStart:[],play:[],pause:[],seek:[],firstQuartile:[],midpoint:[],thirdQuartile:[],viewed:[],heartbeat:[],watchedTime:[],error:[]};return e.forEach(e=>{ee(e).forEach(e=>{let[r,n]=e;Array.isArray(t[r])||(t[r]=[]),t[r].push(...n)})}),t}(e.trackingEvents);const{start:t,end:n,adStart:i,adError:a,adRequest:o,adEnd:s,adPodStart:l,adPodClick:c,adPodEnd:d,adPodSkip:u,sourceStart:h,play:f,pause:p,error:m,firstQuartile:g,midpoint:y,thirdQuartile:v,viewed:E,heartbeat:_,watchedTime:S}=this.trackingEvents,R=(0,zt.I)(()=>{this.parseAndTrackUrls(h)});let b=[...E,...Pe(g,25),...Pe(y,50),...Pe(v,75)],A=!1;[..._,...p,...m].forEach(e=>{const t=Oe(e);this.bufferedInfoByTrackKey[t]={count:0,time:0}});const T=()=>{R(),A=!0,this.parseAndTrackUrls(t),this.heartbeatTimers=_.concat(S.map(Te)).map(e=>{const[t,{delay:r,offset:n=r,callsCount:i=1/0,utcStart:a,utcEnd:o}]=e,s=Oe(e);let l=0;const c=new $o.B7(()=>{const e=Math.round(this.params.getUtcPosition());return void 0!==a&&e<a||void 0!==o&&e>o?1e3:0===l?(l++,n):(this.parseAndTrackUrls([t],this.getBufferedInfoGetters(s)),this.clearBufferedInfo(s),l++,l>i?(c.destroy(),0):r)},this.watchedTimeClock);return c}),this.heartbeatTimers.forEach(e=>e.start())};let P=!1,O=!1;this.on("CurrentTimeChange",e=>{if(!this.isStreamPlaying())return;!A&&e>0&&T();const t=this.params.getDuration();if(!t)return;if(this.params.getVideoType()!==rs.VOD)return;const r=e/t;b=b.filter(e=>{let[t,{percent:n}]=e;return!(r>n/100)||(this.parseAndTrackUrls([t]),!1)})}),this.on("AdStateChange",e=>{let{state:t,type:r}=e;const n=t===Pn.PLAYING;n&&R(),this.parseAndTrackUrls(n?i:s),this.clientAdTimeMeasurer.reset()}),this.on("AdLoaded",e=>{let{adType:t}=e;this.parseAndTrackUrls(o,{"ad-position":()=>Ie(t)})}),this.on("AdError",()=>{this.parseAndTrackUrls(a)});let I=null;this.on("StateChange",e=>{if(this.isAdPlaying())I=null;else if(e===Or.X.BUFFERING)I=r();else if(null!==I){const e=I()/1e3;I=null;for(const t in this.bufferedInfoByTrackKey)Object.prototype.hasOwnProperty.call(this.bufferedInfoByTrackKey,t)&&(this.bufferedInfoByTrackKey[t].count++,this.bufferedInfoByTrackKey[t].time=e+this.bufferedInfoByTrackKey[t].time)}}),this.on("StateChange",e=>{this.isAdPlaying()?e===Or.X.PLAY?this.clientAdTimeMeasurer.start():this.clientAdTimeMeasurer.pause():this.clientAdTimeMeasurer.reset()}),this.on("StateChange",e=>{if(e===Or.X.END)return void this.parseAndTrackUrls(n);if(!P){if(e===Or.X.PLAY)this.initialBufferingTime=this.measureInitialBufferingTime?Math.floor(Math.floor(this.measureInitialBufferingTime())):Math.floor(0),this.parseAndTrackUrls(f),P=!0,O=!0;else if(e===Or.X.BUFFERING){var t;this.measureInitialBufferingTime=null!=(t=this.measureInitialBufferingTime)?t:r()}return}if(this.isAdPlaying())return;const i=e===Or.X.PLAY||e===Or.X.BUFFERING;i!==O&&(O=i,i?this.parseAndTrackUrls(f):p.forEach(e=>{const t=Oe(e);this.parseAndTrackUrls([e],this.getBufferedInfoGetters(t)),this.clearBufferedInfo(t)}))});let C=!1,w=!1;this.on("AdPodStart",()=>{C=!0,w=!1,this.parseAndTrackUrls(l),this.clientAdTimeMeasurer.reset()}),this.on("AdPodClick",()=>{this.parseAndTrackUrls(c),this.clientAdTimeMeasurer.reset()}),this.on("AdPodSkip",()=>{w=!0,this.parseAndTrackUrls(u),this.clientAdTimeMeasurer.reset()}),this.on("AdPodEnd",()=>{!w&&C?(C=!1,this.parseAndTrackUrls(d),this.clientAdTimeMeasurer.reset()):C=!1})}destroy(){this.resetTrackings(),this.emit("Destroy"),this.off("Destroy")}clearBufferedInfo(e){const t=this.bufferedInfoByTrackKey[e];void 0!==t&&(t.time=0,t.count=0)}getBufferedInfoGetters(e){const t=this.bufferedInfoByTrackKey[e];return{"buffering-duration":()=>void 0===t?"":Math.floor(t.time),"buffering-count":()=>void 0===t?"":t.count}}isStreamPlaying(){return this.params.getPlayingState()===Or.X.PLAY&&!this.isAdPlaying()}isAdPlaying(){return this.params.getAdState().state===Pn.PLAYING}resetTrackings(){this.heartbeatTimers.forEach(e=>e.destroy()),this.clientAdTimeMeasurer.reset(),this.watchedTimeClock.reset(),this.bufferedInfoByTrackKey={},this.measureInitialBufferingTime=void 0,this.initialBufferingTime=void 0,this.off("StateChange"),this.off("AdStateChange"),this.off("AdLoaded"),this.off("AdError"),this.off("AdPodStart"),this.off("AdPodClick"),this.off("AdPodSkip"),this.off("AdPodEnd"),this.off("CurrentTimeChange")}parseAndTrackUrls(e,t){void 0===t&&(t={});const r=Ce({},this.MACROS,t);e.forEach(e=>{const t=Jo.reduce((e,t)=>{const n=r[t];return void 0===n?e:function(e,t,r){return e.replace(new RegExp("{{"+t+"}}","gm"),encodeURIComponent(r))}(e,t,String(n()))},e);if(function(e){return Qo.test(e)}(e)){const r=(0,Ko.c)("data",t);Ae({url:e.split("?")[0],data:"["+r+"]",contentType:"application/json"})}else be(t)})}}const as=function(e){return void 0===e&&(e=window),/YandexSearch|YaSearchBrowser|YaApp_iOS|YaApp_Android/i.test((0,yn.i)(e))}()?"#feedback__app-problem":"#feedback__browser-problem";var os=e(2022),ss=e(3834),ls=e(9200),cs=e(5636);const ds=(0,ro.en)(window.location.href).hostname.split(".").reverse()[0];var us=e(7668);const hs=()=>Le({method:"GET",url:"https://frontend.vh.yandex.ru/csrf_token",retries:3,withCredentials:!0}).then(e=>{try{return{token:e}}catch(t){return{token:""}}}),fs=()=>Le({method:"GET",url:"https://cloud-api.yandex.ru/videoplayer/v1/personality/profile/yandex_io/devices/",retries:3,withCredentials:!0}).then(e=>{try{const{items:t}=JSON.parse(e);return t&&t.length?t:[]}catch(t){return[]}}),ps=()=>Le({method:"GET",url:"https://quasar.yandex.<tld>/devices_online_stats",retries:3,withCredentials:!0}).then(e=>{try{const{items:t}=JSON.parse(e);return t&&t.length?t:[]}catch(t){return[]}}),ms=(e,t)=>{const r={msg:De({},e.config,{start_position:e.startPosition}),device:e.externalPlayerId};return Le({method:"POST",url:"https://yandex.ru/video/station",headers:{"X-CSRF-TOKEN":t},data:JSON.stringify(r),retries:3,withCredentials:!0}).then(e=>{const t=JSON.parse(e);if("play"!==t.status)throw new Error("ExternalPlaybackError: "+t.msg)})};let gs;!function(e){e.OK="OK",e.SLOW="SLOW",e.UNKNOWN="UNKNOWN"}(gs||(gs={}));const ys={min:1,max:1/0},vs={min:0,max:1};var Es=e(5654);const _s=(0,zt.I)(()=>qe(Es.toString()));let Ss;!function(e){e.play="play",e.pause="pause",e.seek="seek",e.setSource="setSource",e.preloadSource="preloadSource",e.abortPreloadSource="abortPreloadSource",e.setVolume="setVolume",e.setMuted="setMuted",e.setFullscreen="setFullscreen",e.setPictureInPicture="setPictureInPicture",e.setPlaybackRate="setPlaybackRate",e.setVideoTrack="setVideoTrack",e.setAudioTrack="setAudioTrack",e.setTextTrack="setTextTrack",e.setNativeTextTrackVisibility="setNativeTextTrackVisibility",e.setNativeAdControlsVisibility="setNativeAdControlsVisibility",e.setHiddenControls="setHiddenControls",e.setVideoStyle="setVideoStyle",e.setPictureInPictureEnabled="setPictureInPictureEnabled",e.setExternalVisualState="setExternalVisualState",e.getExternalVisualState="getExternalVisualState",e.requestDebugInfo="requestDebugInfo",e.xhrRequest="xhrRequest",e.stopAd="stopAd",e.playInrollAd="playInrollAd",e.skipAdPod="skipAdPod",e.playAdViewers="playAdViewers",e.destroy="destroy",e.logDelta="logDelta"}(Ss||(Ss={}));const Rs=e=>{let t=e;return(0,nn.k)(e)?[].concat(e).map(e=>Rs(e)):C(e)?new Date(e.getTime()):(!(0,xr.m)(e)&&(0,_r.K)(e)&&(t={},(0,an.M)(e,(e,r)=>{t[r]=Rs(e)})),t)};class bs extends es{constructor(e){let{id:t,sender:r,receiver:n,internal:i=!1}=e;super(),this.id=void 0,this.sender=void 0,this.receiver=void 0,this.id=t,this.sender=r,this.receiver=n;n["handle_event_"+t]=e=>this.emit("Event",e);const a=i?e=>this.emit("Command",Rs(e)):e=>this.emit("Command",e);n["handle_command_"+t]=a}sendEvent(e,t){let{sourceId:r=NaN,data:n}=t;try{this.sender["handle_event_"+this.id]({eventName:e,data:n,sourceId:r})}catch(i){}}sendCommand(e,t){try{this.sender["handle_command_"+this.id]({commandName:e,params:t,sendAnswer:Gr.Z})}catch(r){}}sendRequest(e,t){return new Promise(r=>{try{this.sender["handle_command_"+this.id]({commandName:e,params:t,sendAnswer:r})}catch(n){}})}destroy(){this.receiver["handle_event_"+this.id]=void 0,this.receiver["handle_command_"+this.id]=void 0,this.off("Command"),this.off("Event")}}const As=[vr.NO_CODECS,vr.UNSUPPORTED_ENV,vr.CONFIG,vr.NETWORK_PLAYER,vr.BANNED,vr.REGIONAL],Ts=Ke({},{onReady:!1,onResourcesIdle:!1,onInit:!1,onInitError:!1,onVolumeChange:!1,onFullScreenChange:!1,onVisualStateChange:!1,onStartStageChange:!1,onNextAdRemainingTimeChange:!1,onStreamsWithSupportInfoChange:!1,onNetworkStatusChange:!1,onLogEvent:!1,onPreloadSourceResolve:!1,onPreloadSourceReject:!1,onBandwidthEstimateChange:!1,onRequestFullscreenChange:!1,onPlaybackQualityUpdate:!1,onExpectedStalledChange:!1,onPreloadDetailsUpdate:!1,onCapSizeChange:!1},{onChangeStream:!0,onDrmSystemChange:!0,onStateChange:!0,onAdStateChange:!0,onAdLoaded:!0,onAdError:!0,onBeforeAdPodStart:!0,onAdPodStart:!0,onAdPodClick:!0,onAdPodSkip:!0,onAdPodEnd:!0,onAdSkippableStateChange:!0,onAdVolumeAvailabilityStateChange:!0,onAdPodCloseStateChange:!0,onAdPodDurationChange:!0,onAdPodCurrentTimeChange:!0,onAdPodTimeToSkipChange:!0,onAdInteraction:!0,onPositionChange:!0,onTimelineInfoChange:!0,onError:!0,onRecover:!0,onVideoTrackChange:!0,onVideoTracksChange:!0,onAudioTrackChange:!0,onAudioTracksChange:!0,onTextTrackChange:!0,onTextTracksChange:!0,onSubtitlesChange:!0,onThumbnailTileGeneralMetaInfoChange:!0,onVideoTypeChange:!0,onVideoSizeChange:!0,onOriginalBroadcastAdStateChange:!0,onContentImpression:!0,onBufferingRangesChange:!0,onPlaybackRateChange:!0,onEngineChange:!0,onInrollFrame:!0});var Ps=e(3635);let Os=function(e,t,r){(0,xr.m)(e.attachEvent)&&e.attachEvent("on"+t,r)},Is=function(e,t,r){(0,xr.m)(e.detachEvent)&&e.detachEvent("on"+t,r)};(0,Ps.C)(EventTarget.prototype,"addEventListener")&&(0,Ps.C)(EventTarget.prototype,"removeEventListener")&&(Os=function(e,t,r,n){const i=e&&(0,Ps.C)(e,"addEventListener");i&&i.call(e,t,r,n)},Is=function(e,t,r,n){const i=e&&(0,Ps.C)(e,"removeEventListener");i&&i.call(e,t,r,n)});let Cs=!1,ws=!1,ks=!1;try{if(function(e){void 0===e&&(e=window);const t=e.Object;try{const e={};return t.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(r){return!1}}()){const e=document.createElement("div"),t={};Object.defineProperty(t,"once",{get:()=>Cs=!0}),Object.defineProperty(t,"passive",{get:()=>ws=!0}),Object.defineProperty(t,"capture",{get:()=>ks=!0}),Os(e,"click",Gr.Z,t)}}catch(yc){}const Ns=[{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},{enabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}},{enabled:"webkitSupportsFullscreen",element:"webkitDisplayingFullscreen",request:"webkitEnterFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}}],Ds=["from_block","stream_block"];let Ls;!function(e){e.PLAY="PLAY",e.PAUSE="PAUSE",e.PREVENT_ACTIONS="PREVENT_ACTIONS",e.CALL_NEXT="CALL_NEXT"}(Ls||(Ls={}));const xs=()=>e=>{let{next:t}=e;t({actionType:Ls.PREVENT_ACTIONS})},Ms=e=>{let{settings:t}=e;return void 0===t?xs():e=>{let{next:t,getState:r}=e;const{visualState:n}=r();return n.isFullScreen?t({actionType:n.isDocumentVisible?Ls.PLAY:Ls.PAUSE}):t({actionType:Ls.CALL_NEXT})}},Fs=e=>{let{settings:t}=e;return void 0===t?xs():e=>{let{next:t,getState:r}=e;const{visualState:n}=r();return t({actionType:(n.isVisibilitySupported?n.isElementVisible:n.isDocumentVisible)?Ls.PLAY:Ls.PAUSE})}},Vs=e=>{let{settings:t}=e;return void 0===t?xs():e=>{let{next:r,getState:n}=e;return t.onlyMuted&&!n().muted?r({actionType:Ls.PREVENT_ACTIONS}):r({actionType:Ls.CALL_NEXT})}},Us=e=>{let{settings:t}=e;return void 0===t?xs():e=>{let{next:t,getState:r}=e;return r().visualState.isPip?t({actionType:Ls.PREVENT_ACTIONS}):t({actionType:Ls.CALL_NEXT})}},js=(e,t,r,n)=>function(){try{return t.apply(r||this,arguments)}catch(Kn){if((0,xr.m)(n)&&n(Kn),!0===Kn.preventProtect)throw Kn;js.log(Kn,e)}};js.log=function(e,t){console.log("LOG:"+t+":"+e)},js.setTimeout=(e,t,r,n)=>window.setTimeout(js("timeout",e,r,n),t);const Bs=function(e,t){return void 0===t&&(t={}),(r,n)=>{let i;const a={portion:void 0!==t.portion?t.portion:0,interval:void 0!==t.interval?t.interval:300,overlappedPoints:void 0!==t.overlappedPoints?t.overlappedPoints:[[0,0]]},o=e({portion:Math.max(Number.MIN_VALUE,a.portion),interval:a.interval,overlappedPoints:a.overlappedPoints,element:r,callback:js("visibilityObserver",e=>{i!==e&&(i=e,n(e))})});if(!o)throw new Error("visibilityObserver: no strategy");return o.start(),(0,zt.I)(()=>o.stop())}};class Ys{static from(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{const r=[];for(const n of t){let t=()=>null;const i=n(ze({},e,{callback:e=>t(e)}));if(!i)return null;r.push(e=>(t=e,i))}return new Ys({callback:e.callback,strategyFactories:r})}}constructor(e){this.args=e,this.strategies=void 0,this.runningCount=0,this.callback=(e,t)=>{const r=e+1;t?r===this.strategies.length?this.args.callback(t):r===this.runningCount&&this.startNext():(this.stopUntil(r),this.args.callback(t))},this.strategies=ln(e.strategyFactories,(e,t)=>e(e=>this.callback(t,e)))}start(){!this.runningCount&&this.strategies.length&&this.startNext()}stop(){this.stopUntil(0)}get isDetermined(){for(const e of this.strategies)if(!e.isDetermined)return!1;return!0}getIsVisible(){for(let e=0;e<this.strategies.length;e++)if(!this.strategies[e].getIsVisible())return!1;return!0}startNext(){this.strategies[this.runningCount++].start()}stopUntil(e){for(;this.runningCount>e;)this.strategies[--this.runningCount].stop()}}let qs="hidden",Ws="visibilitychange";if(!(qs in document)){const e=["webkit","moz","ms","o"];for(const t of e){const e=t+"Hidden";if(e in document){qs=e,Ws=t+"visibilitychange";break}}}const Gs=new class{constructor(e){void 0===e&&(e=window),this.windowObj=e,this.yaBroApiInstance=void 0,this.initYaBrowserApi()}canUseYaBroApi(){return Boolean(this.yaBroApiInstance&&this.yaBroApiInstance.isInCustoPage)}isPageHiddenYaBroApi(){return!(this.yaBroApiInstance&&this.yaBroApiInstance.pageVisible)}initYaBrowserApi(){this.windowObj.browser&&this.windowObj.browser.BrowserEmbeddedApi&&this.windowObj.browser.BrowserEmbeddedApi.getInstance().then(e=>{this.yaBroApiInstance=e})}};class Ks{static factory(e){return new Ks(e)}constructor(e){this.args=e,this.isDetermined=!0,this.subscription=void 0,this.timer=void 0,this.onVisibilityChangeCallback=()=>{this.args.callback(this.getIsVisible())}}start(){this.timer=window.setTimeout(()=>{this.onVisibilityChangeCallback(),this.subscription=function(e,t,r,n,i){if(!e||!r)return null;let a=$e(js("handler:"+t,r,n));const o={un(){Is(e,t,a)}};var s;return i&&i.once&&!Cs&&(s=a,a=function(e){s.call(this,e),et(o)}),Os(e,t,a,ws?i:i&&i.capture),o}(document,Ws,this.onVisibilityChangeCallback)})}stop(){window.clearTimeout(this.timer),et(this.subscription)}getIsVisible(){return!(Gs.canUseYaBroApi()?Gs.isPageHiddenYaBroApi():Boolean(document[qs]))}}const Hs=e=>{try{const{left:t,right:r,top:n,bottom:i}=e.getBoundingClientRect();return{left:t,right:r,top:n,bottom:i,width:r-t,height:i-n}}catch(Kn){return{left:0,width:0,top:0,height:0,right:0,bottom:0}}};class Zs{static factory(e){return"undefined"===typeof IntersectionObserver?null:"thresholds"in IntersectionObserver.prototype&&e.element?new Zs(e):null}constructor(e){this.args=e,this.isDetermined=!0,this.observer=void 0,this.threshold=void 0,this.callback=e=>{const t=e[0].intersectionRatio>=this.observer.thresholds[0];this.args.callback(t)},this.threshold=Math.max(2**-149,this.args.portion),this.observer=new IntersectionObserver(this.callback,{threshold:this.threshold})}start(){this.observer.observe(this.args.element)}stop(){this.observer.disconnect()}getIsVisible(){return e=this.args.element,t=this.threshold,rt(e)>=(t||Number.MIN_VALUE);var e,t}}class Xs extends class{constructor(e){this.args=e,this.isDetermined=!0,this.timer=void 0}start(){this.timer=window.setInterval(js("visibilityObserver",()=>{this.args.callback(this.isVisible())}),this.args.interval)}stop(){window.clearInterval(this.timer)}getIsVisible(){return this.isVisible()}}{static factory(e){return e.element?new Xs(e):null}constructor(e){super(e),this.args=e,this.isDetermined=void 0,this.windowChain=(e=>{const t=[];for(;e;)try{if((0,ss.b)(e),t.push(e),e.parent===e)break;e=e.parent}catch(Kn){break}return t})(window).reverse();try{this.isDetermined=Boolean((window.top||window).location.hostname)}catch(Kn){this.isDetermined=!1}}isVisible(){const e=Hs(this.args.element),t=e.width*e.height;if(t<=0)return!1;const r=function(e,t,r){let n=0;for(arguments.length<3&&(n=1,r=e[0]);n<e.length;n++)r=t(r,e[n],n,e);return r}(this.windowChain,(e,t)=>this.getFrameVisiblePart(t,e),void 0),n=Math.max(e.left,r.left),i=Math.max(e.top,r.top);return(Math.min(e.right,r.right)-n)*(Math.min(e.bottom,r.bottom)-i)>=Math.floor(t*this.args.portion)}getFrameVisiblePart(e,t){if(!t||!e.frameElement)return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight};const r=Hs(e.frameElement);return{left:Math.max(t.left-r.left,0),right:e.innerWidth-Math.max(r.right-t.right,0),top:Math.max(t.top-r.top,0),bottom:e.innerHeight-Math.max(r.bottom-t.bottom,0)}}}let zs=null;try{"undefined"!==typeof IntersectionObserver&&(zs=Ys.from(class{static from(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{for(const r of t){const t=r(e);if(t)return t}return null}}}.from(Zs.factory,Xs.factory),Ks.factory))}catch(vc){}class Js extends es{constructor(e,t){super(),this.visibilityThreshold=-1,this.state={isPip:!1,isFullScreen:!1,isDocumentVisible:(0,br.s)(document),isElementVisible:!0,isVisibilitySupported:null!==zs},this.element=void 0,this.observe=e=>(this.on("Change",e),()=>this.off("Change",e)),this.notifyDocumentVisibility=e=>{this.state.isDocumentVisible!==e&&(this.state=nt({},this.state,{isDocumentVisible:e}),this.handleChange())},this.notifyElementVisibility=e=>{this.state.isElementVisible!==e&&(this.state=nt({},this.state,{isElementVisible:e}),this.handleChange())},this.element=e,this.state.isDocumentVisible=(0,br.s)(e.ownerDocument),t&&(this.visibilityThreshold=Math.min(t.threshold,.99)),this.observeVisibility()}notifyFullScreen(e){this.state.isFullScreen!==e&&(this.state=nt({},this.state,{isFullScreen:e}),this.handleChange())}notifyPip(e){this.state.isPip!==e&&(this.state=nt({},this.state,{isPip:e}),this.handleChange())}destroy(){this.emit("Destroy"),this.off("Change")}getState(){return this.state}observeVisibility(){if(this.state.isVisibilitySupported)try{const e=Bs(zs,{portion:this.visibilityThreshold})(this.element,this.notifyElementVisibility);this.once("Destroy",e),this.once("Restart",e),this.once("Restart",()=>this.off("Destroy",e))}catch(e){this.state.isVisibilitySupported=!1,this.state.isElementVisible=!0}try{const e=Bs(Ys.from(Ks.factory))(this.element,this.notifyDocumentVisibility);this.once("Destroy",e),this.once("Restart",e),this.once("Restart",()=>this.off("Destroy",e))}catch(e){}}restart(){this.emit("Restart"),this.observeVisibility()}handleChange(){this.emit("Change",this.state)}}class Qs{constructor(e){let{element:t,togglePlaybackVisibilitySetting:r,playerStateAdaptor:n,playPauseController:i}=e;this.visibilityObserver=void 0,this.playerStateAdaptor=void 0,this.playPauseController=void 0,this.middlewareInitParams=void 0,this.middlewareList=void 0,this.destroyCallbacks=void 0,this.lastChainId=0,this.done=e=>{switch(e.actionType){case Ls.PLAY:return this.playPauseController.play();case Ls.PAUSE:return this.playPauseController.pause();case Ls.PREVENT_ACTIONS:case Ls.CALL_NEXT:return}},this.destroyCallbacks=[],this.visibilityObserver=new Js(t,r),this.playPauseController=i;const a=this.visibilityObserver.observe(()=>{this.emitChange()}),o=n.onChange(()=>{this.emitChange()});this.playerStateAdaptor=n,this.destroyCallbacks.push(a,o,()=>this.visibilityObserver.destroy()),this.middlewareInitParams={settings:r},this.middlewareList=r?[Fs(this.middlewareInitParams),Ms(this.middlewareInitParams),Us(this.middlewareInitParams),Vs(this.middlewareInitParams)]:[]}appendMiddleware(e){this.middlewareList.unshift(e(this.middlewareInitParams))}prependMiddleware(e){this.middlewareList.push(e(this.middlewareInitParams))}observeVisualState(e){return this.visibilityObserver.observe(e)}restartVisibilityObserver(){return this.visibilityObserver.restart()}getVisualState(){return this.visibilityObserver.getState()}notifyFullScreen(e){this.visibilityObserver.notifyFullScreen(e)}notifyPip(e){this.visibilityObserver.notifyPip(e)}destroy(){this.destroyCallbacks.forEach(e=>e())}emitChange(){const e=++this.lastChainId,t=it({},this.playerStateAdaptor.getState(),{visualState:this.visibilityObserver.getState()}),r=()=>t;this.middlewareList.reduce((t,n)=>()=>{n({getState:r,next:(0,zt.I)(r=>{if(e===this.lastChainId)return r.actionType===Ls.CALL_NEXT?t():this.done(r)})})},Cr.Z)()}}class $s{actualizeAutoplay(e){this.expectedAutoplay=e}constructor(e){let{play:t,pause:r,togglePlaybackVisibilitySetting:n,autoplay:i,playerStateAdaptor:a,logEvent:o}=e;this.play=void 0,this.pause=void 0,this.destroy=void 0,this.paused=!1,this.wasEverPlaying=!1,this.pausedViaController=!1,this.expectedAutoplay=!1,this.expectedAutoplay=i,this.paused=!at(a.getState()),this.play=()=>{(function(e){let{playingState:t,togglePlaybackVisibilitySetting:r,autoplay:n,wasEverPlaying:i}=e;return!!r&&(i?!at({playingState:t}):(r.forceAutoplay||n)&&!ot({playingState:t}))})(st({},a.getState(),{togglePlaybackVisibilitySetting:n,autoplay:this.expectedAutoplay,wasEverPlaying:this.wasEverPlaying}))&&(!this.pausedViaController&&this.wasEverPlaying||(this.pausedViaController=!1,t(),o("PlayVideoOnVisibilityChange")))},this.pause=()=>{this.paused||(this.pausedViaController=!0,this.paused=!0,r(),o("PauseVideoOnVisibilityChange"))},this.destroy=a.onChange(()=>{const e=a.getState(),t=at(e);this.wasEverPlaying=ot(e)&&(e.hasWatchedTime||e.adState.state===Pn.PLAYING)||this.wasEverPlaying,this.paused=!t,t&&(this.pausedViaController=!1)})}}class el{constructor(e){this.playerApi=void 0,this.handlers=void 0,this.previousWatchedTime=0,this.emitChange=()=>{this.handlers.forEach(e=>e())},this.emitWatchedTimeChange=e=>{let{watchedTime:t}=e;(this.previousWatchedTime>0&&0===t||0===this.previousWatchedTime&&t>0)&&this.emitChange(),this.previousWatchedTime=t},this.playerApi=e;if(!e.getState())throw new Error("PlayerStateAdaptorV2 should use only inited PlayerApi");this.handlers=[],this.playerApi.on(Lr.WatchedTimeChange,this.emitWatchedTimeChange),this.playerApi.on(Lr.PlayingStateChange,this.emitChange),this.playerApi.on(Lr.MutedChange,this.emitChange),this.playerApi.on(Lr.AdStateChange,this.emitChange)}getState(){const e=this.playerApi.getState();return{hasWatchedTime:e.watchedTime>0,muted:e.muted,playingState:e.playingState,playingStateReason:e.playingStateReason,adState:e.adState}}onChange(e){return this.handlers.push(e),()=>{this.handlers=this.handlers.filter(t=>t!==e)}}destroy(){this.playerApi.off(Lr.WatchedTimeChange,this.emitWatchedTimeChange),this.playerApi.off(Lr.PlayingStateChange,this.emitChange),this.playerApi.off(Lr.MutedChange,this.emitChange),this.playerApi.off(Lr.AdStateChange,this.emitChange),this.handlers=[]}}var tl=e(9320);const rl="#FFCC00",nl=navigator&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,il=function(e){void 0===e&&(e=window);const t=e.navigator.userAgent,r=t.indexOf("Android");return-1===r?-1:parseFloat(t.slice(r+8))}();var al=e(5940);const ol=function(e){void 0===e&&(e=window);const{platform:t=""}=e.navigator||{};return function(e){void 0===e&&(e=window);const{vendor:t=""}=e.navigator||{};return 0===t.indexOf("Google")}(e)&&!Re(e)&&0===t.indexOf("Linux ")&&(0,al.b)(e)}(),sl=[["XiaoMi/MiuiBrowser",11],["UCBrowser",12],["HuaweiBrowser",9]];!function(e){void 0===e&&(e=window);const{major:t,minor:r}=function(e){void 0===e&&(e=window);const t=(0,yn.i)(e).match(/AppleWebKit\/(\d+)\.(\d+)/);if(!t)return{major:-1,minor:-1};const[,r,n]=t;return{major:parseInt(r,10),minor:parseInt(n,10)}}(e),n=function(e){const t=(0,yn.i)(e).match(/Chrom(e|ium)\/([0-9]+)\./);return t?parseInt(t[2],10):-1}(e),i=Re(e)}(window);var ll=e(2988);const cl=function(e){return void 0===e&&(e=window),-1!==(0,ll.N)(e)}();var dl=e(9761);const ul=Gr.Z,hl=Gr.Z,fl=Gr.Z,pl=e=>{let{win:t,propertyName:r}=e;return{call:e=>ul(ht({win:t,propertyName:r},e)),subscribe:e=>fl(ht({win:t,propertyName:r},e)),wait:e=>(e=>{let{propertyName:t,win:r}=e;return new Promise(e=>{fl({callback:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e(r)},propertyName:t,win:r})})})(ht({win:t,propertyName:r},e)),waitUntil:e=>(e=>{let{propertyName:t,win:r,comparator:n}=e;return new Promise(e=>{fl({propertyName:t,win:r,callback:function(){n(...arguments)&&e()}})})})(ht({win:t,propertyName:r},e)),clear:e=>hl(ht({win:t,propertyName:r},e))}};pl({propertyName:"YANDEX_DESTROYABLE_GLOBAL_CALLBACK_PROPERTY_NAME",win:window});class ml{get destroyReason(){return this._destroyReason}get isDestroyed(){return this._isDestroyed}static addErrorHandler(e){ml.errorHandlers.push(e)}constructor(){this._isDestroyed=!1,this.destroyHandlers=[],this._destroyReason=void 0}addDestroyHandler(e){this._isDestroyed?e(this._destroyReason):this.destroyHandlers.push(e)}destroy(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[n]=t;if(!this._isDestroyed){this._isDestroyed=!0,this._destroyReason=n;try{x(this.destroyHandlers,...t)}catch(yc){x(ml.errorHandlers,yc)}this.destroyHandlers.length=0}}}ml.errorHandlers=[];const gl={position:"absolute",width:"100%",height:"100%",top:"0",left:"0"},yl=ft({},gl,{overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",pointerEvents:"none"}),vl=ft({},gl,{backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat"});class El extends ml{constructor(e){let{container:t,onReady:r=Cr.Z,src:n,firstFrameHash:i,firstFrameUrl:a,style:o}=e;super(),this.container=void 0,this.background=void 0,this.src=void 0,this.style=void 0,this.onReady=void 0,this.src=n,this.style=o,this.onReady=(0,zt.I)(r),this.container=document.createElement("div"),this.src?this.setPoster(this.src,i,a):I(this.container,{opacity:"0"}),this.addDestroyHandler(()=>{F(this.container),this.onReady=Cr.Z}),t.appendChild(this.container)}setPoster(e,t,r){if(this.isDestroyed)return;if(!e&&(!t||!r))return void this.onReady();this.src=t&&r?r:e,I(this.container,ft({},yl,{opacity:"1"}));const n={backgroundImage:t?"url("+t+")":"url("+this.src+")",transition:t&&r?"background-image 1s":""};this.initBackground(n,Boolean(t&&r))}setStyle(e){this.isDestroyed||(this.style=e,this.background&&e&&I(this.background,ft({},e.objectFit?{backgroundSize:e.objectFit}:{})))}async initBackground(e,t){var r;null==(r=this.background)||r.remove();const n=this.background=document.createElement("div");I(n,vl),this.setStyle(this.style);const i=be(this.src);cl&&await i,I(n,e),this.container.appendChild(n),i.then(()=>{t&&I(this.background,{backgroundImage:"url("+this.src+")"}),this.onReady()}).catch(Cr.Z)}}const _l=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const{resolver:n,preparers:i}=pt(t);let a,o=null,s=null;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(o&&o.every((e,r)=>t[r]===e))return a;const l=i.map(e=>e(...t));if(s&&s.every((e,t)=>l[t]===e))return o=t,a;const c=n(...l);return o=t,s=l,a=c,c}},Sl="http://www.w3.org/2000/svg",Rl="classList"in document.documentElement,bl=_l(e=>e.classList&&e.classList.add,Fr.t),Al=(_l(e=>e.classList&&e.classList.remove,Fr.t),(()=>{const e=document.createElement("p");return!!Rl&&(e.classList.add("c1","c2"),!!e.classList.contains("c2")&&(e.classList.toggle("c3",!1),!e.classList.contains("c3")))})()),Tl=e=>e.split(" ").filter(e=>Boolean(e)),Pl=Al?(e,t)=>{const r=Tl(t);e.classList.add(...r)}:(e,t)=>{const r=Tl(t);for(let n=0;n<r.length;n++)e.classList.add(r[n])};var Ol=e(856),Il=e.n(Ol);const Cl=e(310),wl=e(7792),kl=(0,zt.I)(()=>qe(Il().toString())),Nl={display:"flex",position:"absolute",top:"0",left:"0",bottom:"0",right:"0",padding:"20px",color:"#fff",fontSize:"24px",textAlign:"center",justifyContent:"center",alignItems:"center"},Dl=[Lr.SourceChange,Lr.DrmSystemChange,Lr.StreamChange,Lr.StartStageChange,Lr.PlayingStateChange,Lr.VideoTypeChange,Lr.UtcStartTimeChange,Lr.CurrentTimeChange,Lr.WatchedTimeChange,Lr.LiveLatencyChange,Lr.DurationChange,Lr.DVRStartTimeChange,Lr.DVRDurationChange,Lr.VolumeChange,Lr.MutedChange,Lr.VolumeChangeReasonChange,Lr.FullscreenStateChange,Lr.PictureInPictureStateChange,Lr.VisibleStateChange,Lr.VideoSizeChange,Lr.VideoTracksChange,Lr.VideoTrackChange,Lr.AudioTracksChange,Lr.AudioTrackChange,Lr.TextTracksChange,Lr.TextTrackChange,Lr.SubtitlesChange,Lr.ErrorChange,Lr.PlaybackRateRangeChange,Lr.PlaybackRateChange,Lr.AdStateChange,Lr.NextAdRemainingTimeChange,Lr.BufferedRangesChange,Lr.TileMetaInfoChange,Lr.TileMetaInfoUrlChange,Lr.ConnectionQualityChange,Lr.AdPodDurationChange,Lr.AdPodCurrentTimeChange,Lr.AdPodTimeToSkipChange,Lr.AdSkippableStateChange,Lr.AdPodCloseStateChange,Lr.AdVolumeAvailabilityStateChange,Lr.UgcLiveStatusChange];class Ll{constructor(e,t){this.state=void 0,this.state=Rt({},e);const r=e=>{Rt(this.state,e)};Dl.forEach(e=>{t(e,r)})}getState(){return this.state}}const xl=["object"===typeof document&&document&&"onfreeze"in document?"pagehide":"beforeunload","unload"];var Ml=e(8427);var Fl=e(1662);class Vl extends es{destroy(){this.emit("Destroy"),this.off("Destroy"),Object.keys(this.handlers).forEach(e=>{this.off(e)}),Object.keys(this.onceHandlers).forEach(e=>{this.off(e)})}}var Ul=e(4149);const jl={no_licenses:{message:"ACCESS_ERROR_NO_LICENSE",code:151},invalid_region:{message:"ACCESS_ERROR_INVALID_REGION",code:153},old_browser:{message:"ACCESS_ERROR_OLD_BROWSER",code:5},future_vod_release:{message:"ACCESS_ERROR_FUTURE_VOD_RELEASE",code:100},access_denied:{message:"ACCESS_DENIED",code:100},unexpected:{message:"ACCESS_ERROR_UNEXPECTED",code:100},unsupported_browser:{message:"ACCESS_ERROR_UNSUPPORTED_BROWSER",code:412},not_found:{message:"ACCESS_ERROR_NOT_FOUND",code:404},video_processing:{message:"VIDEO_PROCESSING",code:100},video_processing_failed:{message:"VIDEO_PROCESSING_FAILED",code:100}};(function(e){const t=Object.values;if("function"===typeof t)return t(e);const r=[];for(const n in e)(0,Ro.n)(e,n)&&r.push(e[n]);return r})(jl).map(e=>{let{code:t}=e;return String(t)});var Bl=e(7542);class Yl extends Vl{constructor(e){super(),this.params=e,this.destroyed=!1,this.requestSourceConfigTimeout=void 0,this.currentPoster=void 0,this.currentUgcLiveStatus=void 0,this.releaseDate=void 0,this.releaseDate=(()=>{var t,r,n;const i=parseInt(String(null==(t=this.params.queryParams)?void 0:t.release_timeout),10);if(i)return Date.now()/1e3+i;const a=parseInt((null==(r=e.vhParams)||null==(n=r.content)?void 0:n.release_date)||"",10)||void 0;return void 0!==a&&Date.now()/1e3<a?a:void 0})(),this.once("Destroy",()=>{this.destroyed=!0,window.clearTimeout(this.requestSourceConfigTimeout),void 0!==this.currentUgcLiveStatus&&(this.currentUgcLiveStatus=void 0,this.emit("UgcLiveStatusChange",void 0))}),Promise.resolve().then(()=>{this.start()})}async start(){if(this.params.vhParams){var e;const t=new Bl.y(this.params.queryParams,this.params.playerApi),r=await t.getPlayerConfig(this.params.vhParams);this.handleVhAnswer({vhParams:this.params.vhParams,sourceConfig:r.source,skinConfig:(null==(e=r.skinParams)?void 0:e.skinConfig)||{},autoplay:r.autoplay})}else await this.run()}async run(e){void 0===e&&(e=0);try{await this.requestSourceConfig()}catch(t){return 3<=e?void this.emit("Error",new Rr({code:sr.REQUEST_SOURCE_ERROR,category:/timeout/i.test(String(t))?vr.NETWORK_TIMEOUT:vr.NETWORK_MEDIA,isFatal:!0})):(e++,this.run(e))}}async requestSourceConfig(){const e=this.getContentId();if(this.destroyed||!e)return;const{sourceConfig:t,vhParams:r,skinConfig:n,playerConfig:i}=await(0,Ul.s6)(e,this.params.queryParams);if(this.destroyed)return;const{autoplay:a}=i;this.handleVhAnswer({vhParams:r,sourceConfig:t,skinConfig:n,autoplay:a})}handleVhAnswer(e){var t,r;let{sourceConfig:n,skinConfig:i,vhParams:a,autoplay:o}=e;const s=function(e){if(void 0!==e)return e.error?jl[e.error]||jl.unexpected:void 0===e.content?jl.not_found:void 0}(a);if(s)return this.requestSetPoster(null==n?void 0:n.preview),this.emit("ShowAnnotation",s.message),void this.emit("Error",new Rr({code:String(s.code),message:s.message,details:{isVhError:!0},isFatal:!1}));this.releaseDate&&Date.now()/1e3<this.releaseDate?this.handleVhAnswerForReleaseDate({sourceConfig:n,releaseDate:this.releaseDate}):null!=(t=a.content)&&t.ugc_live?this.handleVhAnswerForUgc({sourceConfig:n,skinConfig:i,autoplay:o,vhParamsContent:a.content}):this.requestSetSource({sourceConfig:n,skinConfig:i,autoplay:o,externalPlayerConfig:null==(r=a.content)?void 0:r.yastation_cast_cfg})}handleVhAnswerForUgc(e){let{sourceConfig:t,skinConfig:r,vhParamsContent:n,autoplay:i}=e;const{ugc_live_status:a,reload_on_ready:o}=n;if(this.currentUgcLiveStatus!==a&&(this.currentUgcLiveStatus=a,this.emit("UgcLiveStatusChange",this.currentUgcLiveStatus)),"onair"===a||"finished"===a||"ready"===a&&o)return void this.requestSetSource({sourceConfig:t,skinConfig:r,autoplay:i,externalPlayerConfig:n.yastation_cast_cfg});let s;this.requestSetPoster(t.preview),"cancelled"===a?s="UGC_LIVE_CANCELLED":("offline"===a||"ready"===a&&!o)&&(s="UGC_LIVE_OFFLINE"),void 0!==s&&this.emit("ShowAnnotation",s),window.clearTimeout(this.requestSourceConfigTimeout);const l=Math.max(n.auto_reload_ms||6e4,5e3);this.requestSourceConfigTimeout=window.setTimeout(()=>this.run(),l)}handleVhAnswerForReleaseDate(e){let{releaseDate:t,sourceConfig:r}=e;this.requestSetPoster(r.preview),this.emit("ShowAnnotation","UGC_LIVE_OFFLINE"),window.clearTimeout(this.requestSourceConfigTimeout);const n=1e3*Math.max(t-Date.now()/1e3,0);this.requestSourceConfigTimeout=window.setTimeout(()=>this.run(),n)}requestSetSource(e){this.setupUpdateRetriesCount(e.sourceConfig),this.emit("SetSource",e)}requestSetPoster(e){this.currentPoster!==e&&(this.currentPoster=e,this.emit("SetPoster",e))}getContentId(){var e,t;return this.params.contentId||(null==(e=this.params.vhParams)||null==(t=e.content)?void 0:t.content_id)}setupUpdateRetriesCount(e){const t=e.update,{playerApi:r}=this.params;if(!t||!r)return;let n=0;const i=async()=>{if(1<=n)return;n+=1;const e=await t();return e?(e.update=i,e):void 0};e.update=i;const a=()=>{n=0};r.on(Lr.ContentImpression,a),this.once("Destroy",()=>{r.off(Lr.ContentImpression,a)})}}pl({propertyName:"YANDEX_STATS_GLOBAL_CALLBACK_PROPERTY_NAME",win:window});const ql=Pt(),Wl=Math.floor(5),Gl=Math.floor(20);var Kl=e(4364);const Hl=(()=>{const e=wt();return void 0===e||e.includes("encrypted-media")})();var Zl=e(8875),Xl=e(9026),zl=e(6531);const Jl=(0,ll.N)(),Ql=Jl>-1&&Jl<=15,$l=(e,t)=>t.location.hash=e;const ec=(0,e(9525).I)(),tc=()=>ec.navigator.wakeLock;class rc{constructor(e){if(this.params=e,this.visibilityObserver=void 0,this.lockPromise=void 0,this.lockerObj=void 0,this.destroyed=!1,this.handler=async()=>{if(!this.destroyed)if(this.lockPromise)this.lockPromise=this.lockPromise.then(this.handler);else if(this.shouldLock()){if(this.lockerObj)return;this.lockPromise=tc().request("screen").then(e=>{this.lockPromise=void 0,this.lockerObj=e}).catch(e=>{this.destroy(),this.params.onError(e)})}else this.lockerObj&&(this.lockPromise=this.lockerObj.release().then(()=>{this.lockPromise=void 0}),this.lockerObj=void 0)},!tc())return void(this.destroyed=!0);const{playerContainer:t,playerApi:r}=e;r.on(Lr.PlayingStateChange,this.handler),r.on(Lr.MutedChange,this.handler),this.visibilityObserver=new Js(t,{threshold:.75}),this.visibilityObserver.observe(this.handler)}restartVisibilityObserver(){var e;this.destroyed||null==(e=this.visibilityObserver)||e.restart()}destroy(){var e;this.destroyed=!0,this.params.playerApi.off(Lr.PlayingStateChange,this.handler),this.params.playerApi.off(Lr.MutedChange,this.handler),null==(e=this.visibilityObserver)||e.destroy()}shouldLock(){const e=this.params.playerApi.getState();if(!e)return!1;const{playingState:t,muted:r}=e;return t!==Or.X.PAUSE&&t!==Or.X.END&&(!!this.visibilityObserver&&(this.visibilityObserver.getState().isElementVisible||!r))}}const nc=["contentId"],ic=["contentId"],ac=(0,Ml.x)(window);class oc extends tl.h{publicEmit(e,t){if(e.indexOf("/")>-1)return this.emit(e,t);const r=new Error("Event "+e+" is invalid. Namespace is required: NAMESPACE/"+e);setTimeout(()=>{throw r},0)}emit(e,t){this.debug.logEvents&&console.log("[PLAYER] [EVENT]",e,t),super.emit(e,t)}getDebugConfig(){return this.debug}constructor(e){var t,r,n;if(super(e),this.skin=void 0,this.container=void 0,this.vhHelper=void 0,this.loadIframeDeferred=new cs.B,this.performOnIframeLoad=function(e){function t(){if(0===r.length)return;const e=r.slice();r.length=0,e.forEach(e=>{let{task:t,onPromiseReject:r}=e;if(o)r(i);else try{t(n)}catch(vc){}}),r.length>0&&t()}const r=[];let n,i,a=!1,o=!1;return e.then(e=>{n=e,a=!0,t()}),e.catch(e=>{i=e,o=!0,t()}),function(e,t){if(void 0===t&&(t=Cr.Z),o)t(i);else if(!a||r.length>0)r.push({task:e,onPromiseReject:t});else try{e(n)}catch(s){}}}(this.loadIframeDeferred.promise),this.isIframeLoaded=!1,this.playingStateSynchronization=St(),this.iframe=void 0,this.playerNode=void 0,this.postMessenger=void 0,this.visiblePlaybackController=void 0,this.screenWakeLockController=void 0,this.getSourceConfigForRecover=()=>{},this.completeInitAfterGettingSourceConfig=void 0,this.store=void 0,this.errorScreen=void 0,this.preloadSkin=void 0,this.reportConfig=void 0,this.additionalParams=void 0,this.setSourceDeferred=void 0,this.telemetry=void 0,this.resourceTimingsMonitor=void 0,this.playerAliveData={bandwidthEstimate:0},this.playerTracker=void 0,this.setSourceStage=Mn.LOADING,this.sourceIdSignal=new hn(NaN,(e,t)=>!!isNaN(t)||!isNaN(e)&&t<=e),this.debugPanel=void 0,this.externalPlaybackCsrfToken=void 0,this.externalPlaybackTokenExpireTimeout=void 0,this.playerApiSourceConfig=void 0,this.loggingForExternalToolsAllowed=void 0,this.isReady=!1,this.debug={logCalls:!1,logEvents:!1,logInternals:!1,showDebugPanel:!1},this.destroyed=!1,this.config=void 0,this.readyPendingEvents=[],this.nextPreloadRequestId=0,this.loadComponents=(0,zt.I)(()=>{return S({src:(e=Mr.i18nLang,b("components_"+e+(Do?".modern":"")+".js",parseInt("1.0-11679".slice(4),10),!1)),retries:3,dropCacheOnRetry:!0,onBeforeLoad:e=>{e.crossOrigin="anonymous"},checkLoad:()=>(0,xr.m)(Mr.initErrorScreen)&&(0,xr.m)(Mr.initDebugPanel)}).catch(e=>{const t=new Rr(e).toJSON(),r=new Rr(Ft({},t,{details:{errorDetails:t.details},code:sr.ERROR_SCREEN_LOAD_ERROR,isFatal:!1}));throw this.emitError(r,we(ke(document))),r});var e}),this.sendReportToTelemetry=async e=>{let{reportId:t,reported:r}=e;const n=await this.getReportData();return this.telemetry.sendReportLog(n,t,r)},this.getReportData=async()=>{var e;return f(this.isReady?await this.requestDebugInfo():{vsid:this.additionalParams.vsid,version:"1.0-11679",clientTimestamp:Date.now(),streamUrl:null==(e=this.getState().stream)?void 0:e.url,system:Be(),playerApiState:this.getState()})||""},!(0,_r.K)(e))throw new Rr("Params is not an object");(0,Un.Vc)(e);const i=e;i.useNativeAdControls=!0;const a=(0,os.lY)(11679,"WEB"),o=(0,gr.Y)(()=>{var e;const t=null==i||null==(e=i.source.additionalParams)?void 0:e.from;return t&&(0,yr.H)(t)?t:void 0})||eo;this.additionalParams={vsid:a,from:o};const l=void 0!==i.vhParams,c=(0,xr.m)(ac),d={vsid:a,vpuid:os.M0.getVpuid(),version:"1.0-11679",service:"StreamPlayer",isVideoADB:c},u=(h=e.logUrl,!(0,yr.H)(h)||h.startsWith("https://"));var h;const p=u?e.logUrl:void 0;this.telemetry=new os.M0({playerInfo:d,sendLog:(e,t)=>{const r=f(e);if(!r)return;const n=((0,yr.H)(p)?p:void 0)||(c?Ot():ql);Ae({url:n===ql||"https://log.strm.yandex.ru"===n?(0,ro.Sr)(n,t):n,data:r})},getState:()=>{const e=this.getState();if(!e)return;const t=e.audioTrack,r=e.videoTrack,n=e.videoTracks.map(e=>Ft({},e,{selected:(null==r?void 0:r.value)===e.value,auto:Boolean(null==r?void 0:r.auto)})),i={total:Ct(e.bufferedRanges,e.currentTime)||0};return Ft({},e,this.playerAliveData,{videoTracks:n,remainingBufferedTime:i,audioTrack:t})},shouldTrackWatchedTime:(0,Un.RW)("web_watched_time_in_telemetry_package")}),this.telemetry.setStaticParams({labels:{from:o}});const m=(0,yr.H)(e.perfLogUrl)?e.perfLogUrl:"https://log.strm.yandex.ru/perf";this.resourceTimingsMonitor=new zl.$({sendLog:(e,t)=>{const r=f(e);r&&Ae({url:(0,ro.Sr)(m,t),data:r})}}),this.resourceTimingsMonitor.attach(window),function(e){let{vsid:t}=e;be((0,ro.Sr)("https://mc.yandex.ru/watch/37773110",{vsid:t}))}({vsid:a});const g=e=>{let{watchedTime:t}=e;t>0&&(this.off(Lr.WatchedTimeChange,g),(0,gr.Y)(()=>function(e){let{vsid:t}=e;return be((0,ro.Sr)("https://mc.yandex.ru/watch/37773110",{vsid:t,"page-url":"goal://"+window.location.hostname+"/start"}))}({vsid:a}),Kl.L))};this.on(Lr.WatchedTimeChange,g),this.container=(()=>{try{return this.createInternalContainer(function(e){if(!(0,_r.K)(e))throw new Rr("paramsObject must be an object");if(!e.element)throw new Rr("paramsObject must have property [element]");const{element:t}=e;let r;if("string"===typeof t){const e=document.getElementById(t);if(!e)throw new Rr("cannot find element with id: ["+t+"]");r=e}else{if(!on(t))throw new Rr("paramsObject.element must be a string or HTMLElement id");r=t}return r}(e))}catch(t){const e=Rr.from(t,{code:sr.INVALID_CONFIG_ELEMENT_IN_CREATE_PLAYER,isFatal:!0});throw this.emitError(e,we(ke(document))),e}})(),this.savePlayerAliveData({containerHeight:this.container.clientHeight*devicePixelRatio,containerWidth:this.container.clientWidth*devicePixelRatio});const y=(()=>{try{return function(e){if(!(0,_r.K)(e))throw new Rr("paramsObject must be an object");return Pa.parse(e.lang)}(e)}catch(t){const e=Rr.from(t,{code:sr.INVALID_CONFIG_LANG_IN_CREATE_PLAYER,isFatal:!1});return this.emitError(e,we(ke(document))),"ru"}})();if(Mr.i18nLang=y,this.initErrorScreen(),this.initDebugPanel(),!u){const t=new Rr({code:sr.INVALID_LOG_URL,isFatal:!0,details:{logUrl:e.logUrl}});throw this.emitError(t),t}this.prepareContainerNode(),this.playerNode=this.createPlayerNode(),L(this.container,this.playerNode);const v=(()=>{try{return function(e){return $a.parse(e)}(e)}catch(t){const r=Rr.from(t),n=new Rr(Ft({},r,{details:{errorDetails:r.details,config:(0,gr.Y)(()=>f(e))||"UNSERIALIZABLE"},code:sr.INVALID_CONFIG_IN_CREATE_PLAYER,isFatal:!0}));throw this.emitError(n,we(ke(document))),(0,Kl.L)(t),(0,Kl.L)(n),n}})();this.config=Ft({},v,{vsid:a,vpuid:os.M0.getVpuid()}),v.objectFit&&this.setVideoStyle({objectFit:v.objectFit}),this.store=this.initPlayerStore({config:v,vsid:a}),this.initOnlyOnePlayingUnmutePlayerControl();const E=(t,r)=>{try{return ve(t,this.config,this.telemetry.getSourceIndex())}catch(n){if(r)return;const t=Rr.from(n),i=new Rr(Ft({},t,{details:{errorDetails:t.details,config:(0,gr.Y)(()=>f(e))||"UNSERIALIZABLE"},code:sr.INVALID_CONFIG_IN_CREATE_PLAYER,isFatal:!0}));throw this.emitError(i,we(ke(document))),(0,Kl.L)(n),(0,Kl.L)(i),i}},_=(()=>{try{return E(i.source,l)}catch(vc){return}})();this.once(Lr.Destroy,function(e){const t=()=>xl.forEach(e=>window.removeEventListener(e,r)),r=r=>{"pagehide"===r.type&&r.persisted||(e(r),t())};return xl.forEach(e=>window.addEventListener(e,r)),t}(()=>this.destroyInternal(kn.Unload))),this.reportConfig=v.reportConfig,this.debug=v.debugConfig,this.initPlaybackTracking(),this.playerTracker=this.initPlayerTracker(),this.once(Lr.Destroy,()=>this.playerTracker.destroy());const R=this.iframe=Ge({vsid:a,container:this.playerNode});this.resourceTimingsMonitor.attach(this.iframe.contentWindow),this.once(Lr.Destroy,()=>this.resourceTimingsMonitor.destroy()),this.postMessenger=this.initPostMessenger(),this.once(Lr.Destroy,()=>this.postMessenger.destroy()),this.subscribeExternalFullscreenChange(this.container),this.once(Lr.Destroy,()=>{clearTimeout(this.externalPlaybackTokenExpireTimeout)}),v.savedMutedRestored&&this.emit(Lr.VolumeChangeReasonChange,{volumeChangeReason:In.RestoreSavedMuted}),this.on(Lr.VolumeChangeReasonChange,e=>{let{volumeChangeReason:t}=e;if((r=t)===In.RequestAutoplaySettings||void 0===r)return;var r;const{volume:n,muted:i}=this.store.getState();Ka.setSavedVolume(n),Ka.setSavedMuted(i)}),this.once(Lr.Ready,()=>{this.initTrackChangeLogging()}),_&&(_.source.params.additionalParams=this.addRequiredFieldsToAdditionalParams(_.source.params.additionalParams),this.additionalParams=_.source.params.additionalParams,this.applySourceInfoToTelemetry(_)),this.telemetry.setStaticParams({device:v.streamPlayerParams.device?v.streamPlayerParams.device:{}}),this.telemetry.enableRemoteProgressSaving(At(this.playerApiSourceConfig));const A=Ft({},e,{element:void 0,v2:!0});if(this.telemetry.onCreatePlayer(A,we(ke(document))),this.on(Lr.Ready,()=>{this.isReady=!0,this.setSourceStage=Mn.READY,this.readyPendingEvents.forEach(e=>this.postMessenger.emit("Event",e)),this.readyPendingEvents.length=0}),this.visiblePlaybackController=this.initVisiblePlaybackController(v.streamPlayerParams.togglePlaybackOnVisibilityChange,v.streamPlayerParams.autoplay),this.screenWakeLockController=(0,Un.RW)("web_screen_wake_lock")?new rc({playerContainer:this.container,playerApi:this,onError:(0,zt.I)(e=>{const t=Rr.from(e);this.telemetry.logError({error:new Rr(Ft({},t,{code:sr.SCREEN_WAKE_LOCK_ERROR,isFatal:!1,details:{errorDetails:t.details,allowedFeaturePolicies:wt()}})),extraRootFields:we(ke(document))})})}):void 0,this.once(Lr.Destroy,()=>{var e;return null==(e=this.screenWakeLockController)?void 0:e.destroy()}),this.loggingForExternalToolsAllowed=void 0===e.loadSkin,this.preloadSkin=this.initPreloadSkin(v),_){var T,P,O;const e=v.streamPlayerParams.autoplay&&(!_.source.params.adConfig||!1===_.source.params.adConfig.hasPreroll)&&!_.source.params.startPosition.videoTime;null==(T=this.preloadSkin)||T.setPoster(_.source.params.preview,e?_.source.params.firstFrameHash:"",e?_.source.params.firstFrameUrl:""),null==(P=this.preloadSkin)||P.setStyle(Ft({},_.source.params.posterStyle,{objectFit:e?v.objectFit||"contain":null==(O=_.source.params.posterStyle)?void 0:O.objectFit}))}let I;!function(e){let t=!1,r=!1,n="start";const i=()=>t&&r,a=(0,zt.I)(()=>{e.emit(Lr.UserReady,{type:n})}),o=()=>{i()&&(n="poster",a())},s=()=>{if(e.off(Lr.ContentImpression,a),e.off(Lr.BeforeAdPodStart,u),e.off(Lr.AdPodStart,d),i())return n="poster",a();t||e.once(Lr.PosterReady,o),r||e.once(Lr.SkinReady,o)},l=()=>{t=!0},c=()=>{t=!0,r=!0},d=()=>(n="start",a()),u=()=>{e.off(Lr.ResourcesIdle,s),e.once(Lr.AdPodStart,d)};e.once(Lr.BeforeAdPodStart,u),e.once(Lr.PosterReady,l),e.once(Lr.SkinReady,c),e.once(Lr.ResourcesIdle,s),e.once(Lr.ContentImpression,a),e.once(Lr.UserReady,()=>{e.off(Lr.BeforeAdPodStart,u),e.off(Lr.ResourcesIdle,s),e.off(Lr.AdPodStart,d),e.off(Lr.ContentImpression,a),e.off(Lr.PosterReady,l),e.off(Lr.SkinReady,c)})}(this),this.setFiltersForSourceRelatedEvents(),this.once(Lr.Destroy,()=>{var e;return null==(e=I)?void 0:e.unsubscribe()});if(this.completeInitAfterGettingSourceConfig=(e,t)=>{var r,n,l;if(this.playerApiSourceConfig||this.destroyed)return;const{source:c}=e;this.playerApiSourceConfig=e,this.emit(Lr.SourceChange,{source:c});const d=t&&(!c.params.adConfig||!1===c.params.adConfig.hasPreroll)&&!c.params.startPosition.videoTime;null==(r=this.preloadSkin)||r.setPoster(c.params.preview,d?c.params.firstFrameHash:"",d?c.params.firstFrameUrl:""),null==(n=this.preloadSkin)||n.setStyle(Ft({},c.params.posterStyle,{objectFit:d?v.objectFit||"contain":null==(l=c.params.posterStyle)?void 0:l.objectFit}));const u=Ft({},v.streamPlayerParams,{source:e.source});var h,f;void 0!==t&&(u.autoplay=!0===t||(0,_r.K)(t),u.allowMuted=(0,Un.RW)("web_forbid_allow_muted_autoplay")?u.muted:!0===t||t&&t.allowMuted),this.playerTracker.setTrackings(e.trackings),this.telemetry.startInitBufferingTimer(),this.telemetry.setExternalStalledDuration(u.source.externalStalledDuration||ar()-Math.min(i.timeLoaderInit||1/0,Zt.timeAPIInit||1/0)),function(e,t){try{s(e.contentWindow).initialStreamPlayerParams=t}catch(yc){console.warn&&console.warn(yc)}}(R,u),h={from:u.source.params.additionalParams.from,slots:u.source.params.additionalParams.slots,project:"video-player",version:"1.0-11679",yandexuid:Xl.h,yandex_login:(0,zr.e)(document,"yandex_login")},R.contentDocument&&(null==(f=I)||f.unsubscribe(),I=new Cn.CSPLogger(h,{vsid:a,vpuid:os.M0.getVpuid()}),I.subscribe(R.contentDocument)),c.params.additionalParams=this.addRequiredFieldsToAdditionalParams(c.params.additionalParams),this.additionalParams=c.params.additionalParams,this.applySourceInfoToTelemetry(e),xt({vsid:a,from:o,reqid:this.additionalParams.reqid,slots:this.additionalParams.slots,useAbdBundle:v.useAbdBundle,iframe:R,shouldLoadAdSdk:bt({source:c}),adConfig:c.params.adConfig,flags:(0,Un.II)(),sendDelta:(e,t)=>this.logDelta(e,t)}).then(()=>{this.isIframeLoaded=!0,this.loadIframeDeferred.resolve()}).catch(e=>{if(!D(this.container)){F(this.iframe);const e=new Rr({code:sr.ELEMENT_NOT_IN_DOM,details:{tagName:this.container.tagName,id:this.container.id,className:this.container.className},isFatal:!1});throw this.emitError(e,we(ke(document))),this.debug.logInternals&&console.warn("element does not present in DOM",this.container),this.emit(Lr.ErrorChange,{error:new Rr("element does not present in DOM")}),this.destroy(),e}this.playerApiSourceConfig=void 0;const t=new Rr(e);throw this.emitError(t),t}),this.getSourceConfigForRecover=v.useFallbackStream?this.createSourceConfigForRecoverGetter(e):Cr.Z},_&&void 0===_.source.contentId&&!l)return void this.completeInitAfterGettingSourceConfig(_,void 0);const C=this.initVhHelper({contentId:(null==_?void 0:_.source.contentId)||(null==(t=i.vhParams)||null==(r=t.content)?void 0:r.content_id),poster:null==_?void 0:_.source.params.preview,vhParams:i.vhParams,queryParams:Ft({autoplay:!1===i.autoplay?0:void 0},null==(n=i.source)?void 0:n.queryParams)});this.vhHelper=C,C.on("SetSource",e=>{let{sourceConfig:t,skinConfig:r,externalPlayerConfig:n,autoplay:a}=e;this.configureSkin(r,n);const o=Mt(Ft({},t,i.source),nc);this.completeInitAfterGettingSourceConfig(E(o,!1),a)})}getState(){var e;return null==(e=this.store)?void 0:e.getState()}async destroy(){return this.destroyInternal(kn.PublicApiCall)}async sendReportLog(){const e=await this.getReportData();return{reportId:this.telemetry.sendReportLog(e)}}openReportWindow(){const e=this.telemetry.generateReportId(),t=function(e,t,r){let{reportUrl:n}=e,{from:i=eo}=t;const a={"form-logId":r,"form-from":i},o=function(e){switch(e){case"ott-kp":case"discovery":case"kinopoisk":return"10463870";case"disk":return"58127089";case"telemost":return"58141887";case"yavideo":case"ottwidget_ya-serp":case"serp":case"ya-market":case"ya-music":case"ya-music-android":case"quantum":case"vconf":return"10491213";case"partner":case"turbo":case"zen":case"yanews":case"yanewstragic":case"woman.ru":case"ru.tv":case"tvrain.ru":return"10491214";default:return}}(i);void 0!==o&&(a["form-from_group"]=o);const s=(0,ro.Sr)(n,a).substr(0,2048)+as;return{reportId:r,reported:null!==window.open(s,"_blank")}}(this.reportConfig,this.additionalParams,e);this.sendReportToTelemetry(t)}play(e){void 0===e&&(e=Tn.l.ExternalApi);const{error:t,playingState:r}=this.getState();if(null!=t&&t.isFatal)return Promise.reject();this.emit(Lr.RequestPlayingState,{playingState:Or.X.PLAY,playingStateReason:e}),(!this.config.streamPlayerParams.autoplay&&this.telemetry.getExpectedStalled().reason===Fl.k.Init||r===Or.X.PAUSE&&this.telemetry.getExpectedStalled().reason===Fl.k.SetSource)&&this.emit(Lr.RequestPlayingState,{playingState:Or.X.BUFFERING,playingStateReason:Tn.l.Unknown});const n=new Promise((t,r)=>{this.performOnIframeLoad(()=>{this.postMessenger.sendRequest(Ss.play,e).then(e=>e?t():r()).catch(()=>r())},r)});return n.catch(()=>{this.emit(Lr.RequestPlayingState,{playingState:Or.X.PAUSE,playingStateReason:Tn.l.PlayRejected})}),this.playingStateSynchronization.addLock(n)}pause(e){void 0===e&&(e=Tn.l.ExternalApi),this.emit(Lr.RequestPlayingState,{playingState:Or.X.PAUSE,playingStateReason:e}),this.performOnIframeLoad(()=>{this.playingStateSynchronization.addLock(this.postMessenger.sendRequest(Ss.pause,e))})}seek(e){this.postMessenger.sendCommand(Ss.seek,e)}setDebugPanelVisibility(e){var t;this.debug.showDebugPanel=e,null==(t=this.debugPanel)||t.setVisibility(e)}async requestDebugInfo(){var e;return Ft({},await this.postMessenger.sendRequest(Ss.requestDebugInfo,void 0),{playerApiState:this.getState(),streamUrl:null==(e=this.getState().stream)?void 0:e.url})}async requestExternalPlay(e){this.logEventInternal(An.ExternalPlaybackPlayerActivate);const t=await this.requestExternalCsrfToken();try{return await ms(e,t),this.logEventInternal(An.ExternalPlaybackPlayerActivateSucceed),e.externalPlayerId}catch(yc){throw this.updateExternalPlaybackCsrfToken(void 0),this.logEventInternal(An.ExternalPlaybackPlayerActivateFailed),new Error(e.externalPlayerId)}}async requestExternalPlayerList(e){let{currentPlayerListLength:t}=e,r=!1;await this.requestExternalCsrfToken();try{if(0===t){r=!0,this.logEventInternal(An.ExternalPlaybackPlayerListFetching,{cachedList:r});const e=await fs();if(this.logEventInternal(An.ExternalPlaybackPlayerListFetchSuccess,{cachedList:r}),!e.length)return[];this.logEventInternal(An.ExternalPlaybackPlayerListHasAnyDevice)}r=!1,this.logEventInternal(An.ExternalPlaybackPlayerListFetching,{cachedList:r});const e=await ps();return this.logEventInternal(An.ExternalPlaybackPlayerListFetchSuccess,{cachedList:r}),e.filter(e=>e.screen_capable).map(e=>({id:e.id,name:e.name,status:e.online?mn.IDLE:mn.OFFLINE})).sort(Ne)}catch(yc){throw this.logEventInternal(An.ExternalPlaybackPlayerListFetchError,{cachedList:r,status:(0,_r.K)(yc)?yc.status:0}),yc}}setVolume(e){this.postMessenger.sendCommand(Ss.setVolume,e)}setMuted(e){this.postMessenger.sendCommand(Ss.setMuted,e)}setVideoTrack(e){this.postMessenger.sendCommand(Ss.setVideoTrack,e)}setAudioTrack(e){this.postMessenger.sendCommand(Ss.setAudioTrack,e)}setTextTrack(e){this.postMessenger.sendCommand(Ss.setTextTrack,e)}changeAdditionalParams(e){(e=>{if(!(0,_r.K)(e))throw new Rr("changeAdditionalParams payload must be an Object");if((0,La.Z)(e).some(e=>-1===Ds.indexOf(e)))throw new Rr("changeAdditionalParams payload must contain only following keys: "+Ds.toString())})(e),this.telemetry.flushStates(),this.additionalParams=Ft({},this.additionalParams,e),this.telemetry.setStaticParams({additionalParameters:It(this.additionalParams)})}setNativeTextTrackVisibility(e){this.postMessenger.sendCommand(Ss.setNativeTextTrackVisibility,e)}setPlaybackRate(e){this.postMessenger.sendCommand(Ss.setPlaybackRate,e)}async setSource(e){var t,r,n;null==(t=this.setSourceDeferred)||t.reject(new Error("SetSource rejected cause of new #setSource()")),this.setSourceDeferred=new cs.B;const i=this.setSourceDeferred;M(i.promise),this.isReady||this.store.getState().error||await Promise.race([this.waitForEvent(Lr.Ready),this.waitForEvent(Lr.ErrorChange),i.promise]),null==(r=this.vhHelper)||r.destroy(),this.vhHelper=void 0;const a=e=>{try{const t=this.telemetry.onBeforeSetSource();return ve(e,this.config,t)}catch(t){const e=Rr.from(t,{code:sr.INVALID_CONFIG_IN_SET_SOURCE,isFatal:!0});throw this.emitError(e),e}},o=a(e);this.emit(Lr.ErrorChange,{error:void 0}),null==(n=this.errorScreen)||n.removeErrorMessage();const s=async e=>{if(this.telemetry.onSetSource(e,{streams:e.source.streams,params:e.source.params,externalStalledDuration:e.source.externalStalledDuration?e.source.externalStalledDuration/1e3:void 0},this.getTelemetryStaticParams(e)),this.telemetry.enableRemoteProgressSaving(At(e)),!oe(e.source))throw new Rr("setSource method receive a serializable object");if(void 0===this.playerApiSourceConfig)return this.completeInitAfterGettingSourceConfig(e,void 0),void await Promise.race([this.waitForEvent(Lr.Ready),this.waitForEvent(Lr.ErrorChange).then(e=>{let{error:t}=e;throw t})]);this.playerTracker.setTrackings(ge(e.trackings)),await this.setSourceInternal(e)};if(o.source.contentId){const t=this.initVhHelper({contentId:o.source.contentId,poster:o.source.params.preview,vhParams:void 0,queryParams:Ft({autoplay:0},e.queryParams)});return this.vhHelper=t,void t.on("SetSource",async t=>{var r;let{sourceConfig:n,skinConfig:i,externalPlayerConfig:o,autoplay:l}=t;this.configureSkin(Ft({},void 0!==i.title?{title:i.title}:{}),o),null!=n&&n.additionalParams&&(n.additionalParams.from=this.additionalParams.from,n.additionalParams.from_block=this.additionalParams.from_block);const c=Mt(Ft({},n,e),ic);try{await s(a(c)),(!0===l||(0,_r.K)(l))&&M(this.play()),await this.waitForPlay()}catch(d){}null==(r=this.preloadSkin)||r.setVisibility(!1)})}await Promise.race([s(o),i.promise])}async preloadSource(e,t){const{signal:r}=t||{},n=(()=>{try{const t=this.telemetry.onBeforePreload();return ve(e,this.config,t)}catch(t){return}})();if(void 0===n)return Promise.reject(new Error("source is invalid"));if(n.source.params.additionalParams=this.addRequiredFieldsToAdditionalParams(n.source.params.additionalParams),null!=r&&r.aborted)return Promise.reject(new Error("preload was aborted"));if(!oe(n))return console.warn("preloadSource: sourceConfig is not serializable"),Promise.reject(new Error("sourceConfig is not serializable"));const i=String(this.nextPreloadRequestId++),a=new Promise((e,t)=>{let n=Cr.Z;const a=()=>{n(),t(),this.postMessenger.sendCommand(Ss.abortPreloadSource,i)};null==r||r.addEventListener("abort",a);const o=r=>{switch(r.eventName){case"onPreloadSourceResolve":r.data===i&&(n(),e());break;case"onPreloadSourceReject":r.data===i&&(n(),t())}};this.postMessenger.on("Event",o);const s=()=>this.postMessenger.off("Event",o);n=()=>{s(),null==r||r.removeEventListener("abort",a)}});return this.postMessenger.sendCommand(Ss.preloadSource,{sourceConfig:n.source,requestId:i}),a}async requestVideoElementFullscreen(){this.postMessenger.sendCommand(Ss.setFullscreen,!0)}exitVideoElementFullscreen(){this.postMessenger.sendCommand(Ss.setFullscreen,!1)}setNativeControlsVisibility(e){this.postMessenger.sendCommand(Ss.setHiddenControls,function(e){return(0,_r.K)(e)?!1===e.showTimeline?[xa.TIMELINE]:[]:e?[]:[xa.ALL]}(e))}setNativeAdControlsVisibility(e){this.postMessenger.sendCommand(Ss.setNativeAdControlsVisibility,e)}setPictureInPictureAllowed(e){this.postMessenger.sendCommand(Ss.setPictureInPictureEnabled,e)}setVideoStyle(e){this.performOnIframeLoad(()=>{this.postMessenger.sendCommand(Ss.setVideoStyle,e)})}playInrollAd(e){this.postMessenger.sendCommand(Ss.playInrollAd,e)}skipAdPod(){this.postMessenger.sendCommand(Ss.skipAdPod,{})}async playAdViewers(e,t,r){if("inroll"===e&&!r)throw new Error("playAdViewers error: no cueId for inroll");const n=t.map(t=>({adViewer:t,additionalData:"inroll"===e?{cueId:r}:{},adType:e})),{success:i}=await this.postMessenger.sendRequest(Ss.playAdViewers,{adType:e,adViewers:n});if(!i)throw new Error("playAdViewers error")}logEvent(e){let{event:t,params:r={}}=e;this.loggingForExternalToolsAllowed&&this.logEventInternal(t,r)}logError(e){this.loggingForExternalToolsAllowed&&this.telemetry.logError({error:e})}logSkinDelta(e,t,r){this.loggingForExternalToolsAllowed&&this.postMessenger.sendCommand(Ss.logDelta,{deltaId:e,value:t,params:r})}logDelta(e,t,r){this.postMessenger.sendCommand(Ss.logDelta,{deltaId:e,value:t,params:r})}async insertInto(e){var t;const{playingState:r}=this.getState();await this.postMessenger.sendRequest(Ss.stopAd,{});const n=function(e){if(!e)return[];const t=[];for(let r=0;r<e.length;r++)t.push(e[r]);return t}(this.container.querySelectorAll("video")).map(e=>function(e){const t=wn(e);return t?()=>{wn(e)!==t&&mr()(e,t)}:Cr.Z}(e));e.appendChild(this.container),x(n),this.visiblePlaybackController.restartVisibilityObserver(),null==(t=this.screenWakeLockController)||t.restartVisibilityObserver(),r!==Or.X.PLAY&&r!==Or.X.BUFFERING||this.play(Tn.l.RestoreAfterInsertInto)}getReadyState(){return this.destroyed?ls.k.destroyed:ls.k.ready}getContainer(){return this.container}async setSourceInternal(e,t){let{shouldSaveProgress:r=!1}=void 0===t?{}:t;const{source:n}=e;this.logEventInternal("SetSourceInternal",Ft({},n,{shouldSaveProgress:r})),n.params.additionalParams=this.addRequiredFieldsToAdditionalParams(n.params.additionalParams),this.playerApiSourceConfig=e,this.updateStateForSetSource(n,{shouldSaveProgress:r});const i=this.waitForSetSourceComplete();this.setSourceStage=Mn.LOADING,this.resetPlayerAliveData(),await this.postMessenger.sendRequest(Ss.setSource,{sourceConfig:n,shouldSaveProgress:r}),this.additionalParams=n.params.additionalParams,await i,this.playerTracker.onSetSourceComplete(n)}async destroyInternal(e){var t;this.destroyed||(this.destroyed=!0,this.telemetry.logEvent({name:"DestroyCalled",data:{message:e}}),this.emit(Lr.StartStageChange,{startStage:gn.destroyed}),null==(t=this.setSourceDeferred)||t.reject(new Error("SetSource rejected cause destroy player")),await this.destroyIFrame(e),F(this.container),this.emit(Lr.Destroy,{}),super.destroy(),this.telemetry.destroy({reason:e}))}initTrackChangeLogging(){let e=this.getState().videoTrack,t=this.getState().audioTrack,r=this.getState().textTrack;this.on(Lr.VideoTrackChange,t=>{let{videoTrack:r}=t;const n=e;e=r,!(0,_r.K)(n)||!(0,_r.K)(r)||n.auto&&r.auto||n.value===r.value&&n.auto===r.auto||this.telemetry.logEvent({name:"SetVideoTrack",data:{previous:Fe(n),next:Fe(r)}})}),this.on(Lr.AudioTrackChange,e=>{let{audioTrack:r}=e;(0,_r.K)(t)&&(0,_r.K)(r)&&t.name!==r.name&&this.telemetry.logEvent({name:"SetAudioTrack",data:{previous:xe(t),next:xe(r)}}),t=r}),this.on(Lr.TextTrackChange,e=>{let{textTrack:t}=e;void 0===r&&void 0===t||this.telemetry.logEvent({name:"SetTextTrack",data:{previous:Me(r),next:Me(t)}}),r=t})}initVisiblePlaybackController(e,t){const r=new el(this);this.once(Lr.Destroy,()=>{r.destroy()});const n=new $s({play:()=>{this.playingStateSynchronization.waitAndLock(()=>this.play(Tn.l.VisiblePlayback))},pause:()=>{this.playingStateSynchronization.waitAndLock(async()=>{this.pause(Tn.l.VisiblePlayback)})},togglePlaybackVisibilitySetting:e,autoplay:t,playerStateAdaptor:r,logEvent:e=>this.telemetry.logEvent({name:e})}),i=e=>{let{playingState:t,playingStateReason:r}=e;r!==Tn.l.VisiblePlayback&&n.actualizeAutoplay(t===Or.X.PLAY)};this.on(Lr.RequestPlayingState,i),this.once(Lr.WatchedTimeChange,()=>{this.off(Lr.RequestPlayingState,i)}),this.once(Lr.Destroy,()=>{n.destroy()});const a=new Qs({element:this.container,togglePlaybackVisibilitySetting:e,playerStateAdaptor:r,playPauseController:n}),{isVisibilitySupported:o}=a.getVisualState();!function(e,t){try{s(e.contentWindow).isVisibilitySupported=t}catch(yc){console.warn&&console.warn(yc)}}(this.iframe,o),this.once(Lr.Destroy,()=>{a.destroy()}),a.observeVisualState(e=>{!function(e,t){try{s(e.contentWindow).initialVisibility=t}catch(yc){console.warn&&console.warn(yc)}}(this.iframe,e.isElementVisible),this.performOnIframeLoad(()=>{this.postMessenger.sendCommand(Ss.setExternalVisualState,{isVisible:e.isElementVisible})})}),this.postMessenger.on("Command",e=>{e.commandName===Ss.getExternalVisualState&&e.sendAnswer({isVisible:a.getVisualState().isElementVisible})});const l=e=>{a.notifyFullScreen(e.isFullscreen)};this.on(Lr.FullscreenStateChange,l),this.once(Lr.Destroy,()=>{this.off(Lr.FullscreenStateChange,l)});const c=e=>{a.notifyPip(e.isPictureInPicture)};return this.on(Lr.PictureInPictureStateChange,c),this.once(Lr.Destroy,()=>{this.off(Lr.PictureInPictureStateChange,c)}),a}initErrorScreen(){this.once(Lr.ResourcesIdle,this.loadComponents),this.on(Lr.ErrorChange,async e=>{var t;let{error:r}=e;void 0!==r?Tt(r)||(await this.loadComponents(),this.destroyed||(void 0===this.errorScreen&&(this.errorScreen=Mr.initErrorScreen(Ft({},this.additionalParams,{element:this.container,onReportClick:this.sendReportToTelemetry,getReportId:()=>this.telemetry.generateReportId()})),this.once(Lr.Destroy,()=>this.errorScreen.destroy())),r=void 0===this.store?r:this.store.getState().error,void 0!==r&&(null==(t=this.postMessenger)||t.sendCommand(Ss.setPictureInPicture,!1),this.errorScreen.showErrorMessage(r.messageDetails||B(r))))):this.errorScreen&&this.errorScreen.changeVisibility(!1)})}addRequiredFieldsToAdditionalParams(e){return Ft({},e,{vsid:this.additionalParams.vsid,from:e.from||this.additionalParams.from,puid:e.puid||this.additionalParams.puid,folder_id:e.folder_id||this.additionalParams.folder_id})}waitForSetSourceComplete(){return new Promise((e,t)=>{const r=this.sourceIdSignal.addOne(()=>{this.setSourceStage=Mn.READY,e(),a()}),n=e=>{let{error:r}=e;r&&r.isFatal&&(this.setSourceStage=Mn.ERROR,t(r),a())},i=()=>{t({message:"CANCELED",isFatal:!1}),a()},a=()=>{r(),this.off(Lr.ErrorChange,n),this.off(Lr.SourceChange,i)};this.on(Lr.ErrorChange,n),this.once(Lr.SourceChange,i)})}createInternalContainer(e){const t=e.ownerDocument.createElement("div");return I(t,{width:"100%",height:"100%"}),L(e,t),t}prepareContainerNode(){const e=w(this.container,function(e){const{ownerDocument:t}=e;if(!t)return;const{defaultView:r}=t;return r||void 0}(this.container)).position;I(this.container,{position:e&&"static"!==e?e:"relative"})}createPlayerNode(){const e=this.container.ownerDocument.createElement("div");return I(e,{width:"100%",height:"100%",position:"absolute",top:"0",left:"0"}),e}initPlayerStore(e){let{config:t,vsid:r}=e;return new Ll(Ft({},xn,{volume:t.streamPlayerParams.volume,muted:t.streamPlayerParams.muted,vsid:r}),(e,t)=>this.on(e,t))}initPostMessenger(){const e=new bs({id:this.getState().vsid,receiver:window,sender:this.iframe.contentWindow});return e.on("Event",e=>{var t,r,n,i,a;if("onInitError"===e.eventName)return this.emitError(new Rr(e.data)),void(e.data.code===sr.PLAYER_CONTAINER_NOT_FOUND&&this.destroyInternal(kn.PlayerContainerNotFound));if(!this.isReady&&"onReady"!==e.eventName)return this.debug.logInternals&&console.warn("// not ready",e.eventName,e.data),void this.readyPendingEvents.push(e);const{sourceId:o}=e;this.sourceIdSignal.dispatch(o);const s=function(e){return Ts[e]}(e.eventName),l=(e=>{let{eventName:t,data:r}=e;if("onError"!==t)return!1;try{return r=r,!!r.isFatal&&("string"===typeof r.details?JSON.parse(r.details).stage===On.SET_SOURCE:r.details.stage===On.SET_SOURCE)}catch(vc){return!1}})(e);if(this.setSourceStage!==Mn.LOADING||!s||l)if(this.setSourceStage===Mn.READY&&s&&o<this.sourceIdSignal.getValue())this.debug.logInternals&&console.warn("// skip public and internal "+e.eventName+" because of old source",e.eventName,e.data);else switch(e.eventName){case"onInit":break;case"onVideoTypeChange":this.emit(Lr.VideoTypeChange,{videoType:e.data});break;case"onStateChange":const{playingState:o,reason:s}=e.data;this.getState().playingState!==o&&(this.emit(Lr.PlayingStateChange,{playingState:o,playingStateReason:s}),this.telemetry.writePlayerAliveStateManually());break;case"onExpectedStalledChange":this.telemetry.onExpectedBuffering(e.data);break;case"onAdStateChange":const{nextAdState:l,prevAdState:c}=e.data;this.emit(Lr.AdStateChange,{adState:l});c.state===Pn.NOT_PLAYING&&l.state===Pn.PLAYING&&this.telemetry.onAdStart({adType:l.type});c.state===Pn.PLAYING&&l.state===Pn.NOT_PLAYING&&this.telemetry.onAdEnd({adType:c.type});break;case"onBeforeAdPodStart":this.emit(Lr.BeforeAdPodStart,e.data);break;case"onAdLoaded":this.playerTracker.onAdLoaded(e.data),this.emit(Lr.AdLoaded,e.data);break;case"onAdError":this.playerTracker.onAdError(),this.emit(Lr.AdError,e.data);break;case"onAdPodClick":this.playerTracker.onAdPodClick(),this.emit(Lr.AdPodClick,{});break;case"onAdPodStart":const{adState:{type:d},source:{params:{adConfig:u={}}={}}={}}=this.getState();void 0!==d&&this.emit(Lr.AdPodStart,{type:d,adConfig:u});break;case"onAdPodSkip":this.emit(Lr.AdPodSkip,{});break;case"onAdPodEnd":this.emit(Lr.AdPodEnd,{}),this.telemetry.onAdBetween({adType:this.getState().adState.type});break;case"onAdSkippableStateChange":this.emit(Lr.AdSkippableStateChange,{adSkippableState:e.data});break;case"onAdVolumeAvailabilityStateChange":this.emit(Lr.AdVolumeAvailabilityStateChange,{adVolumeAvailabilityState:e.data});break;case"onAdPodCloseStateChange":this.emit(Lr.AdPodCloseStateChange,{adPodCloseState:e.data});break;case"onAdPodDurationChange":this.emit(Lr.AdPodDurationChange,{adPodDuration:e.data});break;case"onAdPodCurrentTimeChange":this.emit(Lr.AdPodCurrentTimeChange,{adPodCurrentTime:e.data});break;case"onAdPodTimeToSkipChange":this.emit(Lr.AdPodTimeToSkipChange,{adPodTimeToSkip:e.data});break;case"onAdInteraction":this.emit(Lr.AdInteraction,void 0);break;case"onNextAdRemainingTimeChange":this.emit(Lr.NextAdRemainingTimeChange,{nextAdRemainingTime:e.data});break;case"onTimelineInfoChange":const{currentTime:h,duration:f,utcStartTime:p,dvrStartTime:m,dvrDuration:g}=e.data;this.emit(Lr.CurrentTimeChange,{currentTime:h}),this.emit(Lr.DurationChange,{duration:f}),this.emit(Lr.UtcStartTimeChange,{utcStartTime:p}),this.emit(Lr.DVRStartTimeChange,{dvrStartTime:m}),this.emit(Lr.DVRDurationChange,{dvrDuration:g}),this.emit(Lr.PlaybackRateRangeChange,{playbackRateRange:Ye({videoType:this.getState().videoType,currentTime:h,dvrStartTime:m,dvrDuration:g})});break;case"onPositionChange":const{watchedTime:y,liveLatency:v}=e.data;this.emit(Lr.WatchedTimeChange,{watchedTime:y}),this.emit(Lr.LiveLatencyChange,{liveLatency:v});break;case"onFullScreenChange":this.emit(Lr.FullscreenStateChange,{isFullscreen:e.data});break;case"onRequestFullscreenChange":this.emit(Lr.RequestFullscreenStateChange,{nextFullscreenState:e.data});break;case"onVolumeChange":this.emit(Lr.MutedChange,{muted:e.data.muted}),this.emit(Lr.VolumeChange,{volume:e.data.volume}),this.emit(Lr.VolumeChangeReasonChange,{volumeChangeReason:e.data.changeReason});break;case"onReady":this.emit(Lr.Ready,this);break;case"onError":this.emitError(new Rr(e.data));break;case"onRecover":this.telemetry.logEvent({name:"RecoverStreamError",data:{details:e.data}}),this.telemetry.onRecover({recoverReason:e.data.reason}),this.emit(Lr.RecoverStart,e.data);break;case"onVideoTrackChange":this.emit(Lr.VideoTrackChange,{videoTrack:e.data});break;case"onVideoTracksChange":this.emit(Lr.VideoTracksChange,{videoTracks:e.data});break;case"onAudioTrackChange":this.emit(Lr.AudioTrackChange,{audioTrack:e.data});break;case"onAudioTracksChange":this.emit(Lr.AudioTracksChange,{audioTracks:e.data});break;case"onTextTrackChange":this.emit(Lr.TextTrackChange,{textTrack:e.data});break;case"onTextTracksChange":this.emit(Lr.TextTracksChange,{textTracks:e.data});break;case"onSubtitlesChange":this.emit(Lr.SubtitlesChange,{subtitles:e.data});break;case"onPlaybackRateChange":const E=this.getState().playbackRate;this.emit(Lr.PlaybackRateChange,{playbackRate:e.data}),E!==e.data&&this.telemetry.writePlayerAliveStateManually();break;case"onBufferingRangesChange":this.emit(Lr.BufferedRangesChange,{bufferedRanges:e.data});break;case"onThumbnailTileGeneralMetaInfoChange":this.emit(Lr.TileMetaInfoChange,{tileMetaInfo:e.data});break;case"onOriginalBroadcastAdStateChange":const{cueId:_,originalBroadcastAdDuration:S}=e.data;this.logEventInternal(void 0===_?"OriginalBroadcastAdEnd":"OriginalBroadcastAdStart",{cueId:_,originalBroadcastAdDuration:S});break;case"onDrmSystemChange":this.telemetry.setStaticParams({drm:e.data}),this.emit(Lr.DrmSystemChange,{drmSystem:e.data});break;case"onChangeStream":e.data&&this.telemetry.setStaticParams({streamUrl:e.data.url}),this.emit(Lr.StreamChange,{stream:e.data}),this.emit(Lr.TileMetaInfoUrlChange,{tileMetaInfoUrl:Xe(e.data?e.data.url:void 0)});break;case"onStreamsWithSupportInfoChange":this.emit(Lr.StreamsWithSupportInfoChange,e.data);break;case"onContentImpression":this.emit(Lr.ContentImpression,e.data);break;case"onResourcesIdle":this.emit(Lr.ResourcesIdle,{});break;case"onVisualStateChange":const{isFullscreen:R,isPictureInPicture:b}=this.getState();R===e.data.isFullScreen&&b===e.data.isPip||this.telemetry.writePlayerAliveStateManually(),this.emit(Lr.PictureInPictureStateChange,{isPictureInPicture:e.data.isPip}),this.emit(Lr.VisibleStateChange,{isVisible:e.data.isVisible}),this.telemetry.setStaticParams({visualState:e.data}),this.savePlayerAliveData({containerWidth:e.data.width*devicePixelRatio,containerHeight:e.data.height*devicePixelRatio});break;case"onCapSizeChange":this.savePlayerAliveData({capWidth:null==(t=e.data)?void 0:t.width,capHeight:null==(r=e.data)?void 0:r.height});break;case"onPlaybackQualityUpdate":const A={droppedFrames:e.data.droppedVideoFrames,shownFrames:e.data.totalVideoFrames-e.data.droppedVideoFrames};this.savePlayerAliveData(A),null==(n=this.debugPanel)||n.onFramesInfoChange(A);break;case"onEngineChange":null==(i=this.debugPanel)||i.onEngineChange(e.data),this.telemetry.setStaticParams({engine:e.data});break;case"onStartStageChange":this.emit(Lr.StartStageChange,{startStage:e.data}),e.data!==gn.waitForDocumentVisibility&&e.data!==gn.waitForUserPlay||this.telemetry.stopInitBufferingTimer(),e.data!==gn.init&&e.data!==gn.starting||this.telemetry.onInitBuffering();break;case"onVideoSizeChange":this.emit(Lr.VideoSizeChange,{videoSize:e.data});break;case"onNetworkStatusChange":this.emit(Lr.NetworkStatusChange,e.data);break;case"onBandwidthEstimateChange":const T=Math.round(e.data.value),P=e.data.source;this.savePlayerAliveData({bandwidthEstimate:T,bandwidthSource:P});const O=function(e){return e.value<=5e5?gs.SLOW:gs.OK}(e.data);this.getState().connectionQuality!==O&&this.emit(Lr.ConnectionQualityChange,{connectionQuality:O}),null==(a=this.debugPanel)||a.onBandwidthEstimateChange(e.data);break;case"onInrollFrame":this.emit(Lr.InrollFrame,e.data);break;case"onLogEvent":this.telemetry.logEvent({name:e.data.event,data:e.data.params,labels:e.data.additionalStatsLabels},e.data.sourceIndex);break;case"onPreloadDetailsUpdate":this.telemetry.setPreloadDetails(e.data.details)}else this.debug.logInternals&&console.warn("// skip public and internal "+e.eventName+" because setSource is in progress",e.eventName,e.data)}),e}async requestExternalCsrfToken(){if(this.externalPlaybackCsrfToken)return this.externalPlaybackCsrfToken;try{this.logEventInternal(An.ExternalPlaybackPlayerCsrfFetching);const{token:e}=await hs();return this.logEventInternal(An.ExternalPlaybackPlayerCsrfFetchSuccess),this.updateExternalPlaybackCsrfToken(e),e}catch(yc){return this.logEventInternal(An.ExternalPlaybackPlayerCsrfFetchError),""}}updateExternalPlaybackCsrfToken(e){this.externalPlaybackCsrfToken=e,void 0!==e&&(clearTimeout(this.externalPlaybackTokenExpireTimeout),this.externalPlaybackTokenExpireTimeout=window.setTimeout(()=>{this.externalPlaybackCsrfToken=void 0,this.logEventInternal(An.ExternalPlaybackCsrfTokenExpired)},6e4))}logEventInternal(e,t,r){void 0===t&&(t={}),this.telemetry.logEvent({name:e,data:t,extraRootFields:r})}async destroyIFrame(e){const{iframe:t}=this;if(!t||!t.parentElement)return;this.isIframeLoaded||this.store.getState().error||(await Promise.race([this.loadIframeDeferred.promise.catch(Cr.Z),this.waitForEvent(Lr.ErrorChange)]),this.loadIframeDeferred.reject(void 0));const{isFullscreen:r}=this.getState();if(r)return new Promise(t=>{this.iframe.style.display="none",r&&(this.once(Lr.FullscreenStateChange,()=>{this.destroyIFrame(e).then(t)}),this.exitVideoElementFullscreen())});this.isIframeLoaded&&await this.postMessenger.sendRequest(Ss.destroy,{reason:e}),t.src="",F(t)}subscribeExternalFullscreenChange(e){this.once(Lr.Destroy,function(e){let{element:t,onChange:r}=e;const n=t.ownerDocument||window.document;let i=!1;r(i);const a=Ns.map(e=>(i=i||Ze(n,t),He(n,e.events.change,()=>{try{const e=Ze(n,t);if(e===i)return;r(e),i=e}catch(e){}},{passive:!0})));return()=>{a.forEach(e=>e())}}({element:e,onChange:e=>{this.performOnIframeLoad(()=>{this.postMessenger.sendCommand(Ss.setExternalVisualState,{isFullscreen:e})})}}))}initPlaybackTracking(){this.on(Lr.WatchedTimeChange,e=>{let{watchedTime:t}=e;return this.telemetry.updateWatchedTime(t)}),this.on(Lr.PlayingStateChange,e=>{let{playingState:t}=e;return this.telemetry.setPlayingState(t)})}initPlayerTracker(){const e=new is({vsid:this.getState().vsid,getAdState:()=>this.getState().adState,getVideoTrack:()=>this.getState().videoTrack,getAudioTrack:()=>this.getState().audioTrack,getTextTrack:()=>this.getState().textTrack,getVideoType:()=>this.getState().videoType,getIsFullscreen:()=>this.getState().isFullscreen,getDrmSystemName:()=>this.getState().drmSystem,getIsDrmSupported:()=>{var e;if(void 0!==(null==(e=this.getState().stream)?void 0:e.drmConfig))return void 0===this.getState().error},getMuted:()=>this.getState().muted||0===this.getState().volume,getDuration:()=>this.getState().duration||0,getPlayingState:()=>this.getState().playingState,getCurrentTime:()=>this.getState().currentTime,getWatchedTime:()=>this.getState().watchedTime,getUtcPosition:()=>{const{utcStartTime:e,currentTime:t}=this.getState();return void 0===e?0:e+t}});return this.on(Lr.Ready,e.onReady),this.on(Lr.ErrorChange,t=>{let{error:r}=t;void 0!==r&&e.onError(r)}),this.on(Lr.CurrentTimeChange,t=>{let{currentTime:r}=t;return e.onCurrentTimeChange(r)}),this.on(Lr.WatchedTimeChange,t=>{let{watchedTime:r}=t;return e.onWatchedTimeChange(r)}),this.on(Lr.AdStateChange,t=>{let{adState:r}=t;return e.onAdStateChange(r)}),this.on(Lr.PlayingStateChange,t=>{let{playingState:r}=t;return e.onStateChange(r)}),this.on(Lr.AdPodStart,()=>{e.onAdPodStart()}),this.on(Lr.AdPodEnd,()=>{e.onAdPodEnd()}),this.on(Lr.AdPodSkip,()=>{e.onAdPodSkip()}),e}initDebugPanel(){this.once(Lr.ResourcesIdle,async()=>{if(await this.loadComponents(),!this.destroyed&&void 0===this.debugPanel){var e;this.debugPanel=Mr.initDebugPanel({container:this.container,getState:()=>this.getState(),getSourceId:()=>this.sourceIdSignal.getValue(),getAdditionalParams:()=>this.additionalParams,options:{qr:!0}}),this.once(Lr.Destroy,()=>{var e;return null==(e=this.debugPanel)?void 0:e.destroy()});const t=()=>{var e;return null==(e=this.debugPanel)?void 0:e.update()};this.on(Lr.CurrentTimeChange,t),this.on(Lr.DurationChange,t),this.on(Lr.WatchedTimeChange,t),this.on(Lr.PlayingStateChange,t),this.on(Lr.LiveLatencyChange,t),this.on(Lr.VideoTypeChange,t),this.on(Lr.SourceChange,t),this.on(Lr.VideoTrackChange,t),this.on(Lr.AudioTrackChange,t),this.on(Lr.BufferedRangesChange,t),null==(e=this.debugPanel)||e.setVisibility(this.debug.showDebugPanel)}})}requestSourceConfigForRecover(e){if(e.isFatal&&function(e){return e.category===vr.DRM?e.code===Er.DRM_PROXY_ERROR_SIGNATURE_EXPIRED:e.category===vr.REGIONAL||e.category===vr.ACCESS}(e))return Promise.resolve().then(()=>{var e;const t=null==(e=this.playerApiSourceConfig)?void 0:e.update();return sn(t)&&(this.emit(Lr.PlayingStateChange,{playingState:Or.X.BUFFERING,playingStateReason:Tn.l.WaitForSourceConfigUpdate}),t.catch(e=>{throw this.emit(Lr.PlayingStateChange,{playingState:Or.X.PAUSE,playingStateReason:Tn.l.Unknown}),e})),t})}async tryRecoverSourceConfigInAsyncMode(e){const t=await this.requestSourceConfigForRecover(e);if(void 0===t)return!1;const r=(()=>{try{return ve(t,this.config,this.playerApiSourceConfig.source.sourceIndex)}catch(e){const t=Rr.from(e,{code:sr.INVALID_CONFIG_IN_SOURCE_UPDATE,isFatal:!1});return void this.emitError(t)}})();return void 0!==r&&(setTimeout(()=>{this.logEventInternal("UpdateSourceConfig"),this.setSourceInternal(r,{shouldSaveProgress:!0})}),!0)}tryRecoverSourceConfigInSyncMode(e){const t=this.getSourceConfigForRecover(e);return!!t&&(setTimeout(()=>{this.logEventInternal("UpdateSourceConfigSync"),this.setSourceInternal(t,{shouldSaveProgress:!0})}),!0)}async tryRecoverSourceConfig(e){try{if(this.tryRecoverSourceConfigInSyncMode(e))return!0;if(await this.tryRecoverSourceConfigInAsyncMode(e))return!0}catch(t){}return!1}async emitError(e,t){if(e.isFatal&&e.category===vr.DRM&&!Hl&&(e=new Rr({code:un?sr.IFRAME_DOES_NOT_ALLOW_DRM:sr.DRM_IS_NOT_ALLOWED,isFatal:!0,details:{originalCode:e.code,originalDetails:e.details,allowedFeaturePolicies:wt()}},this.additionalParams.vsid)),(e=new Rr(Ft({},e.toJSON(),{isFatal:e.isFatal&&!this.destroyed&&D(this.container)}),this.additionalParams.vsid)).isFatal&&this.emit(Lr.PlayingStateChange,{playingState:Or.X.PAUSE,playingStateReason:Tn.l.Unknown}),e.isFatal&&function(e){return-1===As.indexOf(e.category)}(e)){let t=at(this.getState())?Or.X.PLAY:Or.X.PAUSE;const r=e=>{let{playingState:r}=e;t=r};this.on(Lr.RequestPlayingState,r);const n=await this.tryRecoverSourceConfig(e);this.off(Lr.RequestPlayingState,r),n&&(e=new Rr(Ft({},e.toJSON(),{isFatal:!1})),at({playingState:t})&&this.play(Tn.l.CompletedRecoverSourceConfig))}var r,n;e.isFatal&&(null==(r=this.setSourceDeferred)||r.reject(new Error("SetSource rejected cause fatal error")),null!=(n=this.getState())&&n.error?e=new Rr(Ft({},e.toJSON(),{isFatal:!1})):this.emit(Lr.ErrorChange,{error:e}));Tt(e)?this.telemetry.logError({error:new Rr(Ft({},e.toJSON(),{code:"VH_"+e.message,isFatal:!1})),extraRootFields:t}):this.telemetry.logError({error:e,extraRootFields:t})}initPreloadSkin(e){if(!1===e.loadSkin)return;if(this.getState().playingState===Or.X.PLAY)return;const t=_t({document:this.container.ownerDocument,poster:void 0,firstFrameHash:void 0,firstFrameUrl:void 0,style:void 0,hiddenControls:e.originalHiddenControls,primaryColor:e.primaryColor,backgroundColor:e.streamPlayerParams.backgroundColor,onReady:()=>{this.emit(Lr.PosterReady,{})}});return this.container.appendChild(t.element),this.once(Lr.SkinReady,()=>{var e;!(this.vhHelper&&null!=(e=this.getState().error)&&e.isFatal)&&t.setVisibility(!1)}),this.once(Lr.Destroy,()=>t.destroy()),this.waitForPlay().then(()=>{t.setVisibility(!1)}).catch(Cr.Z),t}updateStateForSetSource(e,t){let{shouldSaveProgress:r=!1}=void 0===t?{}:t;this.unsetFiltersForSourceRelatedEvents(),this.emit(Lr.StreamChange,{stream:void 0}),this.emit(Lr.SourceChange,{source:e}),this.emit(Lr.StreamsWithSupportInfoChange,void 0),this.emit(Lr.DrmSystemChange,{drmSystem:void 0}),this.emit(Lr.VideoTrackChange,{videoTrack:void 0}),this.emit(Lr.VideoTracksChange,{videoTracks:[]}),this.emit(Lr.AudioTrackChange,{audioTrack:void 0}),this.emit(Lr.AudioTracksChange,{audioTracks:[]}),this.emit(Lr.TextTrackChange,{textTrack:void 0}),this.emit(Lr.TextTracksChange,{textTracks:[]}),this.emit(Lr.TileMetaInfoChange,{tileMetaInfo:void 0}),this.emit(Lr.CurrentTimeChange,{currentTime:xn.currentTime}),this.emit(Lr.DurationChange,{duration:xn.duration}),this.emit(Lr.UtcStartTimeChange,{utcStartTime:xn.utcStartTime}),this.emit(Lr.DVRStartTimeChange,{dvrStartTime:xn.dvrStartTime}),this.emit(Lr.DVRDurationChange,{dvrDuration:xn.dvrDuration}),r||this.emit(Lr.WatchedTimeChange,{watchedTime:xn.watchedTime}),this.emit(Lr.VideoTypeChange,{videoType:xn.videoType}),this.emit(Lr.AdStateChange,{adState:xn.adState}),this.setFiltersForSourceRelatedEvents()}setFiltersForSourceRelatedEvents(){this.setFilter(Lr.CurrentTimeChange,e=>{let{currentTime:t}=e;return!pn()(t,this.getState().currentTime)}),this.setFilter(Lr.WatchedTimeChange,e=>{let{watchedTime:t}=e;return!pn()(t,this.getState().watchedTime)}),this.setFilter(Lr.DurationChange,e=>{let{duration:t}=e;return!pn()(t,this.getState().duration)}),this.setFilter(Lr.UtcStartTimeChange,e=>{let{utcStartTime:t}=e;return!pn()(t,this.getState().utcStartTime)}),this.setFilter(Lr.DVRStartTimeChange,e=>{let{dvrStartTime:t}=e;return!pn()(t,this.getState().dvrStartTime)}),this.setFilter(Lr.DVRDurationChange,e=>{let{dvrDuration:t}=e;return!pn()(t,this.getState().dvrDuration)}),this.setFilter(Lr.PlaybackRateRangeChange,e=>{let{playbackRateRange:t}=e;return!pn()(t,this.getState().playbackRateRange)}),this.setFilter(Lr.AdStateChange,e=>{let{adState:t}=e;return!pn()(t,this.getState().adState)}),this.setFilter(Lr.VolumeChange,e=>{let{volume:t}=e;return!pn()(t,this.getState().volume)}),this.setFilter(Lr.VideoTracksChange,e=>{let{videoTracks:t}=e;return!(0===this.getState().videoTracks.length&&0===t.length)}),this.setFilter(Lr.AudioTracksChange,e=>{let{audioTracks:t}=e;return!(0===this.getState().audioTracks.length&&0===t.length)}),this.setFilter(Lr.TextTracksChange,e=>{let{textTracks:t}=e;return!(0===this.getState().textTracks.length&&0===t.length)})}unsetFiltersForSourceRelatedEvents(){this.unsetFilter(Lr.CurrentTimeChange),this.unsetFilter(Lr.WatchedTimeChange),this.unsetFilter(Lr.DurationChange),this.unsetFilter(Lr.UtcStartTimeChange),this.unsetFilter(Lr.DVRStartTimeChange),this.unsetFilter(Lr.DVRDurationChange),this.unsetFilter(Lr.PlaybackRateRangeChange),this.unsetFilter(Lr.VolumeChange),this.unsetFilter(Lr.VideoTracksChange),this.unsetFilter(Lr.AudioTracksChange),this.unsetFilter(Lr.TextTracksChange)}savePlayerAliveData(e){this.playerAliveData=Ft({},this.playerAliveData,e)}resetPlayerAliveData(){this.playerAliveData={bandwidthEstimate:0,containerHeight:this.playerAliveData.containerHeight,containerWidth:this.playerAliveData.containerWidth}}applySourceInfoToTelemetry(e){try{this.telemetry.setStaticParams(this.getTelemetryStaticParams(e)),this.telemetry.enableRemoteProgressSaving(At(e))}catch(Kn){setTimeout(()=>{throw Kn})}}getTelemetryStaticParams(e){var t;const{source:r}=e,{puid:n,from:i}=r.params.additionalParams;return{additionalParameters:It(r.params.additionalParams),slots:(a=r.params.additionalParams,void 0===a?"":a.slots||""),testIds:q(r.params.additionalParams),videoContentId:r.params.videoInfo.videoContentId,streamUrl:null==(t=r.streams[0])?void 0:t.url,labels:{from:i},engine:void 0,drm:void 0,puid:n};var a}createSourceConfigForRecoverGetter(e){let t,r=e.source;return this.on(Lr.SourceChange,e=>{let{source:t}=e;r=t}),this.on(Lr.StreamsWithSupportInfoChange,e=>{t=e}),n=>{const i=void 0===t?void 0:t.filter(Y);if(!this.canRecoverBySourceUpdate(n,r,i))return;const a=function e(t,r){void 0===r&&(r={preserveConstructors:!0});let n=t;if((0,nn.k)(t)){return t.map(t=>e(t,r))}return C(t)?new Date(t.getTime()):(!(0,xr.m)(t)&&(0,_r.K)(t)&&(n=r.preserveConstructors?Object.create(t):{},(0,an.M)(t,(t,i)=>{n[i]=e(t,r)})),n)}(r),o=i.map(e=>{let{stream:t}=e;return t});return a.streams=this.removeCurrentStream(o),Ft({},e,{source:a})}}canRecoverBySourceUpdate(e,t,r){if(!e.isFatal||!t||!r)return!1;const n=r.map(e=>{let{stream:t}=e;return t}),i=this.removeCurrentStream(n);return 0!==i.length&&i.length!==t.streams.length}removeCurrentStream(e){const{stream:t}=this.getState();return e.filter(e=>!pn()(e,t))}waitForEvent(e){return new Promise(t=>this.once(e,t))}initVhHelper(e){let{contentId:t,poster:r,vhParams:n,queryParams:i}=e;const a=new Yl({contentId:t,vhParams:n,queryParams:(0,Zl.r)(Ft({},i),this.container),playerApi:this});return a.on("ShowAnnotation",async e=>{var t,r,n;await this.loadComponents(),null==(t=this.preloadSkin)||t.setSpinnerVisibility(!1),null==(r=this.preloadSkin)||r.setAnnotationText(Mr.i18nTranslateSandbox(e)),null==(n=this.preloadSkin)||n.setVisibility(!0)}),a.on("SetPoster",e=>{var t,n;null==(t=this.preloadSkin)||t.setPoster(r||e||"","",""),null==(n=this.preloadSkin)||n.setVisibility(!0)}),a.on("Destroy",()=>{var e,t,r;null==(e=this.preloadSkin)||e.setVisibility(!1),null==(t=this.preloadSkin)||t.setSpinnerVisibility(!1),null==(r=this.preloadSkin)||r.setPoster("","","")}),a.on("SetSource",()=>{var e,t;null==(e=this.preloadSkin)||e.setAnnotationText(""),null==(t=this.preloadSkin)||t.setSpinnerVisibility(!0)}),a.on("Error",e=>{var t;e.code===sr.REQUEST_SOURCE_ERROR&&(null==(t=this.preloadSkin)||t.setVisibility(!1));this.emitError(e)}),a.on("UgcLiveStatusChange",e=>{this.emit(Lr.UgcLiveStatusChange,{ugcLiveStatus:e})}),a}waitForPlay(){return new Promise((e,t)=>{var r;this.once(Lr.Destroy,t),null==(r=this.setSourceDeferred)||r.promise.catch(t);const n=()=>{const e=this.getState();if(!e)return!1;const{playingState:t,adState:{state:r}}=e;return t===Or.X.PLAY||r===Pn.PLAYING};if(n())return void e();const i=()=>{n()&&(e(),this.off(Lr.PlayingStateChange,i),this.off(Lr.AdStateChange,i))};this.on(Lr.PlayingStateChange,i),this.on(Lr.AdStateChange,i)})}configureSkin(e,t){if(void 0!==this.config.loadSkin)return;const r=()=>{this.skin&&(this.skin.configure(e),this.skin.updateExternalPlayerConfig(t))};this.skin?r():this.once(Lr.SkinReady,e=>{let{error:t}=e;t||r()})}initOnlyOnePlayingUnmutePlayerControl(){const{vsid:e}=this.getState(),t=()=>{sessionStorage.setItem("videoplayer-playing-vsid",e),dispatchEvent(new StorageEvent("storage",{key:"videoplayer-playing-vsid"}))};addEventListener("storage",t=>{let{key:r}=t;if("videoplayer-playing-vsid"!==r)return;const n=sessionStorage.getItem("videoplayer-playing-vsid");if(!n)return;const{muted:i}=this.getState();n===e||i||this.pause(Tn.l.StartPlayingAnotherPlayer)}),this.on(Lr.PlayingStateChange,e=>{let{playingState:r}=e;const{muted:n}=this.getState();r!==Or.X.PLAY||n||t()}),this.on(Lr.MutedChange,e=>{let{muted:r}=e;const{playingState:n}=this.getState();n!==Or.X.PLAY||r||t()})}}var sc=e(8767),lc=e(3756),cc=e(4575),dc=e(2587);let uc;!function(e){e.PLAYER_API="player-api.js",e.PLAYER_API_MODERN="player-api.modern.js",e.PLAYER="player.v2.js",e.PLAYER_MODERN="player.v2.modern.js"}(uc||(uc={}));const hc=p(window),fc={};let pc;const mc=["setReadyInstance","setInstance"],gc=e=>e.usePlayerApiMock?Yt(e):O(e,e=>new oc(e));Zt.create=gc,"https://frontend.vh.yandex.ru/player"===Xt.H&&(Zt.createVhPlayerApi=e(8484).H),Ht.init=gc,Ht.preloadScripts=()=>Promise.resolve([])})()})();